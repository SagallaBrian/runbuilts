"use strict";(self.webpackChunksuluhi_admin_frontend=self.webpackChunksuluhi_admin_frontend||[]).push([[53],{2053:(X,Z,s)=>{s.r(Z),s.d(Z,{ClientsModule:()=>W});var c=s(6895),d=s(8869),o=s(4006),C=s(4333),x=s(1213),t=s(4650),v=s(583),T=s(7997),N=s(5511),A=s(8057),q=s(295);function y(e,l){1&e&&(t.ynx(0),t.TgZ(1,"div",8),t._UZ(2,"app-sul-loader"),t.qZA(),t.BQk())}function U(e,l){if(1&e&&(t.ynx(0),t.TgZ(1,"div",8),t._UZ(2,"app-error-occured",10),t.qZA(),t.BQk()),2&e){const n=t.oxw(2);t.xp6(2),t.Q6J("errorMessage",n.errorMessage)}}const E=function(e){return["edit",e]};function F(e,l){if(1&e&&(t.ynx(0),t.TgZ(1,"tr",18)(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",19),t._uU(7),t.qZA(),t.TgZ(8,"td",19),t._uU(9),t.qZA(),t.TgZ(10,"td",20),t._uU(11),t.qZA(),t.TgZ(12,"td",20),t._uU(13),t.qZA(),t.TgZ(14,"td",20),t._uU(15),t.qZA()(),t.BQk()),2&e){const n=l.$implicit,i=l.index;t.xp6(1),t.Q6J("routerLink",t.VKq(9,E,n._id)),t.xp6(2),t.Oqu(i+1),t.xp6(2),t.AsE("",n.firstName," ",n.lastName,""),t.xp6(2),t.Oqu(n.email),t.xp6(2),t.Oqu(n.phoneNumber),t.xp6(2),t.Oqu(n.companyName),t.xp6(2),t.Oqu(n.department),t.xp6(2),t.Oqu(n.designation)}}const I=function(e,l,n){return{itemsPerPage:e,currentPage:l,totalItems:n}};function J(e,l){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",12)(2,"table",13)(3,"thead")(4,"tr",14)(5,"th"),t._uU(6,"#"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Name"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Email"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Phone Number"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Company"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Department"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Designation"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,F,16,11,"ng-container",15),t.ALo(21,"paginate"),t.qZA()()(),t.TgZ(22,"div",16)(23,"pagination-controls",17),t.NdJ("pageChange",function(r){t.CHM(n);const a=t.oxw(3);return t.KtG(a.onPageChange(r))}),t.qZA()(),t.BQk()}if(2&e){const n=t.oxw(3);t.xp6(20),t.Q6J("ngForOf",t.xi3(21,1,n.clients.results,t.kEZ(4,I,n.clients.pageSize,n.currentPage,n.clients.totalItems)))}}function Q(e,l){1&e&&t._UZ(0,"app-no-data-found",21),2&e&&t.Q6J("dataLabel","Client")}function k(e,l){if(1&e&&(t.YNc(0,J,24,8,"ng-container",6),t.YNc(1,Q,1,1,"ng-template",null,11,t.W1O)),2&e){const n=t.MAs(2),i=t.oxw(2);t.Q6J("ngIf",i.clients&&i.clients.results.length)("ngIfElse",n)}}function L(e,l){if(1&e&&(t.YNc(0,U,3,1,"ng-container",6),t.YNc(1,k,3,2,"ng-template",null,9,t.W1O)),2&e){const n=t.MAs(2),i=t.oxw();t.Q6J("ngIf",i.errorMessage)("ngIfElse",n)}}let M=(()=>{class e{constructor(n){this.clientService=n,this.currentPage=1,this.pageSize=10,this.options=[{name:"Client Name",formname:"name",type:"text"},{name:"Company",formname:"companyName",type:"text"},{name:"Designation",formname:"designation",type:"text"}],this.loading=!0}ngOnInit(){this.loadClients({type:"client"})}loadClients(n){this.loading=!0,this.clientService.getAllClientSuppliers(this.currentPage,this.pageSize,n).subscribe({next:i=>{this.clients=i},error:i=>{this.errorMessage=i,this.loading=!1},complete:()=>{this.loading=!1}})}onPageChange(n){this.currentPage=n,this.loadClients({type:"client"})}searchFunction(n){const i={...n,type:"client"};this.loadClients(i)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v.y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-clients"]],decls:13,vars:4,consts:[[1,"py-4"],[1,"d-flex"],[1,"flex-grow-1"],[1,"text-secondary","fw-normal","mb-1"],[3,"searchlabel","searchOptions","searchEmit"],["routerLink","/stake/clients/add",1,"btn","btn-outline-primary","btn-sm"],[4,"ngIf","ngIfElse"],["loadedContent",""],[1,"py-3"],["noError",""],[3,"errorMessage"],["nodata",""],[1,"table-responsive"],[1,"table","table-bordered","table-striped","table-hover"],[1,""],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end"],[1,"my-pagination",3,"pageChange"],[1,"cursor-pointer",3,"routerLink"],[1,"text-nowrap"],[1,"text-capitalize"],[3,"dataLabel"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4,"Clients"),t.qZA()(),t.ynx(5),t.TgZ(6,"app-search-tab",4),t.NdJ("searchEmit",function(a){return i.searchFunction(a)}),t.qZA(),t.BQk(),t.TgZ(7,"div")(8,"button",5),t._uU(9," Add Client"),t.qZA()()(),t.YNc(10,y,3,0,"ng-container",6),t.YNc(11,L,3,2,"ng-template",null,7,t.W1O),t.qZA()),2&n){const r=t.MAs(12);t.xp6(6),t.Q6J("searchlabel","Search Clients")("searchOptions",i.options),t.xp6(4),t.Q6J("ngIf",i.loading)("ngIfElse",r)}},dependencies:[c.sg,c.O5,T.S,N.i,A.A,q.O,C.LS,d.rH,C._s]}),e})();function Y(e,l){if(1&e&&(t.ynx(0),t.TgZ(1,"div",22),t._UZ(2,"app-error-occured",23),t.qZA(),t.BQk()),2&e){const n=t.oxw();t.xp6(2),t.Q6J("errorMessage",n.errorMessage)}}function O(e,l){1&e&&(t.TgZ(0,"div",24),t._uU(1," First Name is required. "),t.qZA())}function S(e,l){1&e&&(t.TgZ(0,"div",24),t._uU(1," Last Name is required. "),t.qZA())}function D(e,l){1&e&&(t.TgZ(0,"div",24),t._uU(1," Email is required. "),t.qZA())}function P(e,l){1&e&&(t.TgZ(0,"div",24),t._uU(1," Phone Number is required. "),t.qZA())}function B(e,l){1&e&&(t.TgZ(0,"div",24),t._uU(1," Company Name is required. "),t.qZA())}function w(e,l){1&e&&(t.TgZ(0,"div",24),t._uU(1," Department is required. "),t.qZA())}function z(e,l){1&e&&(t.TgZ(0,"div",24),t._uU(1," Designation is required. "),t.qZA())}function G(e,l){1&e&&(t.TgZ(0,"div",24),t._uU(1," Description is required. "),t.qZA())}function H(e,l){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",25),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.deleteClient())}),t._uU(2,"Delete Client"),t.qZA(),t.TgZ(3,"button",26),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.updateClient())}),t._uU(4,"Edit Client"),t.qZA(),t.BQk()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("disabled",n.clientForm.invalid),t.xp6(2),t.Q6J("disabled",n.clientForm.invalid)}}function K(e,l){if(1&e){const n=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.addClient())}),t._uU(1,"Add Client"),t.qZA()}if(2&e){const n=t.oxw();t.Q6J("disabled",n.clientForm.invalid)}}let b=(()=>{class e{constructor(n,i,r,a){this.formBuilder=n,this.router=i,this.clientService=r,this.route=a,this.title="Add Client",this.submiting=!1,this.loading=!1}ngOnInit(){this.clientForm=this.formBuilder.group({firstName:["",o.kI.required],lastName:["",o.kI.required],email:["",o.kI.required],phoneNumber:["",o.kI.required],companyName:["",o.kI.required],department:[""],designation:[""],description:[""],type:["client"]}),this.clientId=this.route.snapshot.paramMap.get("id"),this.clientId&&(this.title="Edit Client",this.getClient(this.clientId))}getClient(n){this.loading=!0,this.clientService.getClientSupplier(n).subscribe({next:i=>{this.clientForm.patchValue(i)},error:i=>{this.errorMessage=i,this.loading=!1},complete:()=>{this.loading=!1}})}addClient(){this.clientForm.valid&&(this.submiting=!0,this.clientService.createClientSupplier(this.clientForm.value).subscribe({next:i=>{this.clientForm.reset(),this.router.navigate(["/stake/clients"])},error:i=>{this.errorMessage=i,this.submiting=!1},complete:()=>{this.submiting=!1}}))}updateClient(){const n=this.clientForm.value;this.submiting=!0,this.clientService.updateClientSupplier(this.clientId,n).subscribe({next:i=>{this.router.navigate(["/stake/clients"])},error:i=>{this.errorMessage=i,this.submiting=!1},complete:()=>{this.submiting=!1}})}deleteClient(){this.submiting=!0,this.clientService.deleteClientSupplier(this.clientId).subscribe({next:n=>{this.router.navigate(["/stake/clients"])},error:n=>{this.errorMessage=n,this.submiting=!1},complete:()=>{this.submiting=!1}})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(o.qu),t.Y36(d.F0),t.Y36(v.y),t.Y36(d.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-edit-clients"]],decls:62,vars:13,consts:[[4,"ngIf"],[1,"my-4",3,"formGroup"],[1,"d-flex"],[1,"flex-grow-1"],[1,"fw-normal"],["routerLink","/stake/clients",1,"btn","btn-outline-secondary","btn-sm"],[1,"row"],[1,"col-lg-6"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","firstName","placeholder","Enter First Name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["type","text","id","title","formControlName","lastName","placeholder","Enter Last Name",1,"form-control"],["type","email","id","title","formControlName","email","placeholder","Enter Email",1,"form-control"],["type","text","id","title","formControlName","phoneNumber","placeholder","Enter Phone Number",1,"form-control"],["type","text","id","title","formControlName","companyName","placeholder","Enter Company Name",1,"form-control"],["type","text","id","title","formControlName","department","placeholder","Enter Department",1,"form-control"],["type","text","id","title","formControlName","designation","placeholder","Enter Designation",1,"form-control"],["for","description",1,"form-label"],["id","description","formControlName","description","placeholder","Enter Description",1,"form-control"],[4,"ngIf","ngIfElse"],["addTasking",""],[1,"py-3"],[3,"errorMessage"],[1,"invalid-feedback"],["type","submit",1,"btn","btn-danger","btn-sm","me-2",3,"disabled","click"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled","click"],["type","submit",1,"btn","btn-success","btn-sm",3,"disabled","click"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Y,3,1,"ng-container",0),t.TgZ(2,"form",1)(3,"div",2)(4,"div",3)(5,"h2",4),t._uU(6),t.qZA()(),t.TgZ(7,"div")(8,"button",5),t._uU(9," List Clients"),t.qZA()()(),t.TgZ(10,"div",6)(11,"div",7)(12,"div",8)(13,"label",9),t._uU(14,"First Name"),t.qZA(),t._UZ(15,"input",10),t.YNc(16,O,2,0,"div",11),t.qZA()(),t.TgZ(17,"div",7)(18,"div",8)(19,"label",9),t._uU(20,"Last Name"),t.qZA(),t._UZ(21,"input",12),t.YNc(22,S,2,0,"div",11),t.qZA()()(),t.TgZ(23,"div",6)(24,"div",7)(25,"div",8)(26,"label",9),t._uU(27,"Email"),t.qZA(),t._UZ(28,"input",13),t.YNc(29,D,2,0,"div",11),t.qZA()(),t.TgZ(30,"div",7)(31,"div",8)(32,"label",9),t._uU(33,"Phone Number"),t.qZA(),t._UZ(34,"input",14),t.YNc(35,P,2,0,"div",11),t.qZA()()(),t.TgZ(36,"div",6)(37,"div",7)(38,"div",8)(39,"label",9),t._uU(40,"Company"),t.qZA(),t._UZ(41,"input",15),t.YNc(42,B,2,0,"div",11),t.qZA()(),t.TgZ(43,"div",7)(44,"div",8)(45,"label",9),t._uU(46,"Department"),t.qZA(),t._UZ(47,"input",16),t.YNc(48,w,2,0,"div",11),t.qZA()()(),t.TgZ(49,"div",8)(50,"label",9),t._uU(51,"Designation"),t.qZA(),t._UZ(52,"input",17),t.YNc(53,z,2,0,"div",11),t.qZA(),t.TgZ(54,"div",8)(55,"label",18),t._uU(56,"Description"),t.qZA(),t._UZ(57,"textarea",19),t.YNc(58,G,2,0,"div",11),t.qZA(),t.YNc(59,H,5,2,"ng-container",20),t.YNc(60,K,2,1,"ng-template",null,21,t.W1O),t.qZA()()),2&n){const r=t.MAs(61);let a,m,p,u,g,_,f,h;t.xp6(1),t.Q6J("ngIf",i.errorMessage),t.xp6(1),t.Q6J("formGroup",i.clientForm),t.xp6(4),t.Oqu(i.title),t.xp6(10),t.Q6J("ngIf",(null==(a=i.clientForm.get("firstName"))?null:a.invalid)&&(null==(a=i.clientForm.get("firstName"))?null:a.touched)),t.xp6(6),t.Q6J("ngIf",(null==(m=i.clientForm.get("lastName"))?null:m.invalid)&&(null==(m=i.clientForm.get("lastName"))?null:m.touched)),t.xp6(7),t.Q6J("ngIf",(null==(p=i.clientForm.get("email"))?null:p.invalid)&&(null==(p=i.clientForm.get("email"))?null:p.touched)),t.xp6(6),t.Q6J("ngIf",(null==(u=i.clientForm.get("phoneNumber"))?null:u.invalid)&&(null==(u=i.clientForm.get("phoneNumber"))?null:u.touched)),t.xp6(7),t.Q6J("ngIf",(null==(g=i.clientForm.get("companyName"))?null:g.invalid)&&(null==(g=i.clientForm.get("companyName"))?null:g.touched)),t.xp6(6),t.Q6J("ngIf",(null==(_=i.clientForm.get("department"))?null:_.invalid)&&(null==(_=i.clientForm.get("department"))?null:_.touched)),t.xp6(5),t.Q6J("ngIf",(null==(f=i.clientForm.get("designation"))?null:f.invalid)&&(null==(f=i.clientForm.get("designation"))?null:f.touched)),t.xp6(5),t.Q6J("ngIf",(null==(h=i.clientForm.get("description"))?null:h.invalid)&&(null==(h=i.clientForm.get("description"))?null:h.touched)),t.xp6(1),t.Q6J("ngIf",i.clientId)("ngIfElse",r)}},dependencies:[c.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,A.A,d.rH]}),e})();const j=[{path:"",component:M},{path:"add",component:b},{path:"edit/:id",component:b}];let W=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,o.u5,o.UX,x.C,C.JX,d.Bz.forChild(j)]}),e})()}}]);