"use strict";(self.webpackChunksuluhi_admin_frontend=self.webpackChunksuluhi_admin_frontend||[]).push([[722],{2722:(D,u,s)=>{s.r(u),s.d(u,{ProjectsModule:()=>k});var a=s(6895),p=s(8869),t=s(4650),f=s(2340),j=s(529);let m=(()=>{class o{constructor(e){this.http=e,this.apiUrl=`${f.N.apiUrl}projects`}createProject(e){return this.http.post(this.apiUrl,e)}getProject(e){return this.http.get(`${this.apiUrl}/${e}`)}updateProject(e,r){return this.http.put(`${this.apiUrl}/${e}`,r)}deleteProject(e){return this.http.delete(`${this.apiUrl}/${e}`)}getAllProjects(){return this.http.get(this.apiUrl)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(j.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var _=s(2033),h=s(7350);function b(o,n){1&o&&(t.ynx(0),t.TgZ(1,"div",6),t._UZ(2,"app-sul-loader"),t.qZA(),t.BQk())}function v(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"div",6),t._UZ(2,"app-error-occured",8),t.qZA(),t.BQk()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("errorMessage",e.errorMessage)}}const Z=function(o){return["edit",o]};function A(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"tr",11)(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA()(),t.BQk()),2&o){const e=n.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(3,Z,e._id)),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Oqu(e.description)}}function x(o,n){if(1&o&&(t.TgZ(0,"table",9)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Title"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Description"),t.qZA()()(),t.TgZ(7,"tbody"),t.YNc(8,A,6,5,"ng-container",10),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(8),t.Q6J("ngForOf",e.projects)}}function P(o,n){if(1&o&&(t.YNc(0,v,3,1,"ng-container",4),t.YNc(1,x,9,1,"ng-template",null,7,t.W1O)),2&o){const e=t.MAs(2),r=t.oxw();t.Q6J("ngIf",r.errorMessage)("ngIfElse",e)}}let T=(()=>{class o{constructor(e){this.projectService=e,this.loading=!0}ngOnInit(){this.loadTasks()}loadTasks(){this.loading=!0,this.projectService.getAllProjects().subscribe({next:e=>{this.projects=e},error:e=>{console.error("Failed to Load Projects",e),this.errorMessage=e,this.loading=!1},complete:()=>{this.loading=!1}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-projects"]],decls:11,vars:2,consts:[[1,"py-4"],[1,"d-flex"],[1,"flex-grow-1"],["routerLink","/projects/add",1,"btn","btn-secondary","btn-sm"],[4,"ngIf","ngIfElse"],["loadedContent",""],[1,"py-3"],["noError",""],[3,"errorMessage"],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],[1,"cursor-pointer",3,"routerLink"]],template:function(e,r){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t._uU(4,"Projects"),t.qZA()(),t.TgZ(5,"div")(6,"button",3),t._uU(7," Add Project"),t.qZA()()(),t.YNc(8,b,3,0,"ng-container",4),t.YNc(9,P,3,2,"ng-template",null,5,t.W1O),t.qZA()),2&e){const c=t.MAs(10);t.xp6(8),t.Q6J("ngIf",r.loading)("ngIfElse",c)}},dependencies:[a.sg,a.O5,_.S,h.A,p.rH]}),o})();var i=s(4006);function C(o,n){1&o&&(t.TgZ(0,"div",21),t._uU(1," Title is required. "),t.qZA())}function U(o,n){1&o&&(t.TgZ(0,"div",21),t._uU(1," Description is required. "),t.qZA())}function q(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",22)(1,"div",23)(2,"div",1)(3,"div",2)(4,"h4",24),t._uU(5),t.qZA()(),t.TgZ(6,"div")(7,"button",25),t.NdJ("click",function(){const d=t.CHM(e).index,l=t.oxw();return t.KtG(l.deleteSection(d))}),t._uU(8,"Remove"),t.qZA()()(),t.TgZ(9,"div",26)(10,"div",4)(11,"label",27),t._uU(12,"Section Title"),t.qZA(),t._UZ(13,"input",28),t.qZA(),t.TgZ(14,"div",4)(15,"label",29),t._uU(16,"Section Description"),t.qZA(),t._UZ(17,"textarea",30),t.qZA()()()()}if(2&o){const e=n.index;t.xp6(5),t.hij("Section ",e+1,""),t.xp6(4),t.Q6J("formGroupName",e)}}function F(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",31),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.deleteProject())}),t._uU(2),t.qZA(),t.TgZ(3,"button",32),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.updateProject())}),t._uU(4),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.projectForm.invalid),t.xp6(1),t.hij(" ",e.submiting?"Loading...":"Delete Project"," "),t.xp6(1),t.Q6J("disabled",e.projectForm.invalid),t.xp6(1),t.hij(" ",e.submiting?"Loading...":"Edit Project"," ")}}function S(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.addProject())}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",e.projectForm.invalid),t.xp6(1),t.hij(" ",e.submiting?"Loading...":"Add Project"," ")}}let g=(()=>{class o{constructor(e,r,c,d){this.formBuilder=e,this.router=r,this.projectService=c,this.route=d,this.title="Add Project",this.submiting=!1,this.loading=!1}ngOnInit(){this.projectForm=this.formBuilder.group({title:["",i.kI.required],description:["",i.kI.required],startDate:[""],endDate:[""],projectSections:this.formBuilder.array([])}),this.projectId=this.route.snapshot.paramMap.get("id"),this.projectId&&(this.title="Edit Project",this.getProject(this.projectId))}addProject(){this.projectForm.valid&&(this.submiting=!0,this.projectService.createProject(this.projectForm.value).subscribe({next:r=>{this.projectForm.reset(),this.router.navigate(["/projects"])},error:r=>{console.error("Failed to Add project",r)},complete:()=>{this.submiting=!1}}))}get projectSections(){return this.projectForm.get("projectSections")}addSection(){const e=this.formBuilder.group({title:["",i.kI.required],description:["",i.kI.required]});this.projectSections.push(e)}deleteSection(e){this.projectSections.removeAt(e)}getProject(e){this.loading=!0,this.projectService.getProject(e).subscribe({next:r=>{const c=new Date(r.startDate).toISOString().substring(0,10),d=new Date(r.endDate).toISOString().substring(0,10);r.startDate=c,r.endDate=d,this.projectForm.patchValue(r),r.projectSections.forEach(l=>{const E=this.formBuilder.group({title:[l.title,i.kI.required],description:[l.description,i.kI.required]});this.projectSections.push(E)})},error:r=>{console.error("Failed to Get project",r),this.loading=!1},complete:()=>{this.loading=!1}})}updateProject(){const e=this.projectForm.value;this.submiting=!0,this.projectService.updateProject(this.projectId,e).subscribe({next:r=>{console.log(r),this.router.navigate(["/projects"])},error:r=>{console.error("Failed to Edit project",r),this.submiting=!1},complete:()=>{this.submiting=!1}})}deleteProject(){this.submiting=!0,this.projectService.deleteProject(this.projectId).subscribe({next:e=>{console.log(e),this.router.navigate(["/projects"])},error:e=>{console.error("Failed to Delete project",e)},complete:()=>{this.submiting=!1}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.qu),t.Y36(p.F0),t.Y36(m),t.Y36(p.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-edit-projects"]],decls:35,vars:7,consts:[[1,"my-4",3,"formGroup"],[1,"d-flex"],[1,"flex-grow-1"],["routerLink","/projects",1,"btn","btn-secondary","btn-sm"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","description",1,"form-label"],["id","description","formControlName","description",1,"form-control"],["for","startDate",1,"form-label"],["type","date","id","startDate","formControlName","startDate",1,"form-control"],["for","endDate",1,"form-label"],["type","date","id","endDate","formControlName","endDate",1,"form-control"],["formArrayName","projectSections"],["class","card my-3",4,"ngFor","ngForOf"],[1,"text-end"],["type","button",1,"btn","btn-success","btn-sm","mt-3",3,"click"],[1,"mt-3"],[4,"ngIf","ngIfElse"],["addTasking",""],[1,"invalid-feedback"],[1,"card","my-3"],[1,"card-body"],[1,"card-title"],[1,"btn","btn-danger","btn-sm",3,"click"],[3,"formGroupName"],["for","titl",1,"form-label"],["type","text","id","titl","formControlName","title",1,"form-control"],["for","descr",1,"form-label"],["id","descr","formControlName","description",1,"form-control"],["type","submit",1,"btn","btn-danger","btn-sm","me-2",3,"disabled","click"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled","click"],["type","submit",1,"btn","btn-success","btn-sm",3,"disabled","click"]],template:function(e,r){if(1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4),t.qZA()(),t.TgZ(5,"div")(6,"button",3),t._uU(7," List Projects"),t.qZA()()(),t.TgZ(8,"div",4)(9,"label",5),t._uU(10,"Title"),t.qZA(),t._UZ(11,"input",6),t.YNc(12,C,2,0,"div",7),t.qZA(),t.TgZ(13,"div",4)(14,"label",8),t._uU(15,"Description"),t.qZA(),t._UZ(16,"textarea",9),t.YNc(17,U,2,0,"div",7),t.qZA(),t.TgZ(18,"div",4)(19,"label",10),t._uU(20,"Start Date"),t.qZA(),t._UZ(21,"input",11),t.qZA(),t.TgZ(22,"div",4)(23,"label",12),t._uU(24,"End Date"),t.qZA(),t._UZ(25,"input",13),t.qZA(),t.TgZ(26,"div",14),t.YNc(27,q,18,2,"div",15),t.TgZ(28,"div",16)(29,"button",17),t.NdJ("click",function(){return r.addSection()}),t._uU(30,"Add Section"),t.qZA()()(),t.TgZ(31,"div",18),t.YNc(32,F,5,4,"ng-container",19),t.YNc(33,S,2,2,"ng-template",null,20,t.W1O),t.qZA()()),2&e){const c=t.MAs(34);let d,l;t.Q6J("formGroup",r.projectForm),t.xp6(4),t.Oqu(r.title),t.xp6(8),t.Q6J("ngIf",(null==(d=r.projectForm.get("title"))?null:d.invalid)&&(null==(d=r.projectForm.get("title"))?null:d.touched)),t.xp6(5),t.Q6J("ngIf",(null==(l=r.projectForm.get("description"))?null:l.invalid)&&(null==(l=r.projectForm.get("description"))?null:l.touched)),t.xp6(10),t.Q6J("ngForOf",r.projectSections.controls),t.xp6(5),t.Q6J("ngIf",r.projectId)("ngIfElse",c)}},dependencies:[a.sg,a.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,p.rH]}),o})();var y=s(3582);const I=[{path:"",component:T},{path:"add",component:g},{path:"edit/:id",component:g},{path:"**",redirectTo:"",pathMatch:"full"}];let k=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[a.ez,i.u5,i.UX,y.C,p.Bz.forChild(I)]}),o})()}}]);