"use strict";(self.webpackChunksuluhi_admin_frontend=self.webpackChunksuluhi_admin_frontend||[]).push([[815],{3815:(D,m,i)=>{i.r(m),i.d(m,{TasksModule:()=>P});var d=i(6895),c=i(8869),r=i(4006),T=i(1213),u=i(4333),t=i(4650);let f=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-task-details"]],decls:2,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"task-details works!"),t.qZA())}}),s})();var h=i(2340),Z=i(529);let g=(()=>{class s{constructor(e){this.http=e,this.taskurl=`${h.N.apiUrl}tasks`}createTask(e){return this.http.post(this.taskurl,e)}getTask(e){return this.http.get(`${this.taskurl}/${e}`)}updateTask(e,n){return this.http.put(`${this.taskurl}/${e}`,n)}deleteTask(e){return this.http.delete(`${this.taskurl}/${e}`)}getAllTasks(e,n,o){const l={currentPage:e,pageSize:n,...o};return this.http.get(this.taskurl,{params:l})}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(Z.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var v=i(7997),x=i(5511),k=i(8057),A=i(295);function b(s,a){1&s&&(t.ynx(0),t.TgZ(1,"div",8),t._UZ(2,"app-sul-loader"),t.qZA(),t.BQk())}function C(s,a){if(1&s&&(t.ynx(0),t.TgZ(1,"div",8),t._UZ(2,"app-error-occured",10),t.qZA(),t.BQk()),2&s){const e=t.oxw(2);t.xp6(2),t.Q6J("errorMessage",e.errorMessage)}}const y=function(s){return["edit",s]};function q(s,a){if(1&s&&(t.ynx(0),t.TgZ(1,"tr",16)(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td",17),t._uU(9),t.qZA()(),t.BQk()),2&s){const e=a.$implicit,n=a.index;t.xp6(1),t.Q6J("routerLink",t.VKq(5,y,e._id)),t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Oqu(e.taskstatus)}}const F=function(s,a,e){return{itemsPerPage:s,currentPage:a,totalItems:e}};function U(s,a){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"table",12)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Title"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Description"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Status"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,q,10,7,"ng-container",13),t.ALo(14,"paginate"),t.qZA()(),t.TgZ(15,"div",14)(16,"pagination-controls",15),t.NdJ("pageChange",function(o){t.CHM(e);const l=t.oxw(3);return t.KtG(l.onPageChange(o))}),t.qZA()(),t.BQk()}if(2&s){const e=t.oxw(3);t.xp6(13),t.Q6J("ngForOf",t.xi3(14,1,e.tasks.results,t.kEZ(4,F,e.tasks.pageSize,e.currentPage,e.tasks.totalItems)))}}function E(s,a){1&s&&t._UZ(0,"app-no-data-found",18),2&s&&t.Q6J("dataLabel","Task")}function I(s,a){if(1&s&&(t.YNc(0,U,17,8,"ng-container",6),t.YNc(1,E,1,1,"ng-template",null,11,t.W1O)),2&s){const e=t.MAs(2),n=t.oxw(2);t.Q6J("ngIf",n.tasks&&n.tasks.results.length)("ngIfElse",e)}}function J(s,a){if(1&s&&(t.YNc(0,C,3,1,"ng-container",6),t.YNc(1,I,3,2,"ng-template",null,9,t.W1O)),2&s){const e=t.MAs(2),n=t.oxw();t.Q6J("ngIf",n.errorMessage)("ngIfElse",e)}}let M=(()=>{class s{constructor(e){this.taskService=e,this.loading=!0,this.currentPage=1,this.pageSize=10,this.options=[{name:"Task Title",formname:"title",type:"text"},{name:"Status",formname:"taskstatus",type:"select",selectoptions:[{val:"pending",name:"Pending"},{val:"progress",name:"Progress"},{val:"complete",name:"Complete"}]}]}ngOnInit(){this.loadTasks({})}loadTasks(e){this.loading=!0,this.taskService.getAllTasks(this.currentPage,this.pageSize,e).subscribe({next:n=>{this.tasks=n},error:n=>{this.errorMessage=n,this.loading=!1},complete:()=>{this.loading=!1}})}searchFunction(e){this.loadTasks(e)}onPageChange(e){this.currentPage=e,this.loadTasks({})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(g))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-list-tasks"]],decls:13,vars:4,consts:[[1,"py-4"],[1,"d-flex"],[1,"flex-grow-1"],[1,"text-secondary","fw-normal","mb-1"],[3,"searchlabel","searchOptions","searchEmit"],["routerLink","/tasks/add",1,"btn","btn-outline-primary","btn-sm"],[4,"ngIf","ngIfElse"],["loadedContent",""],[1,"py-3"],["noError",""],[3,"errorMessage"],["nodata",""],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end"],[1,"my-pagination",3,"pageChange"],[1,"cursor-pointer",3,"routerLink"],[1,"text-capitalize"],[3,"dataLabel"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4,"Tasks"),t.qZA()(),t.ynx(5),t.TgZ(6,"app-search-tab",4),t.NdJ("searchEmit",function(l){return n.searchFunction(l)}),t.qZA(),t.BQk(),t.TgZ(7,"div")(8,"button",5),t._uU(9," Add Task"),t.qZA()()(),t.YNc(10,b,3,0,"ng-container",6),t.YNc(11,J,3,2,"ng-template",null,7,t.W1O),t.qZA()),2&e){const o=t.MAs(12);t.xp6(6),t.Q6J("searchlabel","Search Tasks")("searchOptions",n.options),t.xp6(4),t.Q6J("ngIf",n.loading)("ngIfElse",o)}},dependencies:[d.sg,d.O5,v.S,x.i,k.A,A.O,u.LS,c.rH,u._s]}),s})();function L(s,a){if(1&s&&(t.ynx(0),t.TgZ(1,"div",19),t._UZ(2,"app-error-occured",20),t.qZA(),t.BQk()),2&s){const e=t.oxw();t.xp6(2),t.Q6J("errorMessage",e.errorMessage)}}function Q(s,a){1&s&&(t.TgZ(0,"div",21),t._uU(1," Title is required. "),t.qZA())}function N(s,a){1&s&&(t.TgZ(0,"div",21),t._uU(1," Description is required. "),t.qZA())}function S(s,a){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteTask())}),t._uU(2,"Delete Task"),t.qZA(),t.TgZ(3,"button",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.updateTask())}),t._uU(4,"Edit Task"),t.qZA(),t.BQk()}if(2&s){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.taskForm.invalid),t.xp6(2),t.Q6J("disabled",e.taskForm.invalid)}}function Y(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addTask())}),t._uU(1,"Add Task"),t.qZA()}if(2&s){const e=t.oxw();t.Q6J("disabled",e.taskForm.invalid)}}let _=(()=>{class s{constructor(e,n,o,l){this.formBuilder=e,this.router=n,this.taskService=o,this.route=l,this.title="Add Task"}ngOnInit(){this.taskForm=this.formBuilder.group({title:["",r.kI.required],description:["",r.kI.required],taskstatus:["pending"]}),this.taskId=this.route.snapshot.paramMap.get("id"),this.taskId&&(this.title="Edit Task",this.getTask(this.taskId))}addTask(){this.taskForm.valid&&this.taskService.createTask(this.taskForm.value).subscribe({next:n=>{console.log(n),this.taskForm.reset(),this.router.navigate(["/tasks"])},error:n=>{console.error("Failed to Add task",n)}})}getTask(e){this.taskService.getTask(e).subscribe({next:n=>{this.taskForm.patchValue(n)},error:n=>{console.error("Failed to Add task",n)}})}updateTask(){this.taskService.updateTask(this.taskId,this.taskForm.value).subscribe({next:n=>{console.log(n),this.router.navigate(["/tasks"])},error:n=>{this.errorMessage=n}})}deleteTask(){this.taskService.deleteTask(this.taskId).subscribe({next:e=>{this.router.navigate(["/tasks"])},error:e=>{this.errorMessage=e}})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(r.qu),t.Y36(c.F0),t.Y36(g),t.Y36(c.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-add-edit-tasks"]],decls:33,vars:7,consts:[[4,"ngIf"],[1,"my-4",3,"formGroup"],[1,"d-flex"],[1,"flex-grow-1"],[1,"fw-normal"],["routerLink","/tasks",1,"btn","btn-outline-primary","btn-sm"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title","placeholder","Enter Title",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","description",1,"form-label"],["id","description","formControlName","description","placeholder","Enter Description",1,"form-control"],["for","projectlink",1,"form-label"],["aria-label","Default select example","formControlName","taskstatus",1,"form-select"],["value","pending"],["value","progress"],["value","complete"],[4,"ngIf","ngIfElse"],["addTasking",""],[1,"py-3"],[3,"errorMessage"],[1,"invalid-feedback"],["type","submit",1,"btn","btn-danger","btn-sm","me-2",3,"disabled","click"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled","click"],["type","submit",1,"btn","btn-success","btn-sm",3,"disabled","click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,L,3,1,"ng-container",0),t.TgZ(2,"form",1)(3,"div",2)(4,"div",3)(5,"h2",4),t._uU(6),t.qZA()(),t.TgZ(7,"div")(8,"button",5),t._uU(9," List Tasks"),t.qZA()()(),t.TgZ(10,"div",6)(11,"label",7),t._uU(12,"Title"),t.qZA(),t._UZ(13,"input",8),t.YNc(14,Q,2,0,"div",9),t.qZA(),t.TgZ(15,"div",6)(16,"label",10),t._uU(17,"Description"),t.qZA(),t._UZ(18,"textarea",11),t.YNc(19,N,2,0,"div",9),t.qZA(),t.TgZ(20,"div",6)(21,"label",12),t._uU(22,"Project Status"),t.qZA(),t.TgZ(23,"select",13)(24,"option",14),t._uU(25,"Pending"),t.qZA(),t.TgZ(26,"option",15),t._uU(27,"Progress"),t.qZA(),t.TgZ(28,"option",16),t._uU(29,"Completed"),t.qZA()()(),t.YNc(30,S,5,2,"ng-container",17),t.YNc(31,Y,2,1,"ng-template",null,18,t.W1O),t.qZA()()),2&e){const o=t.MAs(32);let l,p;t.xp6(1),t.Q6J("ngIf",n.errorMessage),t.xp6(1),t.Q6J("formGroup",n.taskForm),t.xp6(4),t.Oqu(n.title),t.xp6(8),t.Q6J("ngIf",(null==(l=n.taskForm.get("title"))?null:l.invalid)&&(null==(l=n.taskForm.get("title"))?null:l.touched)),t.xp6(5),t.Q6J("ngIf",(null==(p=n.taskForm.get("description"))?null:p.invalid)&&(null==(p=n.taskForm.get("description"))?null:p.touched)),t.xp6(11),t.Q6J("ngIf",n.taskId)("ngIfElse",o)}},dependencies:[d.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u,k.A,c.rH]}),s})();const O=[{path:"",component:M},{path:"add",component:_},{path:"edit/:id",component:_},{path:"view/:id",component:f},{path:"**",redirectTo:"",pathMatch:"full"}];let P=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[d.ez,r.u5,r.UX,T.C,u.JX,c.Bz.forChild(O)]}),s})()}}]);