"use strict";(self.webpackChunkbiz_ke_frontend=self.webpackChunkbiz_ke_frontend||[]).push([[54],{6054:($,g,a)=>{a.r(g),a.d(g,{SuppliersModule:()=>K});var d=a(9808),u=a(1083),p=a(3075),C=a(5906),b=a(3034),e=a(5e3),f=a(7261),l=a(2340),T=a(520);let _=(()=>{class r{constructor(t){this._http=t}addSupplier(t){return this._http.post(l.N.apiUrl+"supplier/",t)}updateSupplier(t,n){return this._http.put(l.N.apiUrl+"supplier/"+n,t)}updateDisp(t){return this._http.patch(l.N.apiUrl+"supplier/",t)}updatehiddenDisp(t){return this._http.patch(l.N.apiUrl+"supplier/unhide",t)}delSupplier(t){return this._http.delete(l.N.apiUrl+"supplier/"+t)}getSupplier(t){return this._http.get(l.N.apiUrl+"supplier/"+t)}getCounties(t){return this._http.get(l.N.apiUrl+"county/",{params:t})}getSuppliers(t){return this._http.get(l.N.apiUrl+"supplier/",{params:t})}getHiddenSupl(t){return this._http.get(l.N.apiUrl+"supplier/hidden",{params:t})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(T.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var m=a(7322),v=a(7531),h=a(4376),S=a(7423);function N(r,i){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorFirstNameControl()," ")}}function U(r,i){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorSecondNameControl()," ")}}function E(r,i){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorPhoneControl()," ")}}function F(r,i){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorEmailControl()," ")}}function I(r,i){if(1&r&&(e.ynx(0),e.TgZ(1,"ng-option",24),e._uU(2),e.qZA(),e.BQk()),2&r){const t=i.$implicit;e.xp6(1),e.Q6J("value",1*t.code),e.xp6(1),e.hij(" ",t.name.toUpperCase()," ")}}function q(r,i){if(1&r&&(e.ynx(0),e.TgZ(1,"ng-option",22),e._uU(2,"Please Select County"),e.qZA(),e.YNc(3,I,3,2,"ng-container",23),e.BQk()),2&r){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.counties)}}function y(r,i){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().delSuppl()}),e._uU(2,"Delete"),e.qZA(),e.TgZ(3,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().editSuppl()}),e._uU(4,"Save Changes "),e.qZA(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.errMessage||t.loading),e.xp6(2),e.Q6J("disabled",t.supplierForm.invalid||t.supplierForm.pristine)}}function J(r,i){1&r&&(e.ynx(0),e._UZ(1,"i",29),e.TgZ(2,"span",30),e._uU(3,"Loading..."),e.qZA(),e.BQk())}function M(r,i){1&r&&e._uU(0," Add Supplier ")}function Q(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().addSuppl()}),e.YNc(1,J,4,0,"ng-container",20),e.YNc(2,M,1,0,"ng-template",null,28,e.W1O),e.qZA()}if(2&r){const t=e.MAs(3),n=e.oxw();e.Q6J("disabled",n.supplierForm.invalid||n.errMessage||n.loading),e.xp6(1),e.Q6J("ngIf",n.loading)("ngIfElse",t)}}let Z=(()=>{class r{constructor(t,n,o,s,c){this.supplFb=t,this.router=n,this.snakBar=o,this.supServ=s,this.route=c,this.matcher=new C.n,this.loading=!1,this.supplierForm=this.supplFb.group({nameone:["",[p.kI.required,p.kI.minLength(2)]],nametwo:["",[p.kI.required,p.kI.minLength(2)]],phone:["",[p.kI.required,(0,b.t)()]],email:["",p.kI.email],details:[""],companyname:[""],addresss:[""],location:[""],department:[""]})}ngOnInit(){this.loadCounties(),this.supplId=this.route.snapshot.paramMap.get("id"),this.supplId&&this.loadSuppl(),this.supplierForm.valueChanges.subscribe(()=>{this.errMessage=!1})}loadSuppl(){this.loading=!0,this.supServ.getSupplier(this.supplId).subscribe({next:t=>this.respHandlSuppl(t),error:t=>this.errorHandle(t)})}loadCounties(){this.supServ.getCounties({page:1,pageSize:1e4}).subscribe({next:t=>this.counties=t.results,error:t=>this.errorHandle(t)})}addSuppl(){this.loading=!0,this.supServ.addSupplier(this.supplierForm.value).subscribe({next:t=>this.handleResp(t),error:t=>this.errorHandle(t)})}editSuppl(){this.loading=!0,this.supServ.updateSupplier(this.supplierForm.value,this.supplId).subscribe({next:n=>this.handleResp(n),error:n=>this.errorHandle(n)})}delSuppl(){this.loading=!0,this.supServ.delSupplier(this.supplId).subscribe({next:this.handleResp.bind(this),error:this.errorHandle.bind(this)})}errorFirstNameControl(){var t,n;return(null===(t=this.supplierForm.get("nameone"))||void 0===t?void 0:t.hasError("required"))?"You must provide a value":(null===(n=this.supplierForm.get("nametwo"))||void 0===n?void 0:n.hasError("minlength"))?"You must provide atleast 2 characters":""}errorSecondNameControl(){var t,n;return(null===(t=this.supplierForm.get("nametwo"))||void 0===t?void 0:t.hasError("required"))?"You must provide a value":(null===(n=this.supplierForm.get("nametwo"))||void 0===n?void 0:n.hasError("minlength"))?"You must provide atleast 2 characters":""}errorPhoneControl(){var t,n;return(null===(t=this.supplierForm.get("phone"))||void 0===t?void 0:t.hasError("required"))?"You must provide a value":(null===(n=this.supplierForm.get("phone"))||void 0===n?void 0:n.hasError("notPhone"))?"You must a valid Phone Number":""}errorEmailControl(){var t,n;return(null===(t=this.supplierForm.get("email"))||void 0===t?void 0:t.hasError("required"))?"You must provide a value":(null===(n=this.supplierForm.get("email"))||void 0===n?void 0:n.hasError("email"))?"You must a valid email":""}openSnakBar(t,n){this.snakBar.open(t,n,{duration:2500})}respHandlSuppl(t){this.loading=!1,this.supplierForm.patchValue({nameone:t.nameone,nametwo:t.nametwo,phone:t.phone,email:t.email,companyname:t.companyname,location:t.location,addresss:t.addresss,department:t.department,details:t.details})}handleResp(t){this.loading=!1,this.openSnakBar(t.message,"Dismiss"),this.router.navigate(["/suppliers"])}errorHandle(t){this.loading=!1,this.errMessage=t}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(p.qu),e.Y36(u.F0),e.Y36(f.ux),e.Y36(_),e.Y36(u.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-edit-supplier"]],decls:61,vars:15,consts:[[1,"d-lg-flex","text-secondary","py-2"],[1,"flex-grow-1"],["type","button","routerLink","/suppliers",1,"btn","btn-outline-success","btn-sm"],["aria-hidden","true",1,"fa","fa-chevron-left"],[3,"formGroup"],[1,"row"],[1,"col-lg-6"],["appearance","outline",1,"w-100"],["matInput","","placeholder","Enter First Name","formControlName","nameone",3,"errorStateMatcher"],[4,"ngIf"],["matInput","","placeholder","Enter Last Name","formControlName","nametwo",3,"errorStateMatcher"],["matInput","","placeholder","Enter Phone Number","formControlName","phone",3,"errorStateMatcher"],["matInput","","placeholder","Enter Email","formControlName","email",3,"errorStateMatcher"],["matInput","","placeholder","Company Name","formControlName","companyname",3,"errorStateMatcher"],["matInput","","placeholder","Department Name","formControlName","department",3,"errorStateMatcher"],[1,"col-lg-6","pt-1"],["formControlName","location"],["matInput","","placeholder","Enter Branch Adderess","formControlName","addresss",3,"errorStateMatcher"],[1,"col-lg-12"],["matInput","","formControlName","details"],[4,"ngIf","ngIfElse"],["noStore",""],["value","","disabled",""],[4,"ngFor","ngForOf"],[3,"value"],["type","button","mat-flat-button","","color","warn",1,"me-2",3,"disabled","click"],["type","button","mat-flat-button","","color","primary",3,"disabled","click"],["mat-flat-button","","color","primary","type","button",1,"me-3",3,"disabled","click"],["notload",""],[1,"fa","fa-spinner","fa-spin","fa-1x","me-2"],[1,""]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e._UZ(3,"i",3),e._uU(4," Back "),e.qZA()()(),e.TgZ(5,"form",4)(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label"),e._uU(10,"First Name"),e.qZA(),e._UZ(11,"input",8),e.YNc(12,N,2,1,"mat-error",9),e.qZA()(),e.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label"),e._uU(16,"Last Name"),e.qZA(),e._UZ(17,"input",10),e.YNc(18,U,2,1,"mat-error",9),e.qZA()()(),e.TgZ(19,"div",5)(20,"div",6)(21,"mat-form-field",7)(22,"mat-label"),e._uU(23,"Phone Number"),e.qZA(),e._UZ(24,"input",11),e.YNc(25,E,2,1,"mat-error",9),e.qZA()(),e.TgZ(26,"div",6)(27,"mat-form-field",7)(28,"mat-label"),e._uU(29,"Email"),e.qZA(),e._UZ(30,"input",12),e.YNc(31,F,2,1,"mat-error",9),e.qZA()()(),e.TgZ(32,"div",5)(33,"div",6)(34,"mat-form-field",7)(35,"mat-label"),e._uU(36,"Company Name"),e.qZA(),e._UZ(37,"input",13),e.qZA()(),e.TgZ(38,"div",6)(39,"mat-form-field",7)(40,"mat-label"),e._uU(41,"Client's Department"),e.qZA(),e._UZ(42,"input",14),e.qZA()()(),e.TgZ(43,"div",5)(44,"div",15)(45,"ng-select",16),e.YNc(46,q,4,1,"ng-container",9),e.qZA()(),e.TgZ(47,"div",6)(48,"mat-form-field",7)(49,"mat-label"),e._uU(50,"Client Company Address"),e.qZA(),e._UZ(51,"input",17),e.qZA()()(),e.TgZ(52,"div",5)(53,"div",18)(54,"mat-form-field",7)(55,"mat-label"),e._uU(56,"Describe The Supplier"),e.qZA(),e._UZ(57,"textarea",19),e.qZA()()(),e.YNc(58,y,5,2,"ng-container",20),e.YNc(59,Q,4,3,"ng-template",null,21,e.W1O),e.qZA()),2&t){const o=e.MAs(60);let s,c,x,A;e.xp6(5),e.Q6J("formGroup",n.supplierForm),e.xp6(6),e.Q6J("errorStateMatcher",n.matcher),e.xp6(1),e.Q6J("ngIf",null==(s=n.supplierForm.get("nameone"))?null:s.invalid),e.xp6(5),e.Q6J("errorStateMatcher",n.matcher),e.xp6(1),e.Q6J("ngIf",null==(c=n.supplierForm.get("nametwo"))?null:c.invalid),e.xp6(6),e.Q6J("errorStateMatcher",n.matcher),e.xp6(1),e.Q6J("ngIf",null==(x=n.supplierForm.get("phone"))?null:x.invalid),e.xp6(5),e.Q6J("errorStateMatcher",n.matcher),e.xp6(1),e.Q6J("ngIf",null==(A=n.supplierForm.get("email"))?null:A.invalid),e.xp6(6),e.Q6J("errorStateMatcher",n.matcher),e.xp6(5),e.Q6J("errorStateMatcher",n.matcher),e.xp6(4),e.Q6J("ngIf",n.counties),e.xp6(5),e.Q6J("errorStateMatcher",n.matcher),e.xp6(7),e.Q6J("ngIf",n.supplId)("ngIfElse",o)}},directives:[u.rH,p._Y,p.JL,p.sg,m.KE,m.hX,v.Nt,p.Fj,p.JJ,p.u,d.O5,m.TO,h.w9,h.jq,d.sg,S.lW],styles:[".mat-form-field-flex>.mat-form-field-infix{padding:.5em 0!important}  .mat-form-field-label-wrapper{top:-1.4em}  .mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{transform:translateY(-1.1em) scale(.75);width:133.33333%}"]}),r})();var Y=a(1990),L=a(4701);function w(r,i){if(1&r&&(e.TgZ(0,"div",5),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorMessage," ")}}const k=function(r){return["edit/",r]};function P(r,i){if(1&r&&(e.TgZ(0,"tr",13)(1,"td",14),e._uU(2),e.qZA(),e.TgZ(3,"td",14),e._uU(4),e.qZA(),e.TgZ(5,"td",14),e._uU(6),e.qZA(),e.TgZ(7,"td",14),e._uU(8),e.qZA(),e.TgZ(9,"td",14),e._uU(10),e.qZA(),e.TgZ(11,"td",14),e._uU(12),e.qZA(),e.TgZ(13,"td",14),e._uU(14),e.qZA(),e.TgZ(15,"td",14),e._uU(16),e.qZA()()),2&r){const t=i.$implicit,n=i.index;e.Q6J("routerLink",e.VKq(9,k,t.id)),e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.fullname),e.xp6(2),e.Oqu(t.phone),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.companyname),e.xp6(2),e.Oqu(t.countyname),e.xp6(2),e.Oqu(t.addresss),e.xp6(2),e.Oqu(t.details)}}function O(r,i){if(1&r&&(e.ynx(0),e.YNc(1,P,17,11,"tr",12),e.BQk()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.suppliers)}}function H(r,i){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",6)(2,"table",7)(3,"tbody")(4,"tr",8)(5,"th",9),e._uU(6,"#"),e.qZA(),e.TgZ(7,"th",9),e._uU(8,"Name"),e.qZA(),e.TgZ(9,"th",9),e._uU(10,"Phone"),e.qZA(),e.TgZ(11,"th",9),e._uU(12,"Email"),e.qZA(),e.TgZ(13,"th",9),e._uU(14,"Company "),e.qZA(),e.TgZ(15,"th",9),e._uU(16,"County "),e.qZA(),e.TgZ(17,"th",9),e._uU(18,"Address"),e.qZA(),e.TgZ(19,"th",9),e._uU(20,"Description"),e.qZA()(),e.YNc(21,O,2,1,"ng-container",10),e.qZA()()(),e.TgZ(22,"app-paginator",11),e.NdJ("newItemEvent",function(o){return e.CHM(t),e.oxw().paginatedCall(o)}),e.qZA(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(21),e.Q6J("ngIf",t.suppliers),e.xp6(1),e.Q6J("datafromdb",t.paginator)}}function B(r,i){if(1&r&&(e.TgZ(0,"div",16),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Oqu(t.loadmessage)}}function z(r,i){if(1&r&&e.YNc(0,B,2,1,"div",15),2&r){const t=e.oxw();e.Q6J("ngIf",t.loading)}}let D=(()=>{class r{constructor(t,n){this.cserv=t,this.router=n,this.loading=!0,this.loadmessage="loading ...",this.ifSearched=!1,this.paginator={page:1,pageSize:10},this.options=[{searchName:"Supplier Name",searchParam:"fullname"},{searchName:"Phone",searchParam:"phone"},{searchName:"Email",searchParam:"email"}],this.labels={listname:"Supplier List",addBtname:"Add Supplier",searchPlaceholder:"Search Supplier"}}ngOnInit(){this.loadSuppliers()}loadSuppliers(){this.cserv.getSuppliers(this.paginator).subscribe({next:t=>this.handleResp(t),error:t=>this.errorHandle(t)})}handleResp(t){this.loading=!1,this.suppliers=t.results,this.ifSearched||(this.supplierStore=t),this.setPaginator(t)}errorHandle(t){this.loading=!1,this.errorMessage=t}paginatedCall(t){this.ifSearched=!1,this.setPaginator(this.supplierStore),this.paginator.page=t.page,this.loadSuppliers()}searchFunction(t){this.setPaginator(this.supplierStore),this.errorMessage=null,this.ifSearched=!0,this.suppliers=this.supplierStore.results,this.paginator[t.searchParam]=t.searchValue,this.suppliers=this.suppliers.filter(n=>{var o;let s=(null===(o=n[t.searchParam])||void 0===o?void 0:o.toString())||"";return new RegExp(t.searchValue,"i").test(s)}),0==this.suppliers.length&&(this.paginator.page=1,this.loading=!0,this.loadmessage="Performing a Wider Search",this.loadSuppliers())}closeSearchFunction(){this.suppliers=this.supplierStore.results,this.errorMessage=null,this.setPaginator(this.supplierStore)}setPaginator(t){this.paginator={page:1,pageSize:10},this.paginator.page=t.currentPage,this.paginator.totalItems=t.totalItems,this.paginator.pageSize=t.pageSize}navigateAdd(){this.router.navigate(["/suppliers/add"])}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(_),e.Y36(u.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-list-suppliers"]],decls:6,vars:6,consts:[[1,"container-fluid","py-3"],[3,"labels","searchoptions","backenddata","searchEmit","closeEmit","navigateEmit"],["class","alert alert-danger my-3",4,"ngIf"],[4,"ngIf","ngIfElse"],["nodata",""],[1,"alert","alert-danger","my-3"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-bordered","text-nowrap"],[1,"blhead","rounded"],[1,"text-light"],[4,"ngIf"],[3,"datafromdb","newItemEvent"],["class","cursor",3,"routerLink",4,"ngFor","ngForOf"],[1,"cursor",3,"routerLink"],[1,"tpad"],["class","alert alert-warning text-danger my-3",4,"ngIf"],[1,"alert","alert-warning","text-danger","my-3"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"app-search-tab",1),e.NdJ("searchEmit",function(s){return n.searchFunction(s)})("closeEmit",function(){return n.closeSearchFunction()})("navigateEmit",function(){return n.navigateAdd()}),e.qZA(),e.YNc(2,w,2,1,"div",2),e.YNc(3,H,23,2,"ng-container",3),e.YNc(4,z,1,1,"ng-template",null,4,e.W1O),e.qZA()),2&t){const o=e.MAs(5);e.xp6(1),e.Q6J("labels",n.labels)("searchoptions",n.options)("backenddata",n.suppliers),e.xp6(1),e.Q6J("ngIf",n.errorMessage),e.xp6(1),e.Q6J("ngIf",n.suppliers&&!n.loading&&!n.errorMessage)("ngIfElse",o)}},directives:[Y.O,d.O5,d.sg,u.rH,L.J],styles:[""]}),r})();var j=a(6856),R=a(5245),W=a(4107),X=a(7446),V=a(9744);const G=[{path:"",component:D},{path:"add",component:Z},{path:"edit/:id",component:Z},{path:"**",redirectTo:"",pathMatch:"full"}];let K=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[d.ez,p.UX,h.A0,f.ZX,m.lN,W.LD,v.c,R.Ps,S.ot,j.FA,X.p9,V.F,u.Bz.forChild(G)]]}),r})()}}]);