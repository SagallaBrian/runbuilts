"use strict";(self.webpackChunksuluhi_admin_frontend=self.webpackChunksuluhi_admin_frontend||[]).push([[131],{2131:(c,p,i)=>{i.r(p),i.d(p,{AuthModule:()=>b});var s=i(6895),m=i(8869),r=i(4006),e=i(4650),l=i(7556),u=i(8057);function g(t,a){if(1&t&&(e.ynx(0),e._UZ(1,"app-error-occured",10),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("errorMessage",n.errormessage)}}let f=(()=>{class t{constructor(n,o,d){this.formBuilder=n,this.router=o,this.authService=d,this.loading=!1}ngOnInit(){this.loginForm=this.formBuilder.group({email:["",[r.kI.required,r.kI.email]],password:["",r.kI.required]})}login(){if(this.loginForm.valid){const n=this.loginForm.value;this.loading=!0,this.authService.login(n).subscribe({next:o=>{this.loginForm.reset(),this.authService.setAuthToken(o.token),this.authService.setUserInfo(o.user),this.router.navigate(["/dashboard"])},error:o=>{this.errormessage=o,this.loading=!1},complete:()=>{this.loading=!1}})}}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(r.qu),e.Y36(m.F0),e.Y36(l.e))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:15,vars:4,consts:[[1,"card-body"],[1,"fw-normal","text-primary"],[4,"ngIf"],[3,"formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control","form-control-smsmsm"],["for","password",1,"form-label","mb-1"],["type","password","id","password","formControlName","password","placeholder","Enter your password",1,"form-control","form-control-ssssm"],["type","button",1,"btn","btn-primary","btn-sm",3,"disabled","click"],[3,"errorMessage"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Login"),e.qZA(),e.YNc(3,g,2,1,"ng-container",2),e.TgZ(4,"form",3)(5,"div",4)(6,"label",5),e._uU(7,"Email"),e.qZA(),e._UZ(8,"input",6),e.qZA(),e.TgZ(9,"div",4)(10,"label",7),e._uU(11,"Password"),e.qZA(),e._UZ(12,"input",8),e.qZA(),e.TgZ(13,"button",9),e.NdJ("click",function(){return o.login()}),e._uU(14),e.qZA()()()),2&n&&(e.xp6(3),e.Q6J("ngIf",o.errormessage),e.xp6(1),e.Q6J("formGroup",o.loginForm),e.xp6(9),e.Q6J("disabled",o.loginForm.invalid||o.loading),e.xp6(1),e.Oqu(o.loading?"Loading...":"Login"))},dependencies:[s.O5,r._Y,r.Fj,r.JJ,r.JL,u.A,r.sg,r.u],styles:["input[_ngcontent-%COMP%]{font-size:small}a[_ngcontent-%COMP%]{text-decoration:none}"]}),t})();function h(t,a){if(1&t&&(e.ynx(0),e._UZ(1,"app-error-occured",18),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("errorMessage",n.errormessage)}}let Z=(()=>{class t{constructor(n,o,d){this.formBuilder=n,this.router=o,this.authService=d,this.loading=!1}ngOnInit(){this.registerForm=this.formBuilder.group({firstName:["",[r.kI.required,r.kI.minLength(2),r.kI.maxLength(20)]],lastName:["",[r.kI.required,r.kI.minLength(2),r.kI.maxLength(20)]],phone:[""],email:["",[r.kI.required,r.kI.email]],password:["",[r.kI.required,r.kI.minLength(8)]]})}register(){if(this.registerForm.valid){const n=this.registerForm.value;this.loading=!0,this.authService.register(n).subscribe({next:o=>{this.registerForm.reset(),this.router.navigate(["/auth/login"])},error:o=>{console.error("Failed to Add User",o),this.errormessage=o,this.loading=!1},complete:()=>{this.loading=!1}})}}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(r.qu),e.Y36(m.F0),e.Y36(l.e))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:31,vars:4,consts:[[1,"card-body"],[1,"fw-normal","text-primary"],[4,"ngIf"],[3,"formGroup"],[1,"mb-3"],["for","firstName",1,"form-label"],["type","text","id","firstName","formControlName","firstName","placeholder","Enter your first name",1,"form-control"],["for","lastName",1,"form-label"],["type","text","id","lastName","formControlName","lastName","placeholder","Enter your last name",1,"form-control"],["for","phone",1,"form-label"],["type","text","id","phone","formControlName","phone","placeholder","Enter your phone number",1,"form-control"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","Enter your password",1,"form-control"],["type","button",1,"btn","btn-primary","btn-sm",3,"disabled","click"],[1,"my-3","text-center"],["routerLink","/auth/login"],[3,"errorMessage"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Register"),e.qZA(),e.YNc(3,h,2,1,"ng-container",2),e.TgZ(4,"form",3)(5,"div",4)(6,"label",5),e._uU(7,"First Name"),e.qZA(),e._UZ(8,"input",6),e.qZA(),e.TgZ(9,"div",4)(10,"label",7),e._uU(11,"Last Name"),e.qZA(),e._UZ(12,"input",8),e.qZA(),e.TgZ(13,"div",4)(14,"label",9),e._uU(15,"Phone"),e.qZA(),e._UZ(16,"input",10),e.qZA(),e.TgZ(17,"div",4)(18,"label",11),e._uU(19,"Email"),e.qZA(),e._UZ(20,"input",12),e.qZA(),e.TgZ(21,"div",4)(22,"label",13),e._uU(23,"Password"),e.qZA(),e._UZ(24,"input",14),e.qZA(),e.TgZ(25,"button",15),e.NdJ("click",function(){return o.register()}),e._uU(26),e.qZA(),e.TgZ(27,"div",16),e._uU(28," Already have an Account? "),e.TgZ(29,"a",17),e._uU(30," Sign In"),e.qZA()()()()),2&n&&(e.xp6(3),e.Q6J("ngIf",o.errormessage),e.xp6(1),e.Q6J("formGroup",o.registerForm),e.xp6(21),e.Q6J("disabled",o.registerForm.invalid||o.loading),e.xp6(1),e.Oqu(o.loading?"Loading...":"Register"))},dependencies:[s.O5,r._Y,r.Fj,r.JJ,r.JL,u.A,r.sg,r.u,m.rH],styles:["input[_ngcontent-%COMP%]{font-size:small}a[_ngcontent-%COMP%]{text-decoration:none}"]}),t})();var v=i(1213);const y=[{path:"login",component:f},{path:"register",component:Z},{path:"",redirectTo:"login",pathMatch:"full"},{path:"**",redirectTo:"login",pathMatch:"full"}];let b=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[s.ez,r.u5,v.C,r.UX,m.Bz.forChild(y)]}),t})()},8057:(c,p,i)=>{i.d(p,{A:()=>m});var s=i(4650);let m=(()=>{class r{ngOnInit(){this.errorMessage?.error?.message&&(this.errormes=this.errorMessage.error.message)}}return r.\u0275fac=function(l){return new(l||r)},r.\u0275cmp=s.Xpm({type:r,selectors:[["app-error-occured"]],inputs:{errorMessage:"errorMessage"},decls:4,vars:1,consts:[[1,"py-2"],["role","alert",1,"alert","alert-danger"],[1,"d-flex","align-items-center"]],template:function(l,u){1&l&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2),s._uU(3),s.qZA()()()),2&l&&(s.xp6(3),s.hij(" ",u.errormes?u.errormes:u.errorMessage.message," "))}}),r})()}}]);