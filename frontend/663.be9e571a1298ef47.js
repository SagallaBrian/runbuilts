"use strict";(self.webpackChunkbiz_ke_frontend=self.webpackChunkbiz_ke_frontend||[]).push([[663],{7759:(tt,Z,d)=>{d.r(Z),d.d(Z,{OtherIncomeModule:()=>$});var l=d(9808),m=d(1083),i=d(3075),x=d(5906),t=d(5e3),f=d(7261),p=d(2340),A=d(520);let _=(()=>{class o{constructor(e){this.http=e}addOtherIncome(e){return this.http.post(p.N.apiUrl+"otherinc/",e)}addOneOtherIncome(e){return this.http.post(p.N.apiUrl+"otherinc/one/",e)}updateOtherIncome(e,n){return this.http.put(p.N.apiUrl+"otherinc/"+n,e)}updateOneOtherIncome(e,n){return this.http.patch(p.N.apiUrl+"otherinc/"+n,e)}delOtherIncome(e){return this.http.delete(p.N.apiUrl+"otherinc/"+e)}delOneOtherIncome(e){return this.http.delete(p.N.apiUrl+"otherinc/one/"+e)}getOtherIncome(e){return this.http.get(p.N.apiUrl+"otherinc/"+e)}getOtherIncomes(e){return this.http.get(p.N.apiUrl+"otherinc/",{params:e})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(A.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var u=d(7322),v=d(7531),O=d(4107),b=d(508),h=d(6856),y=d(7423);function T(o,s){if(1&o&&(t.TgZ(0,"div",28),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorMessage," ")}}function C(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-option",29),t._uU(2),t.qZA(),t.BQk()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.name)}}function P(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",30)(1,"div",31)(2,"div",32)(3,"div",6)(4,"div",33)(5,"mat-form-field",8)(6,"mat-label"),t._uU(7,"Product / Service"),t.qZA(),t._UZ(8,"input",34),t.qZA()(),t.TgZ(9,"div",35)(10,"mat-form-field",8)(11,"mat-label"),t._uU(12," No Of Items"),t.qZA(),t.TgZ(13,"input",36),t.NdJ("keyup",function(r){const c=t.CHM(e).index;return t.oxw().noitmKeyUp(r.target,c)}),t.qZA()()(),t.TgZ(14,"div",35)(15,"mat-form-field",8)(16,"mat-label"),t._uU(17,"Unit Price"),t.qZA(),t.TgZ(18,"input",37),t.NdJ("keyup",function(r){const c=t.CHM(e).index;return t.oxw().unitKeyUp(r.target,c)}),t.qZA()()(),t.TgZ(19,"div",38)(20,"mat-form-field",8)(21,"mat-label"),t._uU(22,"Total Amount"),t.qZA(),t.TgZ(23,"input",39),t.NdJ("keyup",function(r){const c=t.CHM(e).index;return t.oxw().totlKeyup(r.target,c)}),t.qZA()()()()(),t.TgZ(24,"div",40)(25,"button",41),t.NdJ("click",function(){const a=t.CHM(e).index;return t.oxw().delProduct(a)}),t._UZ(26,"i",42),t.qZA()()()()}if(2&o){const e=s.index,n=t.oxw();t.Q6J("formGroupName",e),t.xp6(8),t.Q6J("errorStateMatcher",n.matcher),t.xp6(5),t.Q6J("errorStateMatcher",n.matcher),t.xp6(5),t.Q6J("errorStateMatcher",n.matcher),t.xp6(5),t.Q6J("errorStateMatcher",n.matcher),t.xp6(2),t.Q6J("disabled",0==e)}}function U(o,s){1&o&&(t.ynx(0),t._UZ(1,"i",43),t.TgZ(2,"span",40),t._uU(3,"Loading..."),t.qZA(),t.BQk())}function q(o,s){1&o&&t._uU(0," Add Payment ")}let N=(()=>{class o{constructor(e,n,r,a){this.payFb=e,this.router=n,this.snakBar=r,this.othExp=a,this.matcher=new x.n,this.loading=!1,this.today=new Date,this.modeOfPay=[{name:"CASH",value:1},{name:"MPESA",value:2},{name:"PAYPAL",value:3},{name:"CHEQUE",value:4}],this.OtherincoemForm=this.payFb.group({personname:[""],modeofpay:["",i.kI.required],paymentdate:[this.today,i.kI.required],transactioncode:[""],products:this.payFb.array([]),details:[""]})}ngOnInit(){this.addProduct(),this.OtherincoemForm.valueChanges.subscribe(()=>{this.errorMessage=!1})}get getProducts(){return this.OtherincoemForm.get("products")}addProduct(){const e=this.payFb.group({productsname:["",i.kI.required],noitems:[0,i.kI.required],unitprice:[0,i.kI.required],totalamount:[0,i.kI.required]});this.getProducts.push(e)}delProduct(e){this.getProducts.removeAt(e)}addPay(){this.loading=!0;let e=this.OtherincoemForm.value;e.paymentdate=(0,l.p6)(e.paymentdate,"yyyy-MM-dd","en-US"),this.othExp.addOtherIncome(e).subscribe({next:n=>this.handleResp(n),error:n=>this.errorHandle(n)})}openSnakBar(e,n){this.snakBar.open(e,n,{duration:2500})}handleResp(e){this.loading=!1,this.openSnakBar(e.message,"Dismiss"),this.router.navigate(["/income/other"])}errorHandle(e){this.loading=!1,this.errorMessage=e}unitKeyUp(e,n){var r,a;const c=parseInt(null===(r=this.getProducts.at(n).get("noitems"))||void 0===r?void 0:r.value);null===(a=this.getProducts.at(n).get("totalamount"))||void 0===a||a.setValue(e.value*c)}totlKeyup(e,n){var r,a;const c=parseInt(null===(r=this.getProducts.at(n).get("noitems"))||void 0===r?void 0:r.value)||1;null===(a=this.getProducts.at(n).get("unitprice"))||void 0===a||a.setValue(e.value/c)}noitmKeyUp(e,n){var r,a;const c=parseInt(null===(r=this.getProducts.at(n).get("unitprice"))||void 0===r?void 0:r.value);null===(a=this.getProducts.at(n).get("totalamount"))||void 0===a||a.setValue(e.value*c)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.qu),t.Y36(m.F0),t.Y36(f.ux),t.Y36(_))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-other-income"]],decls:51,vars:11,consts:[[1,"d-lg-flex","text-secondary","py-2"],[1,"flex-grow-1"],["type","button","routerLink","/income/other",1,"btn","btn-outline-success","btn-sm"],["aria-hidden","true",1,"fa","fa-chevron-left"],[3,"formGroup"],["class","alert alert-danger my-3",4,"ngIf"],[1,"row"],[1,"col-lg-6"],["appearance","outline",1,"w-100"],["matInput","","placeholder","Enter Name","formControlName","personname",3,"errorStateMatcher"],["formControlName","modeofpay",1,"w-10"],[4,"ngFor","ngForOf"],["matInput","","placeholder","Enter Transaction code","formControlName","transactioncode",3,"errorStateMatcher"],["matInput","","formControlName","paymentdate",3,"matDatepicker"],["matSuffix","",3,"for"],["paydateid",""],[1,"col-lg-12"],["matInput","","formControlName","details"],["formArrayName","products"],[1,"pt-2","pb-1"],[1,"bg-secondary-light","py-2"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"text-end"],["type","button",1,"btn","btn-primary","my-2",3,"click"],[1,"fa","fa-plus"],["mat-flat-button","","color","primary","type","button",1,"me-3",3,"disabled","click"],[4,"ngIf","ngIfElse"],["notload",""],[1,"alert","alert-danger","my-3"],[3,"value"],[3,"formGroupName"],[1,"d-flex"],[1,"flex-grow-1","me-2"],[1,"col-lg-5"],["matInput","","placeholder","Enter Product / Service Name","formControlName","productsname",3,"errorStateMatcher"],[1,"col-lg-2"],["matInput","","placeholder","Enter No Of Items e.g. 50","formControlName","noitems",3,"errorStateMatcher","keyup"],["matInput","","placeholder","Enter Unit","formControlName","unitprice",3,"errorStateMatcher","keyup"],[1,"col-lg-3"],["matInput","","placeholder","Enter Total Amount","formControlName","totalamount",3,"errorStateMatcher","keyup"],[1,""],[1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-trash"],[1,"fa","fa-spinner","fa-spin","fa-1x","me-2"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t._UZ(3,"i",3),t._uU(4," Back "),t.qZA()()(),t.TgZ(5,"form",4),t.YNc(6,T,2,1,"div",5),t.TgZ(7,"div",6)(8,"div",7)(9,"mat-form-field",8)(10,"mat-label"),t._uU(11,"Name"),t.qZA(),t._UZ(12,"input",9),t.qZA()(),t.TgZ(13,"div",7)(14,"mat-form-field",8)(15,"mat-label"),t._uU(16,"Mode Of Payment"),t.qZA(),t.TgZ(17,"mat-select",10),t.YNc(18,C,3,2,"ng-container",11),t.qZA()()()(),t.TgZ(19,"div",6)(20,"div",7)(21,"mat-form-field",8)(22,"mat-label"),t._uU(23,"Transaction Code"),t.qZA(),t._UZ(24,"input",12),t.qZA()(),t.TgZ(25,"div",7)(26,"mat-form-field",8)(27,"mat-label"),t._uU(28,"Payment Date"),t.qZA(),t._UZ(29,"input",13)(30,"mat-datepicker-toggle",14)(31,"mat-datepicker",null,15),t.qZA()()(),t.TgZ(33,"div",6)(34,"div",16)(35,"mat-form-field",8)(36,"mat-label"),t._uU(37,"Payment Description"),t.qZA(),t._UZ(38,"textarea",17),t.qZA()()(),t.TgZ(39,"div",18)(40,"div",19),t._uU(41," Add Products"),t.qZA(),t.TgZ(42,"div",20),t.YNc(43,P,27,6,"div",21),t.qZA(),t.TgZ(44,"div",22)(45,"button",23),t.NdJ("click",function(){return n.addProduct()}),t._UZ(46,"i",24),t.qZA()()(),t.TgZ(47,"button",25),t.NdJ("click",function(){return n.addPay()}),t.YNc(48,U,4,0,"ng-container",26),t.YNc(49,q,1,0,"ng-template",null,27,t.W1O),t.qZA()()),2&e){const r=t.MAs(32),a=t.MAs(50);t.xp6(5),t.Q6J("formGroup",n.OtherincoemForm),t.xp6(1),t.Q6J("ngIf",n.errorMessage),t.xp6(6),t.Q6J("errorStateMatcher",n.matcher),t.xp6(6),t.Q6J("ngForOf",n.modeOfPay),t.xp6(6),t.Q6J("errorStateMatcher",n.matcher),t.xp6(5),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(13),t.Q6J("ngForOf",n.getProducts.controls),t.xp6(4),t.Q6J("disabled",n.OtherincoemForm.invalid||n.errorMessage||n.loading),t.xp6(1),t.Q6J("ngIf",n.loading)("ngIfElse",a)}},directives:[m.rH,i._Y,i.JL,i.sg,l.O5,u.KE,u.hX,v.Nt,i.Fj,i.JJ,i.u,O.gD,l.sg,b.ey,h.hl,h.nW,u.R9,h.Mq,i.CE,i.x0,y.lW],styles:[""]}),o})();var I=d(4376);function S(o,s){if(1&o&&(t.TgZ(0,"div",29),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorMessage," ")}}function k(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"ng-option",30),t._uU(2),t.qZA(),t.BQk()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("value",1*e.value),t.xp6(1),t.hij(" ",e.name,"")}}function M(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",45)(1,"button",46),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index;return t.oxw().editSinglPay(r)}),t._UZ(2,"i",47),t.qZA()()}if(2&o){const e=t.oxw().index,n=t.oxw();t.xp6(1),t.Q6J("disabled",n.getProducts.at(e).pristine||n.getProducts.at(e).invalid)}}function J(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",45)(1,"button",48),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index;return t.oxw().saveProduct(r)}),t._UZ(2,"i",26),t.qZA()()}if(2&o){const e=t.oxw().index,n=t.oxw();t.xp6(1),t.Q6J("disabled",n.getProducts.at(e).invalid)}}function E(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",31)(1,"div",32)(2,"div",33)(3,"div",13)(4,"div",34)(5,"mat-form-field",8)(6,"mat-label"),t._uU(7,"Product / Service"),t.qZA(),t._UZ(8,"input",35),t.qZA()(),t.TgZ(9,"div",36)(10,"mat-form-field",8)(11,"mat-label"),t._uU(12," No Of Items"),t.qZA(),t.TgZ(13,"input",37),t.NdJ("keyup",function(r){const c=t.CHM(e).index;return t.oxw().noitmKeyUp(r.target,c)}),t.qZA()()(),t.TgZ(14,"div",36)(15,"mat-form-field",8)(16,"mat-label"),t._uU(17,"Unit Price"),t.qZA(),t.TgZ(18,"input",38),t.NdJ("keyup",function(r){const c=t.CHM(e).index;return t.oxw().unitKeyUp(r.target,c)}),t.qZA()()(),t.TgZ(19,"div",39)(20,"mat-form-field",8)(21,"mat-label"),t._uU(22,"Total Amount"),t.qZA(),t.TgZ(23,"input",40),t.NdJ("keyup",function(r){const c=t.CHM(e).index;return t.oxw().totlKeyup(r.target,c)}),t.qZA()()()()(),t.TgZ(24,"div",41)(25,"div",32)(26,"div",41)(27,"button",42),t.NdJ("click",function(){const a=t.CHM(e).index;return t.oxw().delOnePrd(a)}),t._UZ(28,"i",43),t.qZA()(),t.YNc(29,M,3,1,"div",44),t.YNc(30,J,3,1,"div",44),t.qZA()()()()}if(2&o){const e=s.index,n=t.oxw();let r,a;t.Q6J("formGroupName",e),t.xp6(8),t.Q6J("errorStateMatcher",n.matcher),t.xp6(5),t.Q6J("errorStateMatcher",n.matcher),t.xp6(5),t.Q6J("errorStateMatcher",n.matcher),t.xp6(5),t.Q6J("errorStateMatcher",n.matcher),t.xp6(6),t.Q6J("ngIf",null==(r=n.getProducts.at(e).get("transacid"))?null:r.value),t.xp6(1),t.Q6J("ngIf",!(null!=(a=n.getProducts.at(e).get("transacid"))&&a.value))}}let F=(()=>{class o{constructor(e,n,r,a,c){this.payFb=e,this.router=n,this.snakBar=r,this.payServ=a,this.route=c,this.matcher=new x.n,this.loading=!1,this.today=new Date,this.modeOfPay=[{name:"CASH",value:1},{name:"MPESA",value:2},{name:"PAYPAL",value:3},{name:"CHEQUE",value:4}],this.OtherIncomeForm=this.payFb.group({personname:[""],modeofpay:["",i.kI.required],paymentdate:["",i.kI.required],transactioncode:["",i.kI.required],products:this.payFb.array([]),details:[""]})}ngOnInit(){this.unqpayids=this.route.snapshot.paramMap.get("id"),this.unqpayids&&this.loadPay(),this.OtherIncomeForm.valueChanges.subscribe(()=>{this.errorMessage=!1})}loadPay(){this.loading=!0,this.payServ.getOtherIncome(this.unqpayids).subscribe({next:e=>this.respPayment(e),error:e=>this.errorHandle(e)})}get getProducts(){return this.OtherIncomeForm.get("products")}addProduct(e,n,r,a){const c=this.payFb.group({productsname:[e||"",i.kI.required],transacid:[n],noitems:[r||0,[i.kI.required,i.kI.min(1)]],unitprice:[a/r||0,i.kI.required],totalamount:[a||0,[i.kI.required,i.kI.min(1)]]});this.getProducts.push(c)}delOnePrd(e){var n;const r=parseInt(null===(n=this.getProducts.at(e).get("transacid"))||void 0===n?void 0:n.value);r?(this.loading=!0,this.payServ.delOneOtherIncome(r).subscribe({next:a=>this.respOneDel(a),error:a=>this.errorHandle(a)})):this.getProducts.removeAt(e)}saveProduct(e){let n=this.OtherIncomeForm.value,r={};r.clisupid=n.clisupid,r.modeofpay=n.modeofpay,r.transactioncode=n.transactioncode,r.paymentdate=(0,l.p6)(n.paymentdate,"yyyy-MM-dd","en-US"),r.details=n.details,r.transacid=this.unqpayids,r.personname=n.personname;const a=Object.assign(Object.assign({},this.getProducts.at(e).value),r);this.payServ.addOneOtherIncome(a).subscribe({next:c=>this.respOneDel(c),error:c=>this.errorHandle(c)})}editSinglPay(e){this.loading=!0;const n=this.getProducts.at(e).value,r=parseInt(n.transacid);this.payServ.updateOneOtherIncome(n,r).subscribe({next:a=>this.respOneDel(a),error:a=>this.errorHandle(a)})}editOverallPay(){this.loading=!0;let e=this.OtherIncomeForm.value;e.paymentdate=(0,l.p6)(e.paymentdate,"yyyy-MM-dd","en-US"),this.payServ.updateOtherIncome(e,this.unqpayids).subscribe({next:n=>this.handleResp(n),error:n=>this.errorHandle(n)})}delOverallPay(){this.loading=!0,this.payServ.delOtherIncome(this.unqpayids).subscribe({next:e=>this.handleResp(e),error:e=>this.errorHandle(e)})}openSnakBar(e,n){this.snakBar.open(e,n,{duration:2500})}handleResp(e){this.loading=!1,this.openSnakBar(e.message,"Dismiss"),this.router.navigate(["/income/other"])}respOneDel(e){this.loading=!1,this.loadPay()}errorHandle(e){this.loading=!1,this.errorMessage=e}respPayment(e){this.loading=!1,this.getProducts.clear(),0==e.length?this.router.navigate(["/income/other"]):(this.OtherIncomeForm.patchValue({personname:e[0].personname,modeofpay:e[0].modeofpay,transactioncode:e[0].transactioncode,paymentdate:e[0].paymentdate,details:e[0].details}),e.forEach(n=>{this.addProduct(n.productsname,n.id,n.noitems,n.totalamount)}))}unitKeyUp(e,n){var r,a;const c=parseInt(null===(r=this.getProducts.at(n).get("noitems"))||void 0===r?void 0:r.value);null===(a=this.getProducts.at(n).get("totalamount"))||void 0===a||a.setValue(e.value*c)}totlKeyup(e,n){var r,a;const c=parseInt(null===(r=this.getProducts.at(n).get("noitems"))||void 0===r?void 0:r.value)||1;null===(a=this.getProducts.at(n).get("unitprice"))||void 0===a||a.setValue(e.value/c)}noitmKeyUp(e,n){var r,a;const c=parseInt(null===(r=this.getProducts.at(n).get("unitprice"))||void 0===r?void 0:r.value);null===(a=this.getProducts.at(n).get("totalamount"))||void 0===a||a.setValue(e.value*c)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.qu),t.Y36(m.F0),t.Y36(f.ux),t.Y36(_),t.Y36(m.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-other-income"]],decls:50,vars:10,consts:[[1,"d-lg-flex","text-secondary","py-2"],[1,"flex-grow-1"],["type","button","routerLink","/income/other",1,"btn","btn-outline-success","btn-sm"],["aria-hidden","true",1,"fa","fa-chevron-left"],[3,"formGroup"],["class","alert alert-danger my-3",4,"ngIf"],[1,"row","pb-4"],[1,"col-lg-6"],["appearance","outline",1,"w-100"],["matInput","","placeholder","Enter Name","formControlName","personname",3,"errorStateMatcher"],["formControlName","modeofpay"],["value","","disabled",""],[4,"ngFor","ngForOf"],[1,"row"],["matInput","","placeholder","Enter Transaction code","formControlName","transactioncode",3,"errorStateMatcher"],["matInput","","formControlName","paymentdate",3,"matDatepicker"],["matSuffix","",3,"for"],["paydateid",""],[1,"col-lg-12"],["matInput","","formControlName","details"],["formArrayName","products"],[1,"pt-2","pb-1"],[1,"bg-secondary-light","py-2"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"text-end"],["type","button",1,"btn","btn-primary","my-2",3,"click"],[1,"fa","fa-plus"],["type","button","mat-flat-button","","color","warn",1,"me-2",3,"disabled","click"],["type","button","mat-flat-button","","color","primary",3,"disabled","click"],[1,"alert","alert-danger","my-3"],[3,"value"],[3,"formGroupName"],[1,"d-flex"],[1,"flex-grow-1","me-2"],[1,"col-lg-5"],["matInput","","placeholder","Enter Product / Service Name","formControlName","productsname",3,"errorStateMatcher"],[1,"col-lg-2"],["matInput","","placeholder","Enter No Of Items e.g. 50","formControlName","noitems",3,"errorStateMatcher","keyup"],["matInput","","placeholder","Enter Unit","formControlName","unitprice",3,"errorStateMatcher","keyup"],[1,"col-lg-3"],["matInput","","placeholder","Enter Total Amount","formControlName","totalamount",3,"errorStateMatcher","keyup"],[1,""],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"],["class","ms-1",4,"ngIf"],[1,"ms-1"],[1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-save"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t._UZ(3,"i",3),t._uU(4," Back "),t.qZA()()(),t.TgZ(5,"form",4),t.YNc(6,S,2,1,"div",5),t.TgZ(7,"div",6)(8,"div",7)(9,"mat-form-field",8)(10,"mat-label"),t._uU(11,"Name"),t.qZA(),t._UZ(12,"input",9),t.qZA()(),t.TgZ(13,"div",7)(14,"ng-select",10)(15,"ng-option",11),t._uU(16,"Select Mode OF Payment"),t.qZA(),t.YNc(17,k,3,2,"ng-container",12),t.qZA()()(),t.TgZ(18,"div",13)(19,"div",7)(20,"mat-form-field",8)(21,"mat-label"),t._uU(22,"Transaction Code"),t.qZA(),t._UZ(23,"input",14),t.qZA()(),t.TgZ(24,"div",7)(25,"mat-form-field",8)(26,"mat-label"),t._uU(27,"Payment Date"),t.qZA(),t._UZ(28,"input",15)(29,"mat-datepicker-toggle",16)(30,"mat-datepicker",null,17),t.qZA()()(),t.TgZ(32,"div",13)(33,"div",18)(34,"mat-form-field",8)(35,"mat-label"),t._uU(36,"Payment Description"),t.qZA(),t._UZ(37,"textarea",19),t.qZA()()(),t.TgZ(38,"div",20)(39,"div",21),t._uU(40," Products"),t.qZA(),t.TgZ(41,"div",22),t.YNc(42,E,31,7,"div",23),t.qZA(),t.TgZ(43,"div",24)(44,"button",25),t.NdJ("click",function(){return n.addProduct()}),t._UZ(45,"i",26),t.qZA()()(),t.TgZ(46,"button",27),t.NdJ("click",function(){return n.delOverallPay()}),t._uU(47,"Delete"),t.qZA(),t.TgZ(48,"button",28),t.NdJ("click",function(){return n.editOverallPay()}),t._uU(49,"Save Changes "),t.qZA()()),2&e){const r=t.MAs(31);t.xp6(5),t.Q6J("formGroup",n.OtherIncomeForm),t.xp6(1),t.Q6J("ngIf",n.errorMessage),t.xp6(6),t.Q6J("errorStateMatcher",n.matcher),t.xp6(5),t.Q6J("ngForOf",n.modeOfPay),t.xp6(6),t.Q6J("errorStateMatcher",n.matcher),t.xp6(5),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(13),t.Q6J("ngForOf",n.getProducts.controls),t.xp6(4),t.Q6J("disabled",n.errorMessage||n.loading),t.xp6(2),t.Q6J("disabled",n.OtherIncomeForm.invalid||n.OtherIncomeForm.pristine)}},directives:[m.rH,i._Y,i.JL,i.sg,l.O5,u.KE,u.hX,v.Nt,i.Fj,i.JJ,i.u,I.w9,I.jq,l.sg,h.hl,h.nW,u.R9,h.Mq,i.CE,i.x0,y.lW],styles:[""]}),o})();var Q=d(1990),w=d(4701),Y=d(2818);function H(o,s){if(1&o&&(t.TgZ(0,"div",5),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorMessage," ")}}const L=function(o){return["edit/",o]};function D(o,s){if(1&o&&(t.TgZ(0,"tr",12)(1,"td",13),t._uU(2),t.qZA(),t.TgZ(3,"td",13),t._uU(4),t.qZA(),t.TgZ(5,"td",13),t._uU(6),t.qZA(),t.TgZ(7,"td",13),t._uU(8),t.ALo(9,"modeofpay"),t.qZA(),t.TgZ(10,"td",13),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"td",13),t._uU(14),t.ALo(15,"date"),t.qZA(),t.TgZ(16,"td",13),t._uU(17),t.qZA()()),2&o){const e=s.$implicit,n=s.index;t.Q6J("routerLink",t.VKq(15,L,e.uniqids)),t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(e.personname),t.xp6(2),t.Oqu(e.transactioncode),t.xp6(2),t.Oqu(t.lcZ(9,8,e.modeofpay)),t.xp6(3),t.Oqu(t.xi3(12,10,e.totalamount,"Ksh. ")),t.xp6(3),t.Oqu(t.lcZ(15,13,e.paymentdate)),t.xp6(3),t.Oqu(e.details)}}function K(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",6)(2,"table",7)(3,"tbody")(4,"tr",8)(5,"th",9),t._uU(6,"#"),t.qZA(),t.TgZ(7,"th",9),t._uU(8,"Supplier Name"),t.qZA(),t.TgZ(9,"th",9),t._uU(10,"Transaction Code"),t.qZA(),t.TgZ(11,"th",9),t._uU(12,"Mode Of Payment"),t.qZA(),t.TgZ(13,"th",9),t._uU(14,"Total Amount"),t.qZA(),t.TgZ(15,"th",9),t._uU(16,"Transaction Date"),t.qZA(),t.TgZ(17,"th",9),t._uU(18,"Description"),t.qZA()(),t.YNc(19,D,18,17,"tr",10),t.qZA()()(),t.TgZ(20,"app-paginator",11),t.NdJ("newItemEvent",function(r){return t.CHM(e),t.oxw().paginatedCall(r)}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(19),t.Q6J("ngForOf",e.otheInc),t.xp6(1),t.Q6J("datafromdb",e.paginator)}}function B(o,s){if(1&o&&(t.TgZ(0,"div",15),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.loadmessage," ")}}function j(o,s){if(1&o&&t.YNc(0,B,2,1,"div",14),2&o){const e=t.oxw();t.Q6J("ngIf",e.loading)}}let G=(()=>{class o{constructor(e,n){this.payServ=e,this.router=n,this.loading=!0,this.loadmessage="loading ...",this.ifSearched=!1,this.paginator={page:1,pageSize:10},this.options=[{searchName:"Transaction Code",searchParam:"transactioncode"},{searchName:"Mode Of Payment",searchParam:"modeofpay"},{searchName:"Transaction Date",searchParam:"paymentdate"}],this.labels={listname:"Other Income List",addBtname:"Add Income",searchPlaceholder:"Search Income"}}ngOnInit(){this.loadPayments()}loadPayments(){this.payServ.getOtherIncomes(this.paginator).subscribe({next:e=>this.handleResp(e),error:e=>this.errorHandle(e)})}handleResp(e){this.loading=!1,this.otheInc=e.results,this.ifSearched||(this.otherIncStore=e),this.setPaginator(e)}errorHandle(e){this.loading=!1,this.errorMessage=e}paginatedCall(e){this.ifSearched=!1,this.setPaginator(this.otherIncStore),this.paginator.page=e.page,this.loadPayments()}searchFunction(e){this.setPaginator(this.otherIncStore),this.errorMessage=null,this.ifSearched=!0,this.otheInc=this.otherIncStore.results,this.paginator[e.searchParam]=e.searchValue,this.otheInc=this.otheInc.filter(n=>{var r;let a=(null===(r=n[e.searchParam])||void 0===r?void 0:r.toString())||"";return new RegExp(e.searchValue,"i").test(a)}),0==this.otheInc.length&&(this.paginator.page=1,this.loading=!0,this.loadmessage="Performing a Wider Search",this.loadPayments())}closeSearchFunction(){this.otheInc=this.otherIncStore.results,this.errorMessage=null,this.setPaginator(this.otherIncStore)}setPaginator(e){this.paginator={page:1,pageSize:10},this.paginator.page=e.currentPage,this.paginator.totalItems=e.totalItems,this.paginator.pageSize=e.pageSize}navigateAdd(){this.router.navigate(["/income/other/add"])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_),t.Y36(m.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-other-income"]],decls:6,vars:6,consts:[[1,"container-fluid","py-3"],[3,"labels","searchoptions","backenddata","searchEmit","closeEmit","navigateEmit"],["class","alert alert-danger my-3",4,"ngIf"],[4,"ngIf","ngIfElse"],["nodata",""],[1,"alert","alert-danger","my-3"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-bordered","text-nowrap"],[1,"blhead","rounded"],[1,"text-light"],["class","cursor",3,"routerLink",4,"ngFor","ngForOf"],[3,"datafromdb","newItemEvent"],[1,"cursor",3,"routerLink"],[1,"tpad"],["class","alert alert-warning text-danger my-3",4,"ngIf"],[1,"alert","alert-warning","text-danger","my-3"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"app-search-tab",1),t.NdJ("searchEmit",function(a){return n.searchFunction(a)})("closeEmit",function(){return n.closeSearchFunction()})("navigateEmit",function(){return n.navigateAdd()}),t.qZA(),t.YNc(2,H,2,1,"div",2),t.YNc(3,K,21,2,"ng-container",3),t.YNc(4,j,1,1,"ng-template",null,4,t.W1O),t.qZA()),2&e){const r=t.MAs(5);t.xp6(1),t.Q6J("labels",n.labels)("searchoptions",n.options)("backenddata",n.otheInc),t.xp6(1),t.Q6J("ngIf",n.errorMessage),t.xp6(1),t.Q6J("ngIf",n.otheInc&&!n.loading&&!n.errorMessage)("ngIfElse",r)}},directives:[Q.O,l.O5,l.sg,m.rH,w.J],pipes:[Y.p,l.H9,l.uU],styles:[""]}),o})();var z=d(5245),R=d(6186),V=d(9744),X=d(4586);const W=[{path:"",component:G},{path:"add",component:N},{path:"edit/:id",component:F},{path:"**",redirectTo:"",pathMatch:"full"}];let $=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[l.ez,R.K,i.UX,I.A0,i.u5,f.ZX,u.lN,O.LD,v.c,z.Ps,y.ot,b.XK,h.FA,X.D,V.F,m.Bz.forChild(W)]]}),o})()}}]);