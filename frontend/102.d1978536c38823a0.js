"use strict";(self.webpackChunkbiz_ke_frontend=self.webpackChunkbiz_ke_frontend||[]).push([[102],{1102:($,g,i)=>{i.r(g),i.d(g,{CompanyModule:()=>G});var l=i(9808),m=i(1083),r=i(3075),Z=i(5906),v=i(3034),t=i(5e3),h=i(7261),c=i(2340),x=i(520);let f=(()=>{class n{constructor(e){this.http=e}addCompany(e){return this.http.post(c.N.apiUrl+"company/",e)}updateCompany(e,a){return this.http.put(c.N.apiUrl+"company/"+a,e)}delCompany(e){return this.http.delete(c.N.apiUrl+"company/"+e)}getCompany(e){return this.http.get(c.N.apiUrl+"company/"+e)}getCompanies(e){return this.http.get(c.N.apiUrl+"company/",{params:e})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(x.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var d=i(7322),y=i(7531),u=i(4376),C=i(7423);function A(n,o){if(1&n&&(t.TgZ(0,"div",26),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorMessage," ")}}function b(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"ng-option",29),t._uU(2),t.qZA(),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("value",e),t.xp6(1),t.hij(" ",e.toUpperCase()," ")}}function T(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"ng-option",27),t._uU(2,"Private Or Public"),t.qZA(),t.YNc(3,b,3,2,"ng-container",28),t.BQk()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.public)}}function q(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"ng-option",29),t._uU(2),t.qZA(),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("value",e),t.xp6(1),t.hij(" ",e.toUpperCase()," ")}}function U(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"ng-option",27),t._uU(2,"Please Set Company Status"),t.qZA(),t.YNc(3,q,3,2,"ng-container",28),t.BQk()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.bizstate)}}function N(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"ng-option",29),t._uU(2),t.qZA(),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("value",1*e.value),t.xp6(1),t.Oqu(e.name.toUpperCase())}}function S(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"ng-option",27),t._uU(2,"Please Select Type Of Company"),t.qZA(),t.YNc(3,N,3,2,"ng-container",28),t.BQk()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.biztypes)}}function I(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().delCompany()}),t._uU(2,"Delete"),t.qZA(),t.TgZ(3,"button",31),t.NdJ("click",function(){return t.CHM(e),t.oxw().editCompany()}),t._uU(4,"Save Changes "),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.errorMessage||e.loading),t.xp6(2),t.Q6J("disabled",e.companyForm.invalid||e.companyForm.pristine)}}function E(n,o){1&n&&(t.ynx(0),t._UZ(1,"i",34),t.TgZ(2,"span",35),t._uU(3,"Loading..."),t.qZA(),t.BQk())}function J(n,o){1&n&&t._uU(0," Add Company ")}function L(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().addCompany()}),t.YNc(1,E,4,0,"ng-container",24),t.YNc(2,J,1,0,"ng-template",null,33,t.W1O),t.qZA()}if(2&n){const e=t.MAs(3),a=t.oxw();t.Q6J("disabled",a.companyForm.invalid||a.errorMessage||a.loading),t.xp6(1),t.Q6J("ngIf",a.loading)("ngIfElse",e)}}let _=(()=>{class n{constructor(e,a,s,p,K){this.companyFb=e,this.router=a,this.snakBar=s,this.compServ=p,this.route=K,this.matcher=new Z.n,this.loading=!1,this.companyForm=this.companyFb.group({name:["",r.kI.required],code:["",r.kI.required],bizstatus:["",r.kI.required],biztype:["",r.kI.required],public:["",r.kI.required],admin:["",r.kI.required],phone:["",[r.kI.required,(0,v.t)()]],email:["",[r.kI.required,r.kI.email]],hq:["",r.kI.required],details:[""]}),this.bizstate=["ACTIVE","SUSPENDED","TERMINATED","WAITING","OTHERS"],this.public=["PUBLIC","PRIVATE"],this.biztypes=[{name:"WholeSale",value:1},{name:"Startup",value:2},{name:"Chemist",value:3},{name:"Farming",value:4},{name:"Consultancy",value:5},{name:"School",value:6}]}ngOnInit(){this.companyForm.valueChanges.subscribe(()=>{this.errorMessage=!1}),this.companyid=this.route.snapshot.paramMap.get("id"),this.companyid&&this.loadCompany()}loadCompany(){this.compServ.getCompany(this.companyid).subscribe({next:e=>this.respCompany(e),error:e=>this.errorHandle(e)})}addCompany(){this.loading=!0,this.compServ.addCompany(this.companyForm.value).subscribe({next:e=>this.handleResp(e),error:e=>this.errorHandle(e)})}editCompany(){this.loading=!0,this.compServ.updateCompany(this.companyForm.value,this.companyid).subscribe({next:a=>this.handleResp(a),error:a=>this.errorHandle(a)})}delCompany(){this.loading=!0,this.compServ.delCompany(this.companyid).subscribe({next:e=>this.handleResp(e),error:e=>this.errorHandle(e)})}openSnakBar(e,a){this.snakBar.open(e,a,{duration:2500})}respCompany(e){this.loading=!1,this.companyForm.patchValue({name:e.name,code:e.code,bizstatus:e.bizstatus,biztype:e.biztype,public:e.public,admin:e.admin,phone:e.phone,email:e.email,hq:e.hq,details:e.details})}handleResp(e){this.loading=!1,this.openSnakBar(e.message,"Dismiss"),this.router.navigate(["/admin/company"])}errorHandle(e){this.loading=!1,this.errorMessage=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(m.F0),t.Y36(h.ux),t.Y36(f),t.Y36(m.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-edit-company"]],decls:56,vars:13,consts:[[1,"d-lg-flex","text-secondary","py-2"],[1,"flex-grow-1"],["type","button","routerLink","/admin/company",1,"btn","btn-outline-success","btn-sm"],["aria-hidden","true",1,"fa","fa-chevron-left"],[3,"formGroup"],["class","alert alert-danger my-3",4,"ngIf"],[1,"row","pt-3"],[1,"col-lg-6"],["appearance","outline",1,"w-100"],["matInput","","placeholder","Company Name","formControlName","name",3,"errorStateMatcher"],["matInput","","placeholder","Company Code","formControlName","code",3,"errorStateMatcher"],[1,"col-lg-6","pb-4"],["formControlName","public"],[4,"ngIf"],["formControlName","bizstatus"],[1,"col-lg-12","pb-3"],["formControlName","biztype"],["matInput","","placeholder","Enter Contact Person Name","formControlName","admin",3,"errorStateMatcher"],["matInput","","placeholder","Enter Phone Number","formControlName","phone",3,"errorStateMatcher"],["matInput","","placeholder","Enter Email","formControlName","email",3,"errorStateMatcher"],["matInput","","placeholder","Company Headquaters","formControlName","hq",3,"errorStateMatcher"],[1,"row"],[1,"col-lg-12"],["matInput","","formControlName","details"],[4,"ngIf","ngIfElse"],["nocompany",""],[1,"alert","alert-danger","my-3"],["value","","disabled",""],[4,"ngFor","ngForOf"],[3,"value"],["type","button","mat-flat-button","","color","warn",1,"me-2",3,"disabled","click"],["type","button","mat-flat-button","","color","primary",3,"disabled","click"],["mat-flat-button","","color","primary","type","button",1,"me-3",3,"disabled","click"],["notload",""],[1,"fa","fa-spinner","fa-spin","fa-1x","me-2"],[1,""]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t._UZ(3,"i",3),t._uU(4," Back "),t.qZA()()(),t.TgZ(5,"form",4),t.YNc(6,A,2,1,"div",5),t.TgZ(7,"div",6)(8,"div",7)(9,"mat-form-field",8)(10,"mat-label"),t._uU(11,"Company Name "),t.qZA(),t._UZ(12,"input",9),t.qZA()(),t.TgZ(13,"div",7)(14,"mat-form-field",8)(15,"mat-label"),t._uU(16,"Company Code "),t.qZA(),t._UZ(17,"input",10),t.qZA()(),t.TgZ(18,"div",11)(19,"ng-select",12),t.YNc(20,T,4,1,"ng-container",13),t.qZA()(),t.TgZ(21,"div",11)(22,"ng-select",14),t.YNc(23,U,4,1,"ng-container",13),t.qZA()(),t.TgZ(24,"div",15)(25,"ng-select",16),t.YNc(26,S,4,1,"ng-container",13),t.qZA()(),t.TgZ(27,"div",7)(28,"mat-form-field",8)(29,"mat-label"),t._uU(30,"Contact Person "),t.qZA(),t._UZ(31,"input",17),t.qZA()(),t.TgZ(32,"div",7)(33,"mat-form-field",8)(34,"mat-label"),t._uU(35,"Phone Number "),t.qZA(),t._UZ(36,"input",18),t.qZA()(),t.TgZ(37,"div",7)(38,"mat-form-field",8)(39,"mat-label"),t._uU(40,"Email "),t.qZA(),t._UZ(41,"input",19),t.qZA()(),t.TgZ(42,"div",7)(43,"mat-form-field",8)(44,"mat-label"),t._uU(45,"Company Headquaters "),t.qZA(),t._UZ(46,"input",20),t.qZA()()(),t.TgZ(47,"div",21)(48,"div",22)(49,"mat-form-field",8)(50,"mat-label"),t._uU(51,"Company Description"),t.qZA(),t._UZ(52,"textarea",23),t.qZA()()(),t.YNc(53,I,5,2,"ng-container",24),t.YNc(54,L,4,3,"ng-template",null,25,t.W1O),t.qZA()),2&e){const s=t.MAs(55);t.xp6(5),t.Q6J("formGroup",a.companyForm),t.xp6(1),t.Q6J("ngIf",a.errorMessage),t.xp6(6),t.Q6J("errorStateMatcher",a.matcher),t.xp6(5),t.Q6J("errorStateMatcher",a.matcher),t.xp6(3),t.Q6J("ngIf",a.public),t.xp6(3),t.Q6J("ngIf",a.bizstate),t.xp6(3),t.Q6J("ngIf",a.biztypes),t.xp6(5),t.Q6J("errorStateMatcher",a.matcher),t.xp6(5),t.Q6J("errorStateMatcher",a.matcher),t.xp6(5),t.Q6J("errorStateMatcher",a.matcher),t.xp6(5),t.Q6J("errorStateMatcher",a.matcher),t.xp6(7),t.Q6J("ngIf",a.companyid)("ngIfElse",s)}},directives:[m.rH,r._Y,r.JL,r.sg,l.O5,d.KE,d.hX,y.Nt,r.Fj,r.JJ,r.u,u.w9,u.jq,l.sg,C.lW],styles:[".mat-form-field-flex>.mat-form-field-infix{padding:.5em 0!important}  .mat-form-field-label-wrapper{top:-1.4em}  .mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{transform:translateY(-1.1em) scale(.75);width:133.33333%}"]}),n})();var Q=i(1990),F=i(4701);function M(n,o){if(1&n&&(t.TgZ(0,"div",5),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorMessage," ")}}const P=function(n){return["edit/",n]};function k(n,o){if(1&n&&(t.TgZ(0,"tr",13)(1,"td",14),t._uU(2),t.qZA(),t.TgZ(3,"td",14),t._uU(4),t.qZA(),t.TgZ(5,"td",14),t._uU(6),t.qZA(),t.TgZ(7,"td",14),t._uU(8),t.qZA(),t.TgZ(9,"td",14),t._uU(10),t.qZA(),t.TgZ(11,"td",14),t._uU(12),t.qZA(),t.TgZ(13,"td",14),t._uU(14),t.qZA(),t.TgZ(15,"td",14),t._uU(16),t.qZA(),t.TgZ(17,"td",14),t._uU(18),t.qZA(),t.TgZ(19,"td",14),t._uU(20),t.qZA()()),2&n){const e=o.$implicit,a=o.index;t.Q6J("routerLink",t.VKq(11,P,e.id)),t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.code),t.xp6(2),t.Oqu(e.bizstatus),t.xp6(2),t.Oqu(e.public),t.xp6(2),t.Oqu(e.hq),t.xp6(2),t.Oqu(e.admin),t.xp6(2),t.Oqu(e.phone),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Oqu(e.details)}}function O(n,o){if(1&n&&(t.ynx(0),t.YNc(1,k,21,13,"tr",12),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.companyList)}}function z(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",6)(2,"table",7)(3,"tbody")(4,"tr",8)(5,"th",9),t._uU(6,"#"),t.qZA(),t.TgZ(7,"th",9),t._uU(8,"Name"),t.qZA(),t.TgZ(9,"th",9),t._uU(10,"Code"),t.qZA(),t.TgZ(11,"th",9),t._uU(12,"Status"),t.qZA(),t.TgZ(13,"th",9),t._uU(14,"Public / Private"),t.qZA(),t.TgZ(15,"th",9),t._uU(16,"Address"),t.qZA(),t.TgZ(17,"th",9),t._uU(18,"Admin Name"),t.qZA(),t.TgZ(19,"th",9),t._uU(20,"Phone"),t.qZA(),t.TgZ(21,"th",9),t._uU(22,"Email"),t.qZA(),t.TgZ(23,"th",9),t._uU(24,"Description"),t.qZA()(),t.YNc(25,O,2,1,"ng-container",10),t.qZA()()(),t.TgZ(26,"app-paginator",11),t.NdJ("newItemEvent",function(s){return t.CHM(e),t.oxw().paginatedCall(s)}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(25),t.Q6J("ngIf",e.companyList),t.xp6(1),t.Q6J("datafromdb",e.paginator)}}function Y(n,o){if(1&n&&(t.TgZ(0,"div",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.loadmessage," ")}}function B(n,o){if(1&n&&t.YNc(0,Y,2,1,"div",15),2&n){const e=t.oxw();t.Q6J("ngIf",e.loading)}}let H=(()=>{class n{constructor(e,a){this.payServ=e,this.router=a,this.loading=!0,this.loadmessage="loading ...",this.ifSearched=!1,this.paginator={page:1,pageSize:10},this.options=[{searchName:"Company Name",searchParam:"name"},{searchName:"Headquaters",searchParam:"hq"},{searchName:"Company Code",searchParam:"code"},{searchName:"Status",searchParam:"status"},{searchName:"Public / Private",searchParam:"public"},{searchName:"Admin Name",searchParam:"admin"},{searchName:"Admin Email",searchParam:"email"},{searchName:"Admin Phone",searchParam:"phone"}],this.labels={listname:"Company List",addBtname:"Add Company",searchPlaceholder:"Search Company"}}ngOnInit(){this.loadCompany()}loadCompany(){this.payServ.getCompanies(this.paginator).subscribe({next:e=>this.respHandle(e),error:e=>this.errorHandle(e)})}respHandle(e){this.loading=!1,this.companyList=e.results,this.ifSearched||(this.companyListStore=e),this.setPaginator(e)}errorHandle(e){this.loading=!1,this.errorMessage=e}paginatedCall(e){this.ifSearched=!1,this.setPaginator(this.companyListStore),this.paginator.page=e.page,this.loadCompany()}searchFunction(e){this.setPaginator(this.companyListStore),this.errorMessage=null,this.ifSearched=!0,this.companyList=this.companyListStore.results,this.paginator[e.searchParam]=e.searchValue,this.companyList=this.companyList.filter(a=>{var s;let p=(null===(s=a[e.searchParam])||void 0===s?void 0:s.toString())||"";return new RegExp(e.searchValue,"i").test(p)}),0==this.companyList.length&&(this.paginator.page=1,this.loading=!0,this.loadmessage="Performing a Wider Search",this.loadCompany())}closeSearchFunction(){this.companyList=this.companyListStore.results,this.errorMessage=null,this.setPaginator(this.companyListStore)}setPaginator(e){this.paginator={page:1,pageSize:10},this.paginator.page=e.currentPage,this.paginator.totalItems=e.totalItems,this.paginator.pageSize=e.pageSize}navigateAdd(){this.router.navigate(["/admin/company/add"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list-companies"]],decls:6,vars:6,consts:[[1,"container-fluid","py-3"],[3,"labels","searchoptions","backenddata","searchEmit","closeEmit","navigateEmit"],["class","alert alert-danger my-3",4,"ngIf"],[4,"ngIf","ngIfElse"],["nodata",""],[1,"alert","alert-danger","my-3"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-bordered","text-nowrap"],[1,"blhead","rounded"],[1,"text-light"],[4,"ngIf"],[3,"datafromdb","newItemEvent"],["class","cursor",3,"routerLink",4,"ngFor","ngForOf"],[1,"cursor",3,"routerLink"],[1,"tpad"],["class","alert alert-warning text-danger my-3",4,"ngIf"],[1,"alert","alert-warning","text-danger","my-3"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0)(1,"app-search-tab",1),t.NdJ("searchEmit",function(p){return a.searchFunction(p)})("closeEmit",function(){return a.closeSearchFunction()})("navigateEmit",function(){return a.navigateAdd()}),t.qZA(),t.YNc(2,M,2,1,"div",2),t.YNc(3,z,27,2,"ng-container",3),t.YNc(4,B,1,1,"ng-template",null,4,t.W1O),t.qZA()),2&e){const s=t.MAs(5);t.xp6(1),t.Q6J("labels",a.labels)("searchoptions",a.options)("backenddata",a.companyList),t.xp6(1),t.Q6J("ngIf",a.errorMessage),t.xp6(1),t.Q6J("ngIf",a.companyList&&!a.loading&&!a.errorMessage)("ngIfElse",s)}},directives:[Q.O,l.O5,l.sg,m.rH,F.J],styles:[""]}),n})();var w=i(508),D=i(6856),j=i(5245),R=i(4107),W=i(6186),V=i(9744);const X=[{path:"",component:H},{path:"add",component:_},{path:"edit/:id",component:_}];let G=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,W.K,r.UX,u.A0,r.u5,h.ZX,d.lN,R.LD,y.c,j.Ps,C.ot,w.XK,D.FA,V.F,m.Bz.forChild(X)]]}),n})()}}]);