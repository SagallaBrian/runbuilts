"use strict";(self.webpackChunksuluhi_admin_frontend=self.webpackChunksuluhi_admin_frontend||[]).push([[833],{8833:(E,g,o)=>{o.r(g),o.d(g,{MycalendarModule:()=>F});var c=o(6895),D=o(6354),v=o(4006),h=o(8796),y=o(4333),C=o(1213),w=o(3203),_=o(8551),f=o(3499),k=o(2641),m=o(7846),M=o(895),Z=o(1236),x=o(4128),l=o(5412),e=o(4650),p=o(4859);function T(i,r){if(1&i&&(e.ynx(0),e._UZ(1,"div",6),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("innerText",null==t.InjectedData.meta?null:t.InjectedData.meta.description)}}let j=(()=>{class i{constructor(t){this.InjectedData=t}static#e=this.\u0275fac=function(a){return new(a||i)(e.Y36(l.WI))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-event-dialog-view"]],decls:11,vars:11,consts:[["mat-dialog-title",""],[1,"small"],[1,"mat-typography"],[4,"ngIf"],["align","end"],["mat-stroked-button","","mat-dialog-close","",3,"mat-dialog-close"],[1,"py-3",3,"innerText"]],template:function(a,n){1&a&&(e.TgZ(0,"h2",0),e._uU(1),e.TgZ(2,"span",1),e._uU(3),e.ALo(4,"date"),e.ALo(5,"date"),e.qZA()(),e.TgZ(6,"mat-dialog-content",2),e.YNc(7,T,2,1,"ng-container",3),e.qZA(),e.TgZ(8,"mat-dialog-actions",4)(9,"button",5),e._uU(10,"Close"),e.qZA()()),2&a&&(e.xp6(1),e.hij(" ",n.InjectedData.title," "),e.xp6(2),e.AsE("( ",e.xi3(4,5,n.InjectedData.start,"MMMM dd yyyy, hh:mm:aa")," - ",e.xi3(5,8,n.InjectedData.end,"MMMM dd yyyy, hh:mm:aa"),")"),e.xp6(4),e.Q6J("ngIf",null==n.InjectedData.meta?null:n.InjectedData.meta.description),e.xp6(2),e.Q6J("mat-dialog-close",!1))},dependencies:[c.O5,l.ZT,l.uh,l.xY,l.H8,p.lW,c.uU]})}return i})();var O=o(354);function J(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"ng-option",11),e._uU(2),e.qZA(),e.BQk()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.title," ")}}function I(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"ng-select",9),e.NdJ("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.loadProjectDetails())}),e.YNc(2,J,3,2,"ng-container",10),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formControl",t.projectForm),e.xp6(1),e.Q6J("ngForOf",t.projects.results)}}function A(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mwl-calendar-month-view",12),e.NdJ("dayClicked",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.handleDayClick(n.day))})("eventClicked",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.handleEventClick(n.event))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("viewDate",t.viewDate)("events",t.events)("activeDayIsOpen",t.activeDayIsOpen)}}function V(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mwl-calendar-week-view",13),e.NdJ("eventClicked",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.handleEventClick(n.event))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("viewDate",t.viewDate)("events",t.events)}}function Q(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mwl-calendar-day-view",13),e.NdJ("eventClicked",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.handleEventClick(n.event))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("viewDate",t.viewDate)("events",t.events)}}const N=[{path:"",component:(()=>{class i{constructor(t,a,n){this.router=t,this.dialog=a,this.projectService=n,this.loading=!0,this.projectForm=new v.NI,this.activeDayIsOpen=!1,this.view="month",this.viewDate=new Date,this.events=[]}ngOnInit(){this.loadProjects({})}loadProjectDetails(){const t=this.projectForm.value;if(t){this.loading=!0;const a=this.projectService.getProject(t),n=this.projectService.getMiltestoneByProjId(t);(0,x.D)([a,n]).subscribe({next:([s,u])=>{this.projectDetails=s,this.projectDetails.projectsections=u,this.events=s.projectsections.map(d=>({title:d.title,start:new Date(d.startDate),end:new Date(d.endDate),color:{primary:"#1e90ff",secondary:"#D1E8FF"},meta:{description:d.description}}))},error:s=>{this.errorMessage=s,this.loading=!1},complete:()=>{this.loading=!1}})}}loadProjects(t){this.loading=!0,this.projectService.getAllProjects(1,1e8,t).subscribe({next:a=>{this.loading=!1,a.results.sort((n,s)=>new Date(n.startDate)-new Date(s.startDate)),this.projects=a},error:a=>{this.errorMessage=a,this.loading=!1},complete:()=>{this.loading=!1}})}handleEventClick(t){this.dialog.open(j,{data:{...t},minWidth:"70%"}).afterClosed().subscribe(a=>{})}handleDayClick({date:t,events:a}){(0,f.Z)(t,this.viewDate)&&((0,k.Z)(this.viewDate,t)&&!0===this.activeDayIsOpen||0===a.length?this.activeDayIsOpen=!1:(this.activeDayIsOpen=!0,this.viewDate=t))}moveToday(){this.viewDate=new Date}movePrev(){switch(this.view){case"month":this.viewDate=this.addMonths(this.viewDate,-1);break;case"week":this.viewDate=this.addDays(this.viewDate,-7);break;case"day":this.viewDate=this.addDays(this.viewDate,-1)}}moveNext(){switch(this.view){case"month":this.viewDate=this.addMonths(this.viewDate,1);break;case"week":this.viewDate=this.addDays(this.viewDate,7);break;case"day":this.viewDate=this.addDays(this.viewDate,1)}}addMonths(t,a){const n=new Date(t);return n.setMonth(t.getMonth()+a),n}addDays(t,a){const n=new Date(t);return n.setDate(t.getDate()+a),n}getViewTitle(){switch(this.view){case"month":return(0,m.Z)(this.viewDate,"MMMM yyyy");case"week":const t=(0,M.Z)(this.viewDate),a=(0,Z.Z)(this.viewDate);return`${(0,m.Z)(t,"MMMM d, yyyy")} - ${(0,m.Z)(a,"MMMM d, yyyy")}`;case"day":return(0,m.Z)(this.viewDate,"EEEE, MMMM d, yyyy");default:return""}}static#e=this.\u0275fac=function(a){return new(a||i)(e.Y36(D.F0),e.Y36(l.uw),e.Y36(O.Y))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-calender-view-one"]],decls:23,vars:9,consts:[[1,"mb-3"],[4,"ngIf"],["mat-button","",3,"color","click"],["mat-button","",3,"click"],[1,"pt-2"],[1,"text-center"],[3,"ngSwitch"],[3,"viewDate","events","activeDayIsOpen","dayClicked","eventClicked",4,"ngSwitchCase"],[3,"viewDate","events","eventClicked",4,"ngSwitchCase"],["placeholder","Select Project",3,"formControl","change"],[4,"ngFor","ngForOf"],[3,"value"],[3,"viewDate","events","activeDayIsOpen","dayClicked","eventClicked"],[3,"viewDate","events","eventClicked"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"div"),e.YNc(2,I,3,2,"ng-container",1),e.qZA()(),e.TgZ(3,"div")(4,"div")(5,"button",2),e.NdJ("click",function(){return n.view="month"}),e._uU(6,"Month"),e.qZA(),e.TgZ(7,"button",2),e.NdJ("click",function(){return n.view="week"}),e._uU(8,"Week"),e.qZA(),e.TgZ(9,"button",2),e.NdJ("click",function(){return n.view="day"}),e._uU(10,"Day"),e.qZA(),e.TgZ(11,"button",3),e.NdJ("click",function(){return n.movePrev()}),e._uU(12,"Previous"),e.qZA(),e.TgZ(13,"button",3),e.NdJ("click",function(){return n.moveNext()}),e._uU(14,"Next"),e.qZA()(),e.TgZ(15,"div",4)(16,"h2",5),e._uU(17),e.qZA()(),e._UZ(18,"br"),e.TgZ(19,"div",6),e.YNc(20,A,1,3,"mwl-calendar-month-view",7),e.YNc(21,V,1,2,"mwl-calendar-week-view",8),e.YNc(22,Q,1,2,"mwl-calendar-day-view",8),e.qZA()()),2&a&&(e.xp6(2),e.Q6J("ngIf",n.projects&&n.projects.results.length),e.xp6(3),e.Q6J("color","month"===n.view?"primary":""),e.xp6(2),e.Q6J("color","week"===n.view?"primary":""),e.xp6(2),e.Q6J("color","day"===n.view?"primary":""),e.xp6(8),e.Oqu(n.getViewTitle()),e.xp6(2),e.Q6J("ngSwitch",n.view),e.xp6(1),e.Q6J("ngSwitchCase","month"),e.xp6(1),e.Q6J("ngSwitchCase","week"),e.xp6(1),e.Q6J("ngSwitchCase","day"))},dependencies:[c.sg,c.O5,c.RF,c.n9,v.JJ,v.oH,h.w9,h.jq,p.lW,w.GH,w.TK,w.Se]})}return i})()}];let F=(()=>{class i{static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[c.ez,v.u5,v.UX,C.C,y.JX,h.A0,l.Is,p.ot,w._8.forRoot({provide:w._A,useFactory:_.x}),D.Bz.forChild(N)]})}return i})()}}]);