"use strict";(self.webpackChunkbiz_ke_frontend=self.webpackChunkbiz_ke_frontend||[]).push([[843],{3843:(H,_,i)=>{i.r(_),i.d(_,{AuthModule:()=>D});var d=i(9808),u=i(1083),n=i(3075),Z=i(5906),e=i(5e3),p=i(7261),x=i(7990),c=i(9224),m=i(7322),h=i(7531),f=i(7423);function U(o,a){if(1&o&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorMessage," ")}}function A(o,a){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorEmailControl()," ")}}function F(o,a){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorPasswordControl()," ")}}function I(o,a){1&o&&(e.ynx(0),e._UZ(1,"i",27),e.TgZ(2,"span",28),e._uU(3,"Loading..."),e.qZA(),e.BQk())}function q(o,a){1&o&&e._uU(0," Login ")}let M=(()=>{class o{constructor(r,t,l,s){this.loginFb=r,this.router=t,this.snakBar=l,this.authServ=s,this.loginForm=this.loginFb.group({email:["",[n.kI.required,n.kI.email]],password:["",[n.kI.required,n.kI.minLength(8)]]}),this.loading=!1,this.matcher=new Z.n}ngOnInit(){this.loginForm.valueChanges.subscribe(()=>{this.errorMessage=!1})}login(){this.loading=!0,this.authServ.loginUser(this.loginForm.value).subscribe({next:r=>this.handleResp(r),error:r=>this.handlError(r)})}handleResp(r){localStorage.setItem("token",r.accesstoken),localStorage.setItem("currentuser",JSON.stringify(r)),this.openSnakBar("User Authenticated Successfully","Dismiss"),this.router.navigate(["/dashboard"]).then(()=>{this.loading=!1})}handlError(r){this.loading=!1,this.errorMessage=r}openSnakBar(r,t){this.snakBar.open(r,t,{duration:1e3})}errorEmailControl(){var r,t;return(null===(r=this.loginForm.get("email"))||void 0===r?void 0:r.hasError("required"))?"You must provide a value":(null===(t=this.loginForm.get("email"))||void 0===t?void 0:t.hasError("email"))?"You must a valid email":""}errorPasswordControl(){var r,t;return(null===(r=this.loginForm.get("password"))||void 0===r?void 0:r.hasError("required"))?"You must provide a value":(null===(t=this.loginForm.get("password"))||void 0===t?void 0:t.hasError("minlength"))?"You must enter atleast 8 characters":""}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(n.qu),e.Y36(u.F0),e.Y36(p.ux),e.Y36(x.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:38,vars:9,consts:[[1,"row","gx-0"],[1,"col-xl-3","col-lg-5","col-md-6"],[1,"d-block","bg-image"],[1,"bg-shadow"],[1,"col-xl-9","col-lg-7","col-md-6"],[1,"visually-hidden"],[1,"row","gx-0","justify-content-center"],[1,"col-xl-8","col-lg-10","col-md-12","p-2","pb-5"],[1,"pt-100"],[1,"p-4"],[1,"text-center","ttl","text-success"],["src","../../../../assets/logo.png","alt","","width","30","height","24",1,"d-inline-block","align-text-top"],[1,"d-flex","pt-4"],[1,"flex-grow-1"],[1,"fw-normal","text-success"],["class","alert alert-danger ",4,"ngIf"],[3,"formGroup"],[1,"mb-1"],["appearance","outline",1,"w-100","m-0"],["matInput","","placeholder","Enter Username","formControlName","email",3,"errorStateMatcher"],[4,"ngIf"],["matInput","","placeholder","Enter Password","type","password","formControlName","password",3,"errorStateMatcher"],["mat-raised-button","","color","primary","type","button",1,"me-3",3,"disabled","click"],[4,"ngIf","ngIfElse"],["notload",""],[1,"d-flex","align-self-center"],[1,"alert","alert-danger"],[1,"fa","fa-spinner","fa-spin","fa-1x","me-2"],[1,""]],template:function(r,t){if(1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.qZA()(),e.TgZ(4,"div",4)(5,"h1",5),e._uU(6,"Suluhi"),e.qZA(),e.TgZ(7,"div",6)(8,"div",7),e._UZ(9,"div",8),e.TgZ(10,"mat-card")(11,"div",9)(12,"div",10),e._UZ(13,"img",11),e._uU(14," Suluhi "),e.qZA(),e.TgZ(15,"div",12)(16,"div",13)(17,"h3",14),e._uU(18,"Login"),e.qZA()()(),e.YNc(19,U,2,1,"div",15),e.TgZ(20,"form",16)(21,"div",17)(22,"mat-form-field",18)(23,"mat-label"),e._uU(24,"Username"),e.qZA(),e._UZ(25,"input",19),e.YNc(26,A,2,1,"mat-error",20),e.qZA()(),e.TgZ(27,"div",17)(28,"mat-form-field",18)(29,"mat-label"),e._uU(30,"Password"),e.qZA(),e._UZ(31,"input",21),e.YNc(32,F,2,1,"mat-error",20),e.qZA()(),e.TgZ(33,"button",22),e.NdJ("click",function(){return t.login()}),e.YNc(34,I,4,0,"ng-container",23),e.YNc(35,q,1,0,"ng-template",null,24,e.W1O),e.qZA()()()()()(),e._UZ(37,"div",25),e.qZA()()),2&r){const l=e.MAs(36);let s,g;e.xp6(19),e.Q6J("ngIf",t.errorMessage),e.xp6(1),e.Q6J("formGroup",t.loginForm),e.xp6(5),e.Q6J("errorStateMatcher",t.matcher),e.xp6(1),e.Q6J("ngIf",null==(s=t.loginForm.get("email"))?null:s.invalid),e.xp6(5),e.Q6J("errorStateMatcher",t.matcher),e.xp6(1),e.Q6J("ngIf",null==(g=t.loginForm.get("password"))?null:g.invalid),e.xp6(1),e.Q6J("disabled",t.loginForm.invalid||t.errorMessage||t.loading),e.xp6(1),e.Q6J("ngIf",t.loading)("ngIfElse",l)}},directives:[c.a8,d.O5,n._Y,n.JL,n.sg,m.KE,m.hX,h.Nt,n.Fj,n.JJ,n.u,m.TO,f.lW],styles:[".pt-100[_ngcontent-%COMP%]{padding-top:100px}.text-danger[_ngcontent-%COMP%]{color:#f44336!important}.bg-image[_ngcontent-%COMP%]{background-image:url(loginlogo.89330fdc39353bb6.png);background-size:cover;background-position:center;background-repeat:no-repeat;height:100vh}.bg-shadow[_ngcontent-%COMP%]{background-color:#0000004b;height:100%}.ttl[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:400}  .mat-form-field-flex>.mat-form-field-infix{padding:.5em 0!important}  .mat-form-field-label-wrapper{top:-1.4em}  .mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{transform:translateY(-1.1em) scale(.75);width:133.33333%}@media only screen and (max-width: 767px){.bg-image[_ngcontent-%COMP%]{height:130px}.pt-100[_ngcontent-%COMP%]{padding-top:20px}}"]}),o})();var N=i(6683),Y=i(4905),k=i(3034),v=i(4376);function S(o,a){if(1&o&&(e.TgZ(0,"div",36),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorMessage," ")}}function E(o,a){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorFirstNameControl()," ")}}function y(o,a){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorSecondNameControl()," ")}}function J(o,a){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorPhoneControl()," ")}}function Q(o,a){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorEmailControl()," ")}}function P(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"ng-option",39),e._uU(2),e.qZA(),e.BQk()),2&o){const r=a.$implicit;e.xp6(1),e.Q6J("value",1*r.id),e.xp6(1),e.AsE(" ",r.name.toUpperCase()," - ",r.code.toUpperCase()," ")}}function L(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"ng-option",37),e._uU(2,"Please Select A Branch"),e.qZA(),e.YNc(3,P,3,3,"ng-container",38),e.BQk()),2&o){const r=e.oxw();e.xp6(3),e.Q6J("ngForOf",r.branches)}}function O(o,a){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorPasswordControl()," ")}}function R(o,a){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorConfirmControl()," ")}}function B(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Passwords do not match "),e.qZA())}function j(o,a){1&o&&(e.ynx(0),e._UZ(1,"i",40),e.TgZ(2,"span",41),e._uU(3,"Loading..."),e.qZA(),e.BQk())}function z(o,a){1&o&&e._uU(0," Register ")}let X=(()=>{class o{constructor(r,t,l,s){this.registerFb=r,this.router=t,this.snakBar=l,this.authServ=s,this.matcher=new Z.n,this.loading=!1,this.registerForm=this.registerFb.group({nameone:["",[n.kI.required,n.kI.minLength(2)]],nametwo:["",[n.kI.required,n.kI.minLength(2)]],phone:["",[n.kI.required,n.kI.minLength(8),(0,k.t)()]],email:["",[n.kI.required,n.kI.email]],companyName:[""],companyLocation:[""],pemisons:[1],branchid:["",n.kI.required],password:["",[n.kI.required,n.kI.minLength(8),(0,N.j)()]],confirmpass:["",[n.kI.required,(0,Y.G)()]]})}ngOnInit(){var r;null===(r=this.registerForm.get("password"))||void 0===r||r.valueChanges.subscribe(()=>{var t;null===(t=this.registerForm.get("confirmpass"))||void 0===t||t.updateValueAndValidity()}),this.registerForm.valueChanges.subscribe(()=>{this.errorMessage=!1}),this.loadBranches()}loadBranches(){this.authServ.getBranches({page:1,pageSize:10}).subscribe({next:r=>this.branches=r.results,error:r=>this.errorHandle(r)})}registerUser(){this.loading=!0;let r=this.registerForm.value;delete r.confirmpass,this.authServ.register(r).subscribe(t=>{this.loading=!1,this.openSnakBar("User Added Successfully","Dismiss"),this.router.navigate(["/login"])},t=>{this.loading=!1,this.errorMessage=t})}errorFirstNameControl(){var r,t;return(null===(r=this.registerForm.get("nameone"))||void 0===r?void 0:r.hasError("required"))?"You must provide a value":(null===(t=this.registerForm.get("nameone"))||void 0===t?void 0:t.hasError("minlength"))?"You must provide atleast 2 characters":""}errorSecondNameControl(){var r,t;return(null===(r=this.registerForm.get("nametwo"))||void 0===r?void 0:r.hasError("required"))?"You must provide a value":(null===(t=this.registerForm.get("nametwo"))||void 0===t?void 0:t.hasError("minlength"))?"You must provide atleast 2 characters":""}errorPhoneControl(){var r,t;return(null===(r=this.registerForm.get("phone"))||void 0===r?void 0:r.hasError("required"))?"You must provide a value":(null===(t=this.registerForm.get("phone"))||void 0===t?void 0:t.hasError("notPhone"))?"You must a valid Phone Number":""}errorEmailControl(){var r,t;return(null===(r=this.registerForm.get("email"))||void 0===r?void 0:r.hasError("required"))?"You must provide a value":(null===(t=this.registerForm.get("email"))||void 0===t?void 0:t.hasError("email"))?"You must a valid email":""}errorPasswordControl(){var r,t,l;return(null===(r=this.registerForm.get("password"))||void 0===r?void 0:r.hasError("required"))?"You must provide a value":(null===(t=this.registerForm.get("password"))||void 0===t?void 0:t.hasError("minlength"))?"You must enter atleast 8 characters":(null===(l=this.registerForm.get("password"))||void 0===l?void 0:l.hasError("passwordStrengthfor"))?"The password is not strong":""}errorConfirmControl(){var r,t;return(null===(r=this.registerForm.get("confirmpass"))||void 0===r?void 0:r.hasError("required"))?"You must provide a value":(null===(t=this.registerForm.get("confirmpass"))||void 0===t?void 0:t.hasError("notSame"))?"The password do not match":""}openSnakBar(r,t){this.snakBar.open(r,t,{duration:1e3})}errorHandle(r){this.loading=!1,this.errorMessage=r}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(n.qu),e.Y36(u.F0),e.Y36(p.ux),e.Y36(x.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-register"]],decls:74,vars:19,consts:[[1,"row","gx-0"],[1,"col-xl-3","col-lg-4","col-md-6"],[1,"d-block","bg-image"],[1,"bg-shadow"],[1,"col-xl-9","col-lg-8","col-md-6"],[1,"row","gx-0","justify-content-center"],[1,"col-xl-8","col-lg-10","col-md-12","py-5","px-1"],[1,"pt-50"],[1,"visually-hidden"],[1,"p-4"],[1,"d-flex","pt-4"],[1,"flex-grow-1"],[1,"fw-normal","text-primary"],[1,"flex-grow-1","text-end"],["routerLink","/home",1,"navbar-brand","text-secondary"],["src","../../../../assets/logo.png","alt","","width","30","height","24",1,"d-inline-block","align-text-top"],["class","alert alert-danger my-3",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-lg-6"],["appearance","outline",1,"w-100"],["matInput","","placeholder","Enter First Name","formControlName","nameone",3,"errorStateMatcher"],[4,"ngIf"],["matInput","","placeholder","Enter Last Name","formControlName","nametwo",3,"errorStateMatcher"],["matInput","","placeholder","Enter Phone Number","formControlName","phone",3,"errorStateMatcher"],["matInput","","placeholder","Enter Email","formControlName","email",3,"errorStateMatcher"],[1,"col-lg-12","pb-4"],["formControlName","branchid"],["matInput","","placeholder","Enter Password","type","password","formControlName","password",3,"errorStateMatcher"],["matInput","","type","password","placeholder","Confirm Password","formControlName","confirmpass",3,"errorStateMatcher"],[1,"text-end"],["routerLink","/login",1,"text-secondary"],["mat-raised-button","","color","primary","type","button",1,"me-3",3,"disabled","click"],[4,"ngIf","ngIfElse"],["notload",""],[1,"d-flex","align-self-center"],[1,"alert","alert-danger","my-3"],["value","","disabled",""],[4,"ngFor","ngForOf"],[3,"value"],[1,"fa","fa-spinner","fa-spin","fa-1x","me-2"],[1,""]],template:function(r,t){if(1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.qZA()(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6),e._UZ(7,"div",7),e.TgZ(8,"h1",8),e._uU(9,"Suluhi Register"),e.qZA(),e.TgZ(10,"mat-card")(11,"div",9)(12,"div",10)(13,"div",11)(14,"h3",12),e._uU(15,"Register User"),e.qZA()(),e.TgZ(16,"div",13)(17,"a",14),e._UZ(18,"img",15),e._uU(19," Suluhi "),e.qZA()()(),e.YNc(20,S,2,1,"div",16),e.TgZ(21,"form",17)(22,"div",18)(23,"div",19)(24,"mat-form-field",20)(25,"mat-label"),e._uU(26,"First Name"),e.qZA(),e._UZ(27,"input",21),e.YNc(28,E,2,1,"mat-error",22),e.qZA()(),e.TgZ(29,"div",19)(30,"mat-form-field",20)(31,"mat-label"),e._uU(32,"Last Name"),e.qZA(),e._UZ(33,"input",23),e.YNc(34,y,2,1,"mat-error",22),e.qZA()()(),e.TgZ(35,"div",18)(36,"div",19)(37,"mat-form-field",20)(38,"mat-label"),e._uU(39,"Phone Number"),e.qZA(),e._UZ(40,"input",24),e.YNc(41,J,2,1,"mat-error",22),e.qZA()(),e.TgZ(42,"div",19)(43,"mat-form-field",20)(44,"mat-label"),e._uU(45,"Email"),e.qZA(),e._UZ(46,"input",25),e.YNc(47,Q,2,1,"mat-error",22),e.qZA()()(),e.TgZ(48,"div",18)(49,"div",26)(50,"ng-select",27),e.YNc(51,L,4,1,"ng-container",22),e.qZA()()(),e.TgZ(52,"div",18)(53,"div",19)(54,"mat-form-field",20)(55,"mat-label"),e._uU(56,"Password"),e.qZA(),e._UZ(57,"input",28),e.YNc(58,O,2,1,"mat-error",22),e.qZA()(),e.TgZ(59,"div",19)(60,"mat-form-field",20)(61,"mat-label"),e._uU(62,"Confrim Password"),e.qZA(),e._UZ(63,"input",29),e.YNc(64,R,2,1,"mat-error",22),e.YNc(65,B,2,0,"mat-error",22),e.qZA()()(),e.TgZ(66,"div",30)(67,"a",31),e._uU(68,"Already have an account? Login"),e.qZA()(),e.TgZ(69,"button",32),e.NdJ("click",function(){return t.registerUser()}),e.YNc(70,j,4,0,"ng-container",33),e.YNc(71,z,1,0,"ng-template",null,34,e.W1O),e.qZA()()()()()(),e._UZ(73,"div",35),e.qZA()()),2&r){const l=e.MAs(72);let s,g,b,C,w,T;e.xp6(20),e.Q6J("ngIf",t.errorMessage),e.xp6(1),e.Q6J("formGroup",t.registerForm),e.xp6(6),e.Q6J("errorStateMatcher",t.matcher),e.xp6(1),e.Q6J("ngIf",null==(s=t.registerForm.get("nameone"))?null:s.invalid),e.xp6(5),e.Q6J("errorStateMatcher",t.matcher),e.xp6(1),e.Q6J("ngIf",null==(g=t.registerForm.get("nametwo"))?null:g.invalid),e.xp6(6),e.Q6J("errorStateMatcher",t.matcher),e.xp6(1),e.Q6J("ngIf",null==(b=t.registerForm.get("phone"))?null:b.invalid),e.xp6(5),e.Q6J("errorStateMatcher",t.matcher),e.xp6(1),e.Q6J("ngIf",null==(C=t.registerForm.get("email"))?null:C.invalid),e.xp6(4),e.Q6J("ngIf",t.branches),e.xp6(6),e.Q6J("errorStateMatcher",t.matcher),e.xp6(1),e.Q6J("ngIf",null==(w=t.registerForm.get("password"))?null:w.invalid),e.xp6(5),e.Q6J("errorStateMatcher",t.matcher),e.xp6(1),e.Q6J("ngIf",null==(T=t.registerForm.get("confirmpass"))?null:T.invalid),e.xp6(1),e.Q6J("ngIf",t.registerForm.hasError("notSame")),e.xp6(4),e.Q6J("disabled",t.registerForm.invalid||t.errorMessage||t.loading),e.xp6(1),e.Q6J("ngIf",t.loading)("ngIfElse",l)}},directives:[c.a8,u.yS,d.O5,n._Y,n.JL,n.sg,m.KE,m.hX,h.Nt,n.Fj,n.JJ,n.u,m.TO,v.w9,v.jq,d.sg,f.lW],styles:[".pt-50[_ngcontent-%COMP%]{padding-top:50px}.text-danger[_ngcontent-%COMP%]{color:#f44336!important}.bg-image[_ngcontent-%COMP%]{background-image:url(loginlogo.89330fdc39353bb6.png);background-size:cover;background-position:center;background-repeat:no-repeat;height:100vh}.bg-shadow[_ngcontent-%COMP%]{background-color:#0000004b;height:100%}  .mat-form-field-flex>.mat-form-field-infix{padding:.5em 0!important}  .mat-form-field-label-wrapper{top:-1.4em}  .mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{transform:translateY(-1.1em) scale(.75);width:133.33333%}@media only screen and (max-width: 767px){.bg-image[_ngcontent-%COMP%]{height:130px}.pt-50[_ngcontent-%COMP%]{padding-top:20px}}"]}),o})();var G=i(5245);const W=[{path:"",component:M},{path:"register",component:X}];let D=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,n.UX,p.ZX,v.A0,m.lN,h.c,G.Ps,f.ot,c.QW,u.Bz.forChild(W)]]}),o})()}}]);