"use strict";(self.webpackChunkbiz_ke_frontend=self.webpackChunkbiz_ke_frontend||[]).push([[839],{4839:(V,g,n)=>{n.r(g),n.d(g,{ProductsModule:()=>z});var p=n(9808),s=n(1083),d=n(3075),v=n(5906),t=n(5e3),m=n(7261),c=n(2340),b=n(520);let h=(()=>{class r{constructor(e){this.http=e}addProduct(e){return this.http.post(c.N.apiUrl+"product/",e)}updateProduct(e,o){return this.http.put(c.N.apiUrl+"product/"+o,e)}delProduct(e){return this.http.delete(c.N.apiUrl+"product/"+e)}getProduct(e){return this.http.get(c.N.apiUrl+"product/"+e)}getProducts(e){return this.http.get(c.N.apiUrl+"product/",{params:e})}getCategories(e){return this.http.get(c.N.apiUrl+"productcateg/",{params:e})}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(b.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var u=n(7322),f=n(4107),x=n(508),_=n(7531),Z=n(7423);function A(r,a){if(1&r&&(t.ynx(0),t.TgZ(1,"mat-option",22),t._uU(2),t.qZA(),t.BQk()),2&r){const e=a.$implicit;t.xp6(1),t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function T(r,a){if(1&r&&(t.ynx(0),t.TgZ(1,"mat-form-field",8)(2,"mat-label"),t._uU(3,"Select Product"),t.qZA(),t.TgZ(4,"mat-select",20),t.YNc(5,A,3,2,"ng-container",21),t.qZA()(),t.BQk()),2&r){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",e.categories)}}function C(r,a){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().delProd()}),t._uU(2,"Delete"),t.qZA(),t.TgZ(3,"button",24),t.NdJ("click",function(){return t.CHM(e),t.oxw().editProd()}),t._uU(4,"Save Changes "),t.qZA(),t.BQk()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.errMessage||e.loading),t.xp6(2),t.Q6J("disabled",e.prdForm.invalid||e.prdForm.pristine)}}function S(r,a){1&r&&(t.ynx(0),t._UZ(1,"i",27),t.TgZ(2,"span",28),t._uU(3,"Loading..."),t.qZA(),t.BQk())}function U(r,a){1&r&&t._uU(0," Add Product ")}function y(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){return t.CHM(e),t.oxw().addProd()}),t.YNc(1,S,4,0,"ng-container",18),t.YNc(2,U,1,0,"ng-template",null,26,t.W1O),t.qZA()}if(2&r){const e=t.MAs(3),o=t.oxw();t.Q6J("disabled",o.prdForm.invalid||o.errMessage||o.loading),t.xp6(1),t.Q6J("ngIf",o.loading)("ngIfElse",e)}}let P=(()=>{class r{constructor(e,o,i,l,D){this.prdFb=e,this.router=o,this.snakBar=i,this.prdServ=l,this.route=D,this.matcher=new v.n,this.loading=!1,this.prdForm=this.prdFb.group({categoryid:[0,d.kI.required],brand:["",d.kI.required],calibration:["",d.kI.required],prdcodeserial:[""],prdtype:[""],prdversion:[""],defbuyprice:[0,d.kI.required],defsellprice:[0,d.kI.required],details:[""]})}ngOnInit(){this.loadCategory(),this.prdId=this.route.snapshot.paramMap.get("id"),this.prdId&&this.loadProd(),this.prdForm.valueChanges.subscribe(()=>{this.errMessage=!1})}loadCategory(){this.prdServ.getCategories({page:1,pageSize:1e5}).subscribe({next:e=>this.handlCateg(e),error:e=>this.errorHandle(e)})}loadProd(){this.loading=!0,this.prdServ.getProduct(this.prdId).subscribe({next:e=>this.respHandleCustomer(e),error:e=>this.errorHandle(e)})}addProd(){this.loading=!0,this.prdServ.addProduct(this.prdForm.value).subscribe({next:e=>this.handleResp(e),error:e=>this.errorHandle(e)})}editProd(){this.loading=!0,this.prdServ.updateProduct(this.prdForm.value,this.prdId).subscribe({next:o=>this.handleResp(o),error:o=>this.errorHandle(o)})}delProd(){this.loading=!0,this.prdServ.delProduct(this.prdId).subscribe({next:e=>this.handleResp(e),error:e=>this.errorHandle(e)})}openSnakBar(e,o){this.snakBar.open(e,o,{duration:2500})}respHandleCustomer(e){this.loading=!1,this.prdForm.patchValue({categoryid:e.categoryid,brand:e.brand,calibration:e.calibration,prdcodeserial:e.prdcodeserial,prdtype:e.prdtype,prdversion:e.prdversion,defbuyprice:e.defbuyprice,defsellprice:e.defsellprice,details:e.details})}handleResp(e){this.loading=!1,this.openSnakBar(e.message,"Dismiss"),this.router.navigate(["/products/products"])}handlCateg(e){this.categories=e.results}errorHandle(e){this.loading=!1,this.errMessage=e}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(d.qu),t.Y36(s.F0),t.Y36(m.ux),t.Y36(h),t.Y36(s.gz))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-add-edit-product"]],decls:56,vars:11,consts:[[1,"d-lg-flex","text-secondary","py-2"],[1,"flex-grow-1"],["type","button","routerLink","/products/products",1,"btn","btn-outline-success","btn-sm"],["aria-hidden","true",1,"fa","fa-chevron-left"],[3,"formGroup"],[1,"row"],[1,"col-lg-6"],[4,"ngIf"],["appearance","outline",1,"w-100"],["matInput","","placeholder","Enter Brand e.g. Festive","formControlName","brand",3,"errorStateMatcher"],["matInput","","placeholder","Calibration e.g. 10g, 100ml, 1unit etc.","formControlName","calibration",3,"errorStateMatcher"],["matInput","","placeholder","Enter Serial / Number","formControlName","prdcodeserial",3,"errorStateMatcher"],["matInput","","placeholder","Enter Product Form e.g White, Metallic etc","formControlName","prdtype",3,"errorStateMatcher"],["matInput","","placeholder","Enter Version e.g. V1 etc","formControlName","prdversion",3,"errorStateMatcher"],["matInput","","placeholder","Enter Buying Price ","formControlName","defbuyprice",3,"errorStateMatcher"],["matInput","","placeholder","Enter Selling Price","formControlName","defsellprice",3,"errorStateMatcher"],[1,"col-lg-12"],["matInput","","formControlName","details"],[4,"ngIf","ngIfElse"],["noProd",""],["formControlName","categoryid"],[4,"ngFor","ngForOf"],[3,"value"],["type","button","mat-flat-button","","color","warn",1,"me-2",3,"disabled","click"],["type","button","mat-flat-button","","color","primary",3,"disabled","click"],["mat-flat-button","","color","primary","type","button",1,"me-3",3,"disabled","click"],["notload",""],[1,"fa","fa-spinner","fa-spin","fa-1x","me-2"],[1,""]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t._UZ(3,"i",3),t._uU(4," Back "),t.qZA()()(),t.TgZ(5,"form",4)(6,"div",5)(7,"div",6),t.YNc(8,T,6,1,"ng-container",7),t.qZA(),t.TgZ(9,"div",6)(10,"mat-form-field",8)(11,"mat-label"),t._uU(12,"Product Brand"),t.qZA(),t._UZ(13,"input",9),t.qZA()()(),t.TgZ(14,"div",5)(15,"div",6)(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"Product Calibration"),t.qZA(),t._UZ(19,"input",10),t.qZA()(),t.TgZ(20,"div",6)(21,"mat-form-field",8)(22,"mat-label"),t._uU(23,"Product Serial / Code"),t.qZA(),t._UZ(24,"input",11),t.qZA()()(),t.TgZ(25,"div",5)(26,"div",6)(27,"mat-form-field",8)(28,"mat-label"),t._uU(29,"Product Shape/ Color etc"),t.qZA(),t._UZ(30,"input",12),t.qZA()(),t.TgZ(31,"div",6)(32,"mat-form-field",8)(33,"mat-label"),t._uU(34,"Product Version / Number"),t.qZA(),t._UZ(35,"input",13),t.qZA()()(),t.TgZ(36,"div",5)(37,"div",6)(38,"mat-form-field",8)(39,"mat-label"),t._uU(40,"Product Default Buying Price"),t.qZA(),t._UZ(41,"input",14),t.qZA()(),t.TgZ(42,"div",6)(43,"mat-form-field",8)(44,"mat-label"),t._uU(45,"Product Default Selling Price"),t.qZA(),t._UZ(46,"input",15),t.qZA()()(),t.TgZ(47,"div",5)(48,"div",16)(49,"mat-form-field",8)(50,"mat-label"),t._uU(51,"Product Description"),t.qZA(),t._UZ(52,"textarea",17),t.qZA()()(),t.YNc(53,C,5,2,"ng-container",18),t.YNc(54,y,4,3,"ng-template",null,19,t.W1O),t.qZA()),2&e){const i=t.MAs(55);t.xp6(5),t.Q6J("formGroup",o.prdForm),t.xp6(3),t.Q6J("ngIf",o.categories),t.xp6(5),t.Q6J("errorStateMatcher",o.matcher),t.xp6(6),t.Q6J("errorStateMatcher",o.matcher),t.xp6(5),t.Q6J("errorStateMatcher",o.matcher),t.xp6(6),t.Q6J("errorStateMatcher",o.matcher),t.xp6(5),t.Q6J("errorStateMatcher",o.matcher),t.xp6(6),t.Q6J("errorStateMatcher",o.matcher),t.xp6(5),t.Q6J("errorStateMatcher",o.matcher),t.xp6(7),t.Q6J("ngIf",o.prdId)("ngIfElse",i)}},directives:[s.rH,d._Y,d.JL,d.sg,p.O5,u.KE,u.hX,f.gD,d.JJ,d.u,p.sg,x.ey,_.Nt,d.Fj,Z.lW],styles:[".mat-form-field-flex>.mat-form-field-infix{padding:.5em 0!important}  .mat-form-field-label-wrapper{top:-1.4em}  .mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{transform:translateY(-1.1em) scale(.75);width:133.33333%}"]}),r})();var q=n(1990),I=n(4701);function N(r,a){if(1&r&&(t.TgZ(0,"div",6),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorMessage," ")}}const E=function(r){return["edit/",r]};function M(r,a){if(1&r&&(t.TgZ(0,"tr",13)(1,"td",14),t._uU(2),t.qZA(),t.TgZ(3,"td",14),t._uU(4),t.qZA(),t.TgZ(5,"td",14),t._uU(6),t.qZA(),t.TgZ(7,"td",14),t._uU(8),t.qZA(),t.TgZ(9,"td",14),t._uU(10),t.qZA(),t.TgZ(11,"td",14),t._uU(12),t.qZA(),t.TgZ(13,"td",14),t._uU(14),t.qZA(),t.TgZ(15,"td",14),t._uU(16),t.qZA(),t.TgZ(17,"td",14),t._uU(18),t.qZA(),t.TgZ(19,"td",14),t._uU(20),t.qZA()()),2&r){const e=a.$implicit,o=a.index;t.Q6J("routerLink",t.VKq(11,E,e.id)),t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(e.categoryname),t.xp6(2),t.Oqu(e.brand),t.xp6(2),t.Oqu(e.calibration),t.xp6(2),t.Oqu(e.prdcodeserial),t.xp6(2),t.Oqu(e.prdtype),t.xp6(2),t.Oqu(e.prdversion),t.xp6(2),t.Oqu(e.defbuyprice),t.xp6(2),t.Oqu(e.defsellprice),t.xp6(2),t.Oqu(e.details)}}function F(r,a){if(1&r&&(t.ynx(0),t.YNc(1,M,21,13,"tr",12),t.BQk()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.products)}}function J(r,a){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"table",7)(2,"tbody")(3,"tr",8)(4,"th",9),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th",9),t._uU(7,"Name"),t.qZA(),t.TgZ(8,"th",9),t._uU(9,"Brand"),t.qZA(),t.TgZ(10,"th",9),t._uU(11,"Unit"),t.qZA(),t.TgZ(12,"th",9),t._uU(13,"Serial"),t.qZA(),t.TgZ(14,"th",9),t._uU(15,"Type"),t.qZA(),t.TgZ(16,"th",9),t._uU(17,"Version Number"),t.qZA(),t.TgZ(18,"th",9),t._uU(19,"Default Buy Price"),t.qZA(),t.TgZ(20,"th",9),t._uU(21,"Default Sell Price"),t.qZA(),t.TgZ(22,"th",9),t._uU(23,"Description"),t.qZA()(),t.YNc(24,F,2,1,"ng-container",10),t.qZA()(),t.TgZ(25,"app-paginator",11),t.NdJ("newItemEvent",function(i){return t.CHM(e),t.oxw().paginatedCall(i)}),t.qZA(),t.BQk()}if(2&r){const e=t.oxw();t.xp6(24),t.Q6J("ngIf",e.products),t.xp6(1),t.Q6J("datafromdb",e.paginator)}}function Q(r,a){if(1&r&&(t.TgZ(0,"div",16),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.Oqu(e.loadmessage)}}function O(r,a){if(1&r&&t.YNc(0,Q,2,1,"div",15),2&r){const e=t.oxw();t.Q6J("ngIf",e.loading)}}let k=(()=>{class r{constructor(e,o){this.prdServ=e,this.router=o,this.loading=!0,this.loadmessage="loading ...",this.ifSearched=!1,this.paginator={page:1,pageSize:10},this.options=[{searchName:"Product Name",searchParam:"name"},{searchName:"Brand",searchParam:"brand"},{searchName:"Category Name",searchParam:"categoryname"}],this.labels={listname:"Products List",addBtname:"Add Product",searchPlaceholder:"Search Product"}}ngOnInit(){this.loadProducts()}loadProducts(){this.prdServ.getProducts(this.paginator).subscribe({next:e=>this.handleResp(e),error:e=>this.errorHandle(e)})}handleResp(e){this.loading=!1,this.products=e.results,this.ifSearched||(this.productStore=e),this.setPaginator(e)}errorHandle(e){this.loading=!1,this.errorMessage=e}paginatedCall(e){this.ifSearched=!1,this.setPaginator(this.productStore),this.paginator.page=e.page,this.loadProducts()}searchFunction(e){this.setPaginator(this.productStore),this.errorMessage=null,this.ifSearched=!0,this.products=this.productStore.results,this.paginator[e.searchParam]=e.searchValue,this.products=this.products.filter(o=>{var i;let l=(null===(i=o[e.searchParam])||void 0===i?void 0:i.toString())||"";return new RegExp(e.searchValue,"i").test(l)}),0==this.products.length&&(this.paginator.page=1,this.loading=!0,this.loadmessage="Performing a Wider Search",this.loadProducts())}closeSearchFunction(){this.products=this.productStore.results,this.errorMessage=null,this.setPaginator(this.productStore)}setPaginator(e){this.paginator={page:1,pageSize:10},this.paginator.page=e.currentPage,this.paginator.totalItems=e.totalItems,this.paginator.pageSize=e.pageSize}navigateAdd(){this.router.navigate(["/products/products/add"])}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(h),t.Y36(s.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-list-products"]],decls:7,vars:6,consts:[[1,"container-fluid","py-3"],[3,"labels","searchoptions","backenddata","searchEmit","closeEmit","navigateEmit"],["class","alert alert-danger my-3",4,"ngIf"],[1,"table-responsive"],[4,"ngIf","ngIfElse"],["nodata",""],[1,"alert","alert-danger","my-3"],[1,"table","table-striped","table-hover","table-bordered","text-nowrap"],[1,"blhead","rounded"],[1,"text-light"],[4,"ngIf"],[3,"datafromdb","newItemEvent"],["class","cursor",3,"routerLink",4,"ngFor","ngForOf"],[1,"cursor",3,"routerLink"],[1,"tpad"],["class","alert alert-warning text-danger my-3",4,"ngIf"],[1,"alert","alert-warning","text-danger","my-3"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"app-search-tab",1),t.NdJ("searchEmit",function(l){return o.searchFunction(l)})("closeEmit",function(){return o.closeSearchFunction()})("navigateEmit",function(){return o.navigateAdd()}),t.qZA(),t.YNc(2,N,2,1,"div",2),t.TgZ(3,"div",3),t.YNc(4,J,26,2,"ng-container",4),t.YNc(5,O,1,1,"ng-template",null,5,t.W1O),t.qZA()()),2&e){const i=t.MAs(6);t.xp6(1),t.Q6J("labels",o.labels)("searchoptions",o.options)("backenddata",o.products),t.xp6(1),t.Q6J("ngIf",o.errorMessage),t.xp6(2),t.Q6J("ngIf",o.products)("ngIfElse",i)}},directives:[q.O,p.O5,p.sg,s.rH,I.J],styles:['@charset "UTF-8";li.page-item.active[_ngcontent-%COMP%]   a.page-link[_ngcontent-%COMP%]{z-index:3;color:#fff;background-color:#fd0da1!important;border-color:#59fd0d!important}']}),r})();var L=n(5245),Y=n(4376),B=n(6186),H=n(9744);const w=[{path:"",component:k},{path:"add",component:P},{path:"edit/:id",component:P}];let z=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[p.ez,B.K,d.UX,Y.A0,d.u5,m.ZX,u.lN,f.LD,_.c,L.Ps,Z.ot,H.F,s.Bz.forChild(w)]]}),r})()}}]);