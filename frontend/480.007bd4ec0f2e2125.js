"use strict";(self.webpackChunkbiz_ke_frontend=self.webpackChunkbiz_ke_frontend||[]).push([[480],{8480:(tt,g,a)=>{a.r(g),a.d(g,{ClientsModule:()=>$});var d=a(9808),m=a(1083),l=a(3075),t=a(5e3),c=a(2340),b=a(520);let f=(()=>{class n{constructor(e){this._http=e}addClient(e){return this._http.post(c.N.apiUrl+"clients/",e)}updateClient(e,r){return this._http.put(c.N.apiUrl+"clients/"+r,e)}updateDisp(e){return this._http.patch(c.N.apiUrl+"clients/",e)}updatehiddenDisp(e){return this._http.patch(c.N.apiUrl+"clients/unhide",e)}delClient(e){return this._http.delete(c.N.apiUrl+"clients/"+e)}getClient(e){return this._http.get(c.N.apiUrl+"clients/"+e)}getClients(e){return this._http.get(c.N.apiUrl+"clients/",{params:e})}getCounties(e){return this._http.get(c.N.apiUrl+"county/",{params:e})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(b.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var T=a(1990),N=a(4701);function E(n,i){if(1&n&&(t.TgZ(0,"div",5),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorMessage," ")}}const U=function(n){return["edit/",n]};function F(n,i){if(1&n&&(t.TgZ(0,"tr",13)(1,"td",14),t._uU(2),t.qZA(),t.TgZ(3,"td",14),t._uU(4),t.qZA(),t.TgZ(5,"td",14),t._uU(6),t.qZA(),t.TgZ(7,"td",14),t._uU(8),t.qZA(),t.TgZ(9,"td",14),t._uU(10),t.qZA(),t.TgZ(11,"td",14),t._uU(12),t.qZA(),t.TgZ(13,"td",14),t._uU(14),t.qZA(),t.TgZ(15,"td",14),t._uU(16),t.qZA()()),2&n){const e=i.$implicit,r=i.index;t.Q6J("routerLink",t.VKq(9,U,e.id)),t.xp6(2),t.Oqu(r+1),t.xp6(2),t.Oqu(e.fullname),t.xp6(2),t.Oqu(e.phone),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Oqu(e.companyname),t.xp6(2),t.Oqu(e.countyname),t.xp6(2),t.Oqu(e.addresss),t.xp6(2),t.Oqu(e.details)}}function I(n,i){if(1&n&&(t.ynx(0),t.YNc(1,F,17,11,"tr",12),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.clients)}}function S(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",6)(2,"table",7)(3,"tbody")(4,"tr",8)(5,"th",9),t._uU(6,"#"),t.qZA(),t.TgZ(7,"th",9),t._uU(8,"Name"),t.qZA(),t.TgZ(9,"th",9),t._uU(10,"Phone"),t.qZA(),t.TgZ(11,"th",9),t._uU(12,"Email"),t.qZA(),t.TgZ(13,"th",9),t._uU(14,"Company "),t.qZA(),t.TgZ(15,"th",9),t._uU(16,"County "),t.qZA(),t.TgZ(17,"th",9),t._uU(18,"Address"),t.qZA(),t.TgZ(19,"th",9),t._uU(20,"Description"),t.qZA()(),t.YNc(21,I,2,1,"ng-container",10),t.qZA()()(),t.TgZ(22,"app-paginator",11),t.NdJ("newItemEvent",function(o){return t.CHM(e),t.oxw().paginatedCall(o)}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(21),t.Q6J("ngIf",e.clients),t.xp6(1),t.Q6J("datafromdb",e.paginator)}}function q(n,i){if(1&n&&(t.TgZ(0,"div",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.loadmessage)}}function y(n,i){if(1&n&&t.YNc(0,q,2,1,"div",15),2&n){const e=t.oxw();t.Q6J("ngIf",e.loading)}}let J=(()=>{class n{constructor(e,r){this.cserv=e,this.router=r,this.loading=!0,this.loadmessage="loading ...",this.ifSearched=!1,this.paginator={page:1,pageSize:10},this.options=[{searchName:"Client Name",searchParam:"fullname"},{searchName:"Phone",searchParam:"phone"},{searchName:"Email",searchParam:"email"}],this.labels={listname:"Client List",addBtname:"Add Client",searchPlaceholder:"Search Client"}}ngOnInit(){this.loadClients()}loadClients(){this.cserv.getClients(this.paginator).subscribe({next:e=>this.handleResp(e),error:e=>this.errorHandle(e)})}handleResp(e){this.loading=!1,this.clients=e.results,this.ifSearched||(this.clientStore=e),this.setPaginator(e)}errorHandle(e){this.loading=!1,this.errorMessage=e}paginatedCall(e){this.ifSearched=!1,this.setPaginator(this.clientStore),this.paginator.page=e.page,this.loadClients()}searchFunction(e){this.setPaginator(this.clientStore),this.errorMessage=null,this.ifSearched=!0,this.clients=this.clientStore.results,this.paginator[e.searchParam]=e.searchValue,this.clients=this.clients.filter(r=>{var o;let s=(null===(o=r[e.searchParam])||void 0===o?void 0:o.toString())||"";return new RegExp(e.searchValue,"i").test(s)}),0==this.clients.length&&(this.paginator.page=1,this.loading=!0,this.loadmessage="Performing a Wider Search",this.loadClients())}closeSearchFunction(){this.clients=this.clientStore.results,this.errorMessage=null,this.setPaginator(this.clientStore)}setPaginator(e){this.paginator={page:1,pageSize:10},this.paginator.page=e.currentPage,this.paginator.totalItems=e.totalItems,this.paginator.pageSize=e.pageSize}navigateAdd(){this.router.navigate(["/clients/add"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list-client"]],decls:6,vars:6,consts:[[1,"container-fluid","py-3"],[3,"labels","searchoptions","backenddata","searchEmit","closeEmit","navigateEmit"],["class","alert alert-danger my-3",4,"ngIf"],[4,"ngIf","ngIfElse"],["nodata",""],[1,"alert","alert-danger","my-3"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-bordered","text-nowrap"],[1,"blhead","rounded"],[1,"text-light"],[4,"ngIf"],[3,"datafromdb","newItemEvent"],["class","cursor",3,"routerLink",4,"ngFor","ngForOf"],[1,"cursor",3,"routerLink"],[1,"tpad"],["class","alert alert-warning text-danger my-3",4,"ngIf"],[1,"alert","alert-warning","text-danger","my-3"]],template:function(e,r){if(1&e&&(t.TgZ(0,"div",0)(1,"app-search-tab",1),t.NdJ("searchEmit",function(s){return r.searchFunction(s)})("closeEmit",function(){return r.closeSearchFunction()})("navigateEmit",function(){return r.navigateAdd()}),t.qZA(),t.YNc(2,E,2,1,"div",2),t.YNc(3,S,23,2,"ng-container",3),t.YNc(4,y,1,1,"ng-template",null,4,t.W1O),t.qZA()),2&e){const o=t.MAs(5);t.xp6(1),t.Q6J("labels",r.labels)("searchoptions",r.options)("backenddata",r.clients),t.xp6(1),t.Q6J("ngIf",r.errorMessage),t.xp6(1),t.Q6J("ngIf",r.clients&&!r.loading&&!r.errorMessage)("ngIfElse",o)}},directives:[T.O,d.O5,d.sg,m.rH,N.J],styles:[""]}),n})();var M=a(3034),Q=a(5906),_=a(7261),u=a(7322),C=a(7531),h=a(4376),v=a(7423);function Y(n,i){if(1&n&&(t.TgZ(0,"div",23),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorMessage," ")}}function L(n,i){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorFirstNameControl()," ")}}function k(n,i){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorSecondNameControl()," ")}}function w(n,i){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorPhoneControl()," ")}}function P(n,i){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorEmailControl()," ")}}function O(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"ng-option",26),t._uU(2),t.qZA(),t.BQk()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("value",1*e.code),t.xp6(1),t.hij(" ",e.name.toUpperCase()," ")}}function B(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"ng-option",24),t._uU(2,"Please Select County"),t.qZA(),t.YNc(3,O,3,2,"ng-container",25),t.BQk()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.counties)}}function H(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().delClient()}),t._uU(2,"Delete"),t.qZA(),t.TgZ(3,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().editClient()}),t._uU(4,"Save Changes "),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.errorMessage||e.loading),t.xp6(2),t.Q6J("disabled",e.clientForm.invalid||e.clientForm.pristine)}}function z(n,i){1&n&&(t.ynx(0),t._UZ(1,"i",31),t.TgZ(2,"span",32),t._uU(3,"Loading..."),t.qZA(),t.BQk())}function j(n,i){1&n&&t._uU(0," Add Client ")}function D(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().addClient()}),t.YNc(1,z,4,0,"ng-container",21),t.YNc(2,j,1,0,"ng-template",null,30,t.W1O),t.qZA()}if(2&n){const e=t.MAs(3),r=t.oxw();t.Q6J("disabled",r.clientForm.invalid||r.errorMessage||r.loading),t.xp6(1),t.Q6J("ngIf",r.loading)("ngIfElse",e)}}let Z=(()=>{class n{constructor(e,r,o,s,p){this.customerFb=e,this.router=r,this.snakBar=o,this.ctServ=s,this.route=p,this.matcher=new Q.n,this.loading=!1,this.clientForm=this.customerFb.group({nameone:["",[l.kI.required,l.kI.minLength(2)]],nametwo:["",[l.kI.required,l.kI.minLength(2)]],phone:["",[l.kI.required,(0,M.t)()]],email:["",l.kI.email],details:[""],companyname:[""],addresss:[""],location:[""],department:[""]}),this.title="Add Client"}ngOnInit(){this.loadCounties(),this.customerId=this.route.snapshot.paramMap.get("id"),this.customerId&&(this.title="Edit Customer",this.loadClient()),this.clientForm.valueChanges.subscribe(()=>{this.errorMessage=!1})}loadCounties(){this.ctServ.getCounties({page:1,pageSize:1e4}).subscribe({next:e=>this.counties=e.results,error:e=>this.errorHandle(e)})}loadClient(){this.loading=!0,this.ctServ.getClient(this.customerId).subscribe({next:e=>this.respClient(e),error:e=>this.errorHandle(e)})}addClient(){this.loading=!0,this.checkFunction(),this.ctServ.addClient(this.clientForm.value).subscribe({next:e=>this.handleResp(e),error:e=>this.errorHandle(e)})}editClient(){this.loading=!0,this.checkFunction(),this.ctServ.updateClient(this.clientForm.value,this.customerId).subscribe({next:r=>this.handleResp(r),error:r=>this.errorHandle(r)})}delClient(){this.loading=!0,this.ctServ.delClient(this.customerId).subscribe({next:this.handleResp.bind(this),error:this.errorHandle.bind(this)})}errorFirstNameControl(){var e,r;return(null===(e=this.clientForm.get("nameone"))||void 0===e?void 0:e.hasError("required"))?"You must provide a value":(null===(r=this.clientForm.get("nametwo"))||void 0===r?void 0:r.hasError("minlength"))?"You must provide atleast 2 characters":""}errorSecondNameControl(){var e,r;return(null===(e=this.clientForm.get("nametwo"))||void 0===e?void 0:e.hasError("required"))?"You must provide a value":(null===(r=this.clientForm.get("nametwo"))||void 0===r?void 0:r.hasError("minlength"))?"You must provide atleast 2 characters":""}errorPhoneControl(){var e,r;return(null===(e=this.clientForm.get("phone"))||void 0===e?void 0:e.hasError("required"))?"You must provide a value":(null===(r=this.clientForm.get("phone"))||void 0===r?void 0:r.hasError("notPhone"))?"You must a valid Phone Number":""}errorEmailControl(){var e,r;return(null===(e=this.clientForm.get("email"))||void 0===e?void 0:e.hasError("required"))?"You must provide a value":(null===(r=this.clientForm.get("email"))||void 0===r?void 0:r.hasError("email"))?"You must a valid email":""}openSnakBar(e,r){this.snakBar.open(e,r,{duration:1e3})}respClient(e){this.loading=!1,this.clientForm.patchValue({nameone:e.nameone,nametwo:e.nametwo,phone:e.phone,email:e.email,companyname:e.companyname,location:e.location,addresss:e.addresss,department:e.department,details:e.details})}handleResp(e){this.loading=!1,this.openSnakBar(e.message,"Dismiss"),this.router.navigate(["/clients"])}errorHandle(e){this.loading=!1,this.errorMessage=e}checkFunction(){var e,r;(null===(e=this.clientForm.get("location"))||void 0===e?void 0:e.value)||null===(r=this.clientForm.get("location"))||void 0===r||r.setValue(null)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(m.F0),t.Y36(_.ux),t.Y36(f),t.Y36(m.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-edit-client"]],decls:62,vars:16,consts:[[1,"d-lg-flex","text-secondary","py-2"],[1,"flex-grow-1"],["type","button","routerLink","/clients",1,"btn","btn-outline-success","btn-sm"],["aria-hidden","true",1,"fa","fa-chevron-left"],["class","alert alert-danger my-3",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-lg-6"],["appearance","outline",1,"w-100"],["matInput","","placeholder","Enter First Name","formControlName","nameone",3,"errorStateMatcher"],[4,"ngIf"],["matInput","","placeholder","Enter Last Name","formControlName","nametwo",3,"errorStateMatcher"],["matInput","","placeholder","Enter Phone Number","formControlName","phone",3,"errorStateMatcher"],["matInput","","placeholder","Enter Email","formControlName","email",3,"errorStateMatcher"],["matInput","","placeholder","Company Name","formControlName","companyname",3,"errorStateMatcher"],["matInput","","placeholder","Department Name","formControlName","department",3,"errorStateMatcher"],[1,"col-lg-6","pt-1"],["formControlName","location"],["matInput","","placeholder","Enter Branch Adderess","formControlName","addresss",3,"errorStateMatcher"],[1,"col-lg-12"],["matInput","","formControlName","details"],[4,"ngIf","ngIfElse"],["noStore",""],[1,"alert","alert-danger","my-3"],["value","","disabled",""],[4,"ngFor","ngForOf"],[3,"value"],["type","button","mat-flat-button","","color","warn",1,"me-2",3,"disabled","click"],["type","button","mat-flat-button","","color","primary",3,"disabled","click"],["mat-flat-button","","color","primary","type","button",1,"me-3",3,"disabled","click"],["notload",""],[1,"fa","fa-spinner","fa-spin","fa-1x","me-2"],[1,""]],template:function(e,r){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t._UZ(3,"i",3),t._uU(4," Back "),t.qZA()()(),t.YNc(5,Y,2,1,"div",4),t.TgZ(6,"form",5)(7,"div",6)(8,"div",7)(9,"mat-form-field",8)(10,"mat-label"),t._uU(11,"First Name"),t.qZA(),t._UZ(12,"input",9),t.YNc(13,L,2,1,"mat-error",10),t.qZA()(),t.TgZ(14,"div",7)(15,"mat-form-field",8)(16,"mat-label"),t._uU(17,"Last Name"),t.qZA(),t._UZ(18,"input",11),t.YNc(19,k,2,1,"mat-error",10),t.qZA()()(),t.TgZ(20,"div",6)(21,"div",7)(22,"mat-form-field",8)(23,"mat-label"),t._uU(24,"Phone Number"),t.qZA(),t._UZ(25,"input",12),t.YNc(26,w,2,1,"mat-error",10),t.qZA()(),t.TgZ(27,"div",7)(28,"mat-form-field",8)(29,"mat-label"),t._uU(30,"Email"),t.qZA(),t._UZ(31,"input",13),t.YNc(32,P,2,1,"mat-error",10),t.qZA()()(),t.TgZ(33,"div",6)(34,"div",7)(35,"mat-form-field",8)(36,"mat-label"),t._uU(37,"Company Name"),t.qZA(),t._UZ(38,"input",14),t.qZA()(),t.TgZ(39,"div",7)(40,"mat-form-field",8)(41,"mat-label"),t._uU(42,"Client's Department"),t.qZA(),t._UZ(43,"input",15),t.qZA()()(),t.TgZ(44,"div",6)(45,"div",16)(46,"ng-select",17),t.YNc(47,B,4,1,"ng-container",10),t.qZA()(),t.TgZ(48,"div",7)(49,"mat-form-field",8)(50,"mat-label"),t._uU(51,"Client Company Address"),t.qZA(),t._UZ(52,"input",18),t.qZA()()(),t.TgZ(53,"div",6)(54,"div",19)(55,"mat-form-field",8)(56,"mat-label"),t._uU(57,"Describe The Client"),t.qZA(),t._UZ(58,"textarea",20),t.qZA()()(),t.YNc(59,H,5,2,"ng-container",21),t.YNc(60,D,4,3,"ng-template",null,22,t.W1O),t.qZA()),2&e){const o=t.MAs(61);let s,p,x,A;t.xp6(5),t.Q6J("ngIf",r.errorMessage),t.xp6(1),t.Q6J("formGroup",r.clientForm),t.xp6(6),t.Q6J("errorStateMatcher",r.matcher),t.xp6(1),t.Q6J("ngIf",null==(s=r.clientForm.get("nameone"))?null:s.invalid),t.xp6(5),t.Q6J("errorStateMatcher",r.matcher),t.xp6(1),t.Q6J("ngIf",null==(p=r.clientForm.get("nametwo"))?null:p.invalid),t.xp6(6),t.Q6J("errorStateMatcher",r.matcher),t.xp6(1),t.Q6J("ngIf",null==(x=r.clientForm.get("phone"))?null:x.invalid),t.xp6(5),t.Q6J("errorStateMatcher",r.matcher),t.xp6(1),t.Q6J("ngIf",null==(A=r.clientForm.get("email"))?null:A.invalid),t.xp6(6),t.Q6J("errorStateMatcher",r.matcher),t.xp6(5),t.Q6J("errorStateMatcher",r.matcher),t.xp6(4),t.Q6J("ngIf",r.counties),t.xp6(5),t.Q6J("errorStateMatcher",r.matcher),t.xp6(7),t.Q6J("ngIf",r.customerId)("ngIfElse",o)}},directives:[m.rH,d.O5,l._Y,l.JL,l.sg,u.KE,u.hX,C.Nt,l.Fj,l.JJ,l.u,u.TO,h.w9,h.jq,d.sg,v.lW],styles:[".mat-form-field-flex>.mat-form-field-infix{padding:.5em 0!important}  .mat-form-field-label-wrapper{top:-1.4em}  .mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{transform:translateY(-1.1em) scale(.75);width:133.33333%}"]}),n})();var R=a(5245),V=a(4107),W=a(6856),X=a(7446),G=a(9744);const K=[{path:"",component:J},{path:"add",component:Z},{path:"edit/:id",component:Z},{path:"**",redirectTo:"",pathMatch:"full"}];let $=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.ez,l.UX,h.A0,_.ZX,u.lN,V.LD,C.c,R.Ps,v.ot,W.FA,X.p9,G.F,m.Bz.forChild(K)]]}),n})()}}]);