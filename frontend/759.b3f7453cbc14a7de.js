"use strict";(self.webpackChunkbiz_ke_frontend=self.webpackChunkbiz_ke_frontend||[]).push([[759],{6759:(z,m,n)=>{n.r(m),n.d(m,{CategoriesModule:()=>q});var d=n(9808),l=n(1083),s=n(3075),v=n(5906),t=n(5e3),h=n(7261),c=n(2340),x=n(520);let u=(()=>{class a{constructor(e){this.http=e}addCategory(e){return this.http.post(c.N.apiUrl+"productcateg/",e)}updateCateg(e,r){return this.http.put(c.N.apiUrl+"productcateg/"+r,e)}delCategory(e){return this.http.delete(c.N.apiUrl+"productcateg/"+e)}getCategory(e){return this.http.get(c.N.apiUrl+"productcateg/"+e)}getCategories(e){return this.http.get(c.N.apiUrl+"productcateg/",{params:e})}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(x.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var p=n(7322),f=n(7531),C=n(7423);function y(a,o){if(1&a&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorName()," ")}}function b(a,o){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().delCateg()}),t._uU(2,"Delete"),t.qZA(),t.TgZ(3,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().editCateg()}),t._uU(4,"Save Changes "),t.qZA(),t.BQk()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.errMessage||e.loading),t.xp6(2),t.Q6J("disabled",e.categForm.invalid||e.categForm.pristine)}}function Z(a,o){1&a&&(t.ynx(0),t._UZ(1,"i",15),t.TgZ(2,"span",16),t._uU(3,"Loading..."),t.qZA(),t.BQk())}function A(a,o){1&a&&t._uU(0," Add Category ")}function T(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){return t.CHM(e),t.oxw().addCateg()}),t.YNc(1,Z,4,0,"ng-container",9),t.YNc(2,A,1,0,"ng-template",null,14,t.W1O),t.qZA()}if(2&a){const e=t.MAs(3),r=t.oxw();t.Q6J("disabled",r.categForm.invalid||r.errMessage||r.loading),t.xp6(1),t.Q6J("ngIf",r.loading)("ngIfElse",e)}}let _=(()=>{class a{constructor(e,r,i,g,B){this.categFb=e,this.router=r,this.snakBar=i,this.ctServ=g,this.route=B,this.matcher=new v.n,this.loading=!1,this.categForm=this.categFb.group({name:["",[s.kI.required,s.kI.minLength(2)]],details:[""]})}ngOnInit(){this.categId=this.route.snapshot.paramMap.get("id"),this.categId&&this.loadCategory(),this.categForm.valueChanges.subscribe(()=>{this.errMessage=!1})}loadCategory(){this.loading=!0,this.ctServ.getCategory(this.categId).subscribe({next:e=>this.respHandleCustomer(e),error:e=>this.errorHandle(e)})}addCateg(){this.loading=!0,this.ctServ.addCategory(this.categForm.value).subscribe({next:e=>this.handleResp(e),error:e=>this.errorHandle(e)})}editCateg(){this.loading=!0,this.ctServ.updateCateg(this.categForm.value,this.categId).subscribe({next:r=>this.handleResp(r),error:r=>this.errorHandle(r)})}delCateg(){this.loading=!0,this.ctServ.delCategory(this.categId).subscribe({next:e=>this.handleResp(e),error:e=>this.errorHandle(e)})}errorName(){var e,r;return(null===(e=this.categForm.get("nameone"))||void 0===e?void 0:e.hasError("required"))?"You must provide a value":(null===(r=this.categForm.get("nametwo"))||void 0===r?void 0:r.hasError("minlength"))?"You must provide atleast 2 characters":""}openSnakBar(e,r){this.snakBar.open(e,r,{duration:2500})}respHandleCustomer(e){this.loading=!1,this.categForm.patchValue({name:e.name,details:e.details})}handleResp(e){this.loading=!1,this.openSnakBar(e.message,"Dismiss"),this.router.navigate(["/products/categories"])}errorHandle(e){this.loading=!1,this.errMessage=e}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(s.qu),t.Y36(l.F0),t.Y36(h.ux),t.Y36(u),t.Y36(l.gz))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-add-edit-category"]],decls:18,vars:5,consts:[[1,"d-lg-flex","text-secondary","py-2"],[1,"flex-grow-1"],["type","button","routerLink","/products/categories",1,"btn","btn-outline-success","btn-sm"],["aria-hidden","true",1,"fa","fa-chevron-left"],[3,"formGroup"],["appearance","outline",1,"w-100"],["matInput","","placeholder","Enter Category Name","formControlName","name",3,"errorStateMatcher"],[4,"ngIf"],["matInput","","formControlName","details"],[4,"ngIf","ngIfElse"],["noCategory",""],["type","button","mat-flat-button","","color","warn",1,"me-2",3,"disabled","click"],["type","button","mat-flat-button","","color","primary",3,"disabled","click"],["mat-flat-button","","color","primary","type","button",1,"me-3",3,"disabled","click"],["notload",""],[1,"fa","fa-spinner","fa-spin","fa-1x","me-2"],[1,""]],template:function(e,r){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t._UZ(3,"i",3),t._uU(4," Back "),t.qZA()()(),t.TgZ(5,"form",4)(6,"mat-form-field",5)(7,"mat-label"),t._uU(8,"Category Name"),t.qZA(),t._UZ(9,"input",6),t.YNc(10,y,2,1,"mat-error",7),t.qZA(),t.TgZ(11,"mat-form-field",5)(12,"mat-label"),t._uU(13,"Describe The Category"),t.qZA(),t._UZ(14,"textarea",8),t.qZA(),t.YNc(15,b,5,2,"ng-container",9),t.YNc(16,T,4,3,"ng-template",null,10,t.W1O),t.qZA()),2&e){const i=t.MAs(17);let g;t.xp6(5),t.Q6J("formGroup",r.categForm),t.xp6(4),t.Q6J("errorStateMatcher",r.matcher),t.xp6(1),t.Q6J("ngIf",null==(g=r.categForm.get("name"))?null:g.invalid),t.xp6(5),t.Q6J("ngIf",r.categId)("ngIfElse",i)}},directives:[l.rH,s._Y,s.JL,s.sg,p.KE,p.hX,f.Nt,s.Fj,s.JJ,s.u,d.O5,p.TO,C.lW],styles:[".mat-form-field-flex>.mat-form-field-infix{padding:.5em 0!important}  .mat-form-field-label-wrapper{top:-1.4em}  .mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{transform:translateY(-1.1em) scale(.75);width:133.33333%}"]}),a})();var I=n(1990),E=n(4701);function S(a,o){if(1&a&&(t.TgZ(0,"div",5),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" ",e.errorMessage," ")}}const F=function(a){return["edit/",a]};function N(a,o){if(1&a&&(t.TgZ(0,"tr",13)(1,"td",14),t._uU(2),t.qZA(),t.TgZ(3,"td",14),t._uU(4),t.qZA(),t.TgZ(5,"td",14),t._uU(6),t.qZA()()),2&a){const e=o.$implicit,r=o.index;t.Q6J("routerLink",t.VKq(4,F,e.id)),t.xp6(2),t.Oqu(r+1),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.details)}}function J(a,o){if(1&a&&(t.ynx(0),t.YNc(1,N,7,6,"tr",12),t.BQk()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.categories)}}function U(a,o){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",6)(2,"table",7)(3,"tbody")(4,"tr",8)(5,"th",9),t._uU(6,"#"),t.qZA(),t.TgZ(7,"th",9),t._uU(8,"Name"),t.qZA(),t.TgZ(9,"th",9),t._uU(10,"Description"),t.qZA()(),t.YNc(11,J,2,1,"ng-container",10),t.qZA()()(),t.TgZ(12,"app-paginator",11),t.NdJ("newItemEvent",function(i){return t.CHM(e),t.oxw().paginatedCall(i)}),t.qZA(),t.BQk()}if(2&a){const e=t.oxw();t.xp6(11),t.Q6J("ngIf",e.categories),t.xp6(1),t.Q6J("datafromdb",e.paginator)}}function L(a,o){if(1&a&&(t.TgZ(0,"div",16),t._uU(1),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(e.loadmessage)}}function M(a,o){if(1&a&&t.YNc(0,L,2,1,"div",15),2&a){const e=t.oxw();t.Q6J("ngIf",e.loading)}}let Y=(()=>{class a{constructor(e,r){this.catServ=e,this.router=r,this.loading=!0,this.loadmessage="loading ...",this.ifSearched=!1,this.paginator={page:1,pageSize:10},this.options=[{searchName:"Category Name",searchParam:"name"}],this.labels={listname:"Product Category List",addBtname:"Add Category",searchPlaceholder:"Search Category"}}ngOnInit(){this.loadCategory()}loadCategory(){this.catServ.getCategories(this.paginator).subscribe({next:e=>this.handleResp(e),error:e=>this.errorHandle(e)})}handleResp(e){this.loading=!1,this.categories=e.results,this.ifSearched||(this.categorieStore=e),this.setPaginator(e)}errorHandle(e){this.loading=!1,this.errorMessage=e}paginatedCall(e){this.ifSearched=!1,this.setPaginator(this.categorieStore),this.paginator.page=e.page,this.loadCategory()}searchFunction(e){this.setPaginator(this.categorieStore),this.errorMessage=null,this.ifSearched=!0,this.categories=this.categorieStore.results,this.paginator[e.searchParam]=e.searchValue,this.categories=this.categories.filter(r=>{var i;let g=(null===(i=r[e.searchParam])||void 0===i?void 0:i.toString())||"";return new RegExp(e.searchValue,"i").test(g)}),0==this.categories.length&&(this.paginator.page=1,this.loading=!0,this.loadmessage="Performing a Wider Search",this.loadCategory())}closeSearchFunction(){this.categories=this.categorieStore.results,this.errorMessage=null,this.setPaginator(this.categorieStore)}setPaginator(e){this.paginator={page:1,pageSize:10},this.paginator.page=e.currentPage,this.paginator.totalItems=e.totalItems,this.paginator.pageSize=e.pageSize}navigateAdd(){this.router.navigate(["/products/categories/add"])}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(u),t.Y36(l.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-list-categories"]],decls:6,vars:6,consts:[[1,"container-fluid","py-3"],[3,"labels","searchoptions","backenddata","searchEmit","closeEmit","navigateEmit"],["class","alert alert-danger ",4,"ngIf"],[4,"ngIf","ngIfElse"],["nodata",""],[1,"alert","alert-danger"],[1,"table-responsive"],[1,"table","table-striped","table-hover","table-bordered","text-nowrap"],[1,"blhead","rounded"],[1,"text-light"],[4,"ngIf"],[3,"datafromdb","newItemEvent"],["class","cursor",3,"routerLink",4,"ngFor","ngForOf"],[1,"cursor",3,"routerLink"],[1,"tpad"],["class","alert alert-warning text-danger my-3",4,"ngIf"],[1,"alert","alert-warning","text-danger","my-3"]],template:function(e,r){if(1&e&&(t.TgZ(0,"div",0)(1,"app-search-tab",1),t.NdJ("searchEmit",function(g){return r.searchFunction(g)})("closeEmit",function(){return r.closeSearchFunction()})("navigateEmit",function(){return r.navigateAdd()}),t.qZA(),t.YNc(2,S,2,1,"div",2),t.YNc(3,U,13,2,"ng-container",3),t.YNc(4,M,1,1,"ng-template",null,4,t.W1O),t.qZA()),2&e){const i=t.MAs(5);t.xp6(1),t.Q6J("labels",r.labels)("searchoptions",r.options)("backenddata",r.categories),t.xp6(1),t.Q6J("ngIf",r.errorMessage),t.xp6(1),t.Q6J("ngIf",r.categories)("ngIfElse",i)}},directives:[I.O,d.O5,d.sg,l.rH,E.J],styles:[""]}),a})();var Q=n(5245),k=n(4107),P=n(4376),H=n(6186),O=n(9744);const w=[{path:"",component:Y},{path:"add",component:_},{path:"edit/:id",component:_}];let q=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[d.ez,H.K,s.UX,P.A0,s.u5,h.ZX,p.lN,k.LD,f.c,Q.Ps,C.ot,O.F,l.Bz.forChild(w)]]}),a})()}}]);