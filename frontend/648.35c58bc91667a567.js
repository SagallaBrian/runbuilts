"use strict";(self.webpackChunksuluhi_admin_frontend=self.webpackChunksuluhi_admin_frontend||[]).push([[648],{2648:(v,f,a)=>{a.r(f),a.d(f,{ModulesModule:()=>j});var t=a(6895),c=a(4859),m=a(6354),x=a(5412),d=a(4006),e=a(4650),g=a(874),A=a(8057),T=a(8796);function E(n,u){if(1&n&&(e.ynx(0),e.TgZ(1,"div",21),e._UZ(2,"app-error-occured",22),e.qZA(),e.BQk()),2&n){const o=e.oxw();e.xp6(2),e.Q6J("errorMessage",o.errorMessage)}}function F(n,u){1&n&&(e.TgZ(0,"div",23),e._uU(1," Module is required. "),e.qZA())}function I(n,u){if(1&n&&(e.TgZ(0,"ng-option",25),e._uU(1),e.qZA()),2&n){const o=e.oxw().$implicit;e.Q6J("value",o._id),e.xp6(1),e.hij(" ",o.modulename," ")}}function i(n,u){if(1&n&&(e.ynx(0),e.YNc(1,I,2,2,"ng-option",24),e.BQk()),2&n){const o=u.$implicit,s=e.oxw();e.xp6(1),e.Q6J("ngIf",o._id!==s.moduleId)}}function M(n,u){1&n&&(e.TgZ(0,"div",23),e._uU(1," Module Link is required. "),e.qZA())}function r(n,u){1&n&&(e.TgZ(0,"div",23),e._uU(1," Module Order is required. "),e.qZA())}function p(n,u){1&n&&(e.TgZ(0,"div",23),e._uU(1," Description is required. "),e.qZA())}function _(n,u){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"button",26),e.NdJ("click",function(){e.CHM(o);const l=e.oxw();return e.KtG(l.deleteModule())}),e._uU(2,"Delete Module"),e.qZA(),e.TgZ(3,"button",27),e.NdJ("click",function(){e.CHM(o);const l=e.oxw();return e.KtG(l.updateModule())}),e._uU(4,"Edit Module"),e.qZA(),e.BQk()}if(2&n){const o=e.oxw();e.xp6(3),e.Q6J("disabled",o.moduleForm.invalid)}}function q(n,u){if(1&n){const o=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(o);const l=e.oxw();return e.KtG(l.addModule())}),e._uU(1,"Add Module"),e.qZA()}if(2&n){const o=e.oxw();e.Q6J("disabled",o.moduleForm.invalid)}}let O=(()=>{class n{constructor(o,s,l,h,Z){this.formBuilder=o,this.dialogRef=s,this.router=l,this.moduleService=h,this.InjectedData=Z,this.moduleId="",this.loading=!0,this.title="Add Module",this.today=(new Date).toISOString().substring(0,10)}ngOnInit(){this.moduleForm=this.formBuilder.group({modulename:["",d.kI.required],parentmodule:[],modulelink:["",d.kI.required],moduleorder:[0,d.kI.required],description:[""]}),this.moduleForm.reset(),this.moduleId=this.InjectedData.selectedmodule._id,this.modules=this.InjectedData.listmodules,this.moduleId&&(this.title="Edit Module",this.moduleForm.patchValue(this.InjectedData.selectedmodule))}addModule(){this.moduleForm.valid&&this.moduleService.createModule(this.moduleForm.value).subscribe({next:s=>{this.moduleForm.reset(),this.dialogRef.close(!0),this.router.navigate(["/settings/modules"])},error:s=>{this.errorMessage=s}})}updateModule(){this.moduleService.updateModule(this.moduleId,this.moduleForm.value).subscribe({next:s=>{this.dialogRef.close(!0),this.router.navigate(["/settings/modules"])},error:s=>{this.errorMessage=s}})}deleteModule(){this.moduleService.deleteModule(this.moduleId).subscribe({next:o=>{this.dialogRef.close(!0),this.router.navigate(["/settings/modules"])},error:o=>{this.errorMessage=o}})}static#e=this.\u0275fac=function(s){return new(s||n)(e.Y36(d.qu),e.Y36(x.so),e.Y36(m.F0),e.Y36(g.s),e.Y36(x.WI))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-edit-modules"]],decls:36,vars:11,consts:[["mat-dialog-title",""],[1,"mat-typography"],[4,"ngIf"],[3,"formGroup"],[1,"mb-3"],["for","modulename",1,"form-label"],["type","text","id","modulename","formControlName","modulename","placeholder","Enter Module",1,"form-control"],["class","sul-error",4,"ngIf"],[1,"form-label"],["formControlName","parentmodule","placeholder","Select Parent Module"],[4,"ngFor","ngForOf"],["for","modulelink",1,"form-label"],["type","text","id","modulelink","formControlName","modulelink","placeholder","Enter Module",1,"form-control"],["for","moduleorder",1,"form-label"],["type","number","id","moduleorder","formControlName","moduleorder","placeholder","Enter Module",1,"form-control"],["for","description",1,"form-label"],["id","description","formControlName","description","placeholder","Enter Description",1,"form-control"],["align","end"],["mat-stroked-button","","mat-dialog-close","",3,"mat-dialog-close"],[4,"ngIf","ngIfElse"],["adding",""],[1,"py-3"],[3,"errorMessage"],[1,"sul-error"],[3,"value",4,"ngIf"],[3,"value"],["mat-stroked-button","","color","warn",3,"click"],["color","accent","mat-stroked-button","",3,"disabled","click"],["mat-stroked-button","","color","primary",3,"disabled","click"]],template:function(s,l){if(1&s&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e.TgZ(2,"mat-dialog-content",1),e.YNc(3,E,3,1,"ng-container",2),e.TgZ(4,"form",3)(5,"div",4)(6,"label",5),e._uU(7,"Module"),e.qZA(),e._UZ(8,"input",6),e.YNc(9,F,2,0,"div",7),e.qZA(),e.TgZ(10,"div",4)(11,"label",8),e._uU(12,"Parent Module"),e.qZA(),e.TgZ(13,"ng-select",9),e.YNc(14,i,2,1,"ng-container",10),e.qZA()(),e.TgZ(15,"div",4)(16,"label",11),e._uU(17,"Module Link"),e.qZA(),e._UZ(18,"input",12),e.YNc(19,M,2,0,"div",7),e.qZA(),e.TgZ(20,"div",4)(21,"label",13),e._uU(22,"Module Order"),e.qZA(),e._UZ(23,"input",14),e.YNc(24,r,2,0,"div",7),e.qZA(),e.TgZ(25,"div",4)(26,"label",15),e._uU(27,"Description"),e.qZA(),e._UZ(28,"textarea",16),e.YNc(29,p,2,0,"div",7),e.qZA()()(),e.TgZ(30,"mat-dialog-actions",17)(31,"button",18),e._uU(32,"Cancel"),e.qZA(),e.YNc(33,_,5,1,"ng-container",19),e.YNc(34,q,2,1,"ng-template",null,20,e.W1O),e.qZA()),2&s){const h=e.MAs(35);let Z,C,b,y;e.xp6(1),e.Oqu(l.title),e.xp6(2),e.Q6J("ngIf",l.errorMessage),e.xp6(1),e.Q6J("formGroup",l.moduleForm),e.xp6(5),e.Q6J("ngIf",(null==(Z=l.moduleForm.get("modulename"))?null:Z.invalid)&&(null==(Z=l.moduleForm.get("modulename"))?null:Z.touched)),e.xp6(5),e.Q6J("ngForOf",l.modules),e.xp6(5),e.Q6J("ngIf",(null==(C=l.moduleForm.get("modulelink"))?null:C.invalid)&&(null==(C=l.moduleForm.get("modulelink"))?null:C.touched)),e.xp6(5),e.Q6J("ngIf",(null==(b=l.moduleForm.get("moduleorder"))?null:b.invalid)&&(null==(b=l.moduleForm.get("moduleorder"))?null:b.touched)),e.xp6(5),e.Q6J("ngIf",(null==(y=l.moduleForm.get("description"))?null:y.invalid)&&(null==(y=l.moduleForm.get("description"))?null:y.touched)),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("ngIf",l.moduleId)("ngIfElse",h)}},dependencies:[t.sg,t.O5,d._Y,d.Fj,d.wV,d.JJ,d.JL,d.sg,d.u,A.A,T.w9,T.jq,x.ZT,x.uh,x.xY,x.H8,c.lW]})}return n})();var J=a(7997),N=a(5511),Q=a(295),U=a(4333);function k(n,u){1&n&&(e.ynx(0),e.TgZ(1,"div",8),e._UZ(2,"app-sul-loader"),e.qZA(),e.BQk())}function P(n,u){if(1&n&&(e.ynx(0),e.TgZ(1,"div",8),e._UZ(2,"app-error-occured",10),e.qZA(),e.BQk()),2&n){const o=e.oxw(2);e.xp6(2),e.Q6J("errorMessage",o.errorMessage)}}function L(n,u){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"tr",18)(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td")(13,"button",19),e.NdJ("click",function(){const h=e.CHM(o).$implicit,Z=e.oxw(4);return e.KtG(Z.openDialog(h))}),e._uU(14,"Edit"),e.qZA()()(),e.BQk()}if(2&n){const o=u.$implicit,s=u.index,l=e.oxw(4);e.xp6(3),e.Oqu(s+1),e.xp6(2),e.Oqu(o.modulename),e.xp6(2),e.Oqu(o.parentmodule?l.getModuleName(o.parentmodule):"----"),e.xp6(2),e.Oqu(o.moduleorder),e.xp6(2),e.Oqu(o.modulelink)}}const S=function(n,u){return{itemsPerPage:10,currentPage:n,totalItems:u}};function Y(n,u){if(1&n){const o=e.EpF();e.ynx(0),e.TgZ(1,"div",12)(2,"table",13)(3,"thead",14)(4,"tr")(5,"th"),e._uU(6,"#"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Name"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Parent Module"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Order"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Link"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Action"),e.qZA()()(),e.TgZ(17,"tbody"),e.YNc(18,L,15,5,"ng-container",15),e.ALo(19,"paginate"),e.qZA()()(),e.TgZ(20,"div",16)(21,"pagination-controls",17),e.NdJ("pageChange",function(l){e.CHM(o);const h=e.oxw(3);return e.KtG(h.onPageChange(l))}),e.qZA()(),e.BQk()}if(2&n){const o=e.oxw(3);e.xp6(18),e.Q6J("ngForOf",e.xi3(19,1,o.modules.results,e.WLB(4,S,o.currentPage,o.modules.totalItems)))}}function D(n,u){1&n&&e._UZ(0,"app-no-data-found",20),2&n&&e.Q6J("dataLabel","Module")}function w(n,u){if(1&n&&(e.YNc(0,Y,22,7,"ng-container",6),e.YNc(1,D,1,1,"ng-template",null,11,e.W1O)),2&n){const o=e.MAs(2),s=e.oxw(2);e.Q6J("ngIf",s.modules&&s.modules.results.length)("ngIfElse",o)}}function B(n,u){if(1&n&&(e.YNc(0,P,3,1,"ng-container",6),e.YNc(1,w,3,2,"ng-template",null,9,e.W1O)),2&n){const o=e.MAs(2),s=e.oxw();e.Q6J("ngIf",s.errorMessage)("ngIfElse",o)}}let V=(()=>{class n{constructor(o,s){this.moduleService=o,this.dialog=s,this.loading=!0,this.defmodule={modulename:"",modulelink:"",moduleorder:0,_id:"",parentmodule:"",description:""},this.currentPage=1,this.pageSize=1e5,this.options=[{name:"Module Title",formname:"title",type:"text"},{name:"Module Date",formname:"taskDate",type:"date"},{name:"Status",formname:"modulestatus",type:"select",selectoptions:[{val:"pending",name:"Pending"},{val:"progress",name:"Progress"},{val:"complete",name:"Complete"}]}]}ngOnInit(){this.loadModules({})}loadModules(o){this.loading=!0,this.moduleService.getAllModules(this.currentPage,this.pageSize,o).subscribe({next:s=>{this.modules=s,this.moduleStore=s},error:s=>{this.errorMessage=s,this.loading=!1},complete:()=>{this.loading=!1}})}searchFunction(o){this.loadModules(o)}onPageChange(o){this.currentPage=o;const s=10*(o-1);this.modules=this.moduleStore,this.modules.results.slice(s,10)}openDialog(o){this.dialog.open(O,{data:{selectedmodule:o,listmodules:this.modules.results},minWidth:"70%"}).afterClosed().subscribe(s=>{s&&(this.currentPage=1,this.loadModules({}))})}getModuleName(o){return this.modules.results.find(s=>s._id===o)?.modulename||""}static#e=this.\u0275fac=function(s){return new(s||n)(e.Y36(g.s),e.Y36(x.uw))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-list-modules"]],decls:13,vars:3,consts:[[1,"py-4"],[1,"d-flex"],[1,"flex-grow-1"],[1,"text-secondary","fw-normal","mb-1"],[3,"searchOptions","searchEmit"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[4,"ngIf","ngIfElse"],["loadedContent",""],[1,"py-3"],["noError",""],[3,"errorMessage"],["nodata",""],[1,"table-responsive"],[1,"table","table-bordered","table-striped","text-nowrap"],[1,"thead"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","pt-3"],[1,"my-pagination",3,"pageChange"],[1,"cursor-pointer"],[1,"edit-btn",3,"click"],[3,"dataLabel"]],template:function(s,l){if(1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Modules"),e.qZA()(),e.ynx(5),e.TgZ(6,"app-search-tab",4),e.NdJ("searchEmit",function(Z){return l.searchFunction(Z)}),e.qZA(),e.BQk(),e.TgZ(7,"div")(8,"button",5),e.NdJ("click",function(){return l.openDialog(l.defmodule)}),e._uU(9," Add Module"),e.qZA()()(),e.YNc(10,k,3,0,"ng-container",6),e.YNc(11,B,3,2,"ng-template",null,7,e.W1O),e.qZA()),2&s){const h=e.MAs(12);e.xp6(6),e.Q6J("searchOptions",l.options),e.xp6(4),e.Q6J("ngIf",l.loading)("ngIfElse",h)}},dependencies:[t.sg,t.O5,J.S,N.i,A.A,Q.O,U.LS,U._s]})}return n})();var K=a(1213);const W=[{path:"",component:V},{path:"add",component:O},{path:"edit/:id",component:O},{path:"**",redirectTo:"",pathMatch:"full"}];let j=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.oAB({type:n});static#o=this.\u0275inj=e.cJS({imports:[t.ez,d.u5,d.UX,K.C,U.JX,T.A0,x.Is,c.ot,m.Bz.forChild(W)]})}return n})()},8057:(v,f,a)=>{a.d(f,{A:()=>c});var t=a(4650);let c=(()=>{class m{ngOnInit(){this.errorMessage?.error?.message&&(this.errormes=this.errorMessage.error.message)}static#e=this.\u0275fac=function(e){return new(e||m)};static#t=this.\u0275cmp=t.Xpm({type:m,selectors:[["app-error-occured"]],inputs:{errorMessage:"errorMessage"},decls:4,vars:1,consts:[[1,"py-2"],["role","alert",1,"alert","alert-danger"],[1,"d-flex","align-items-center"]],template:function(e,g){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.qZA()()()),2&e&&(t.xp6(3),t.hij(" ",g.errormes?g.errormes:g.errorMessage.message," "))}})}return m})()},5511:(v,f,a)=>{a.d(f,{i:()=>c});var t=a(4650);let c=(()=>{class m{static#e=this.\u0275fac=function(e){return new(e||m)};static#t=this.\u0275cmp=t.Xpm({type:m,selectors:[["app-no-data-found"]],inputs:{dataLabel:"dataLabel"},decls:4,vars:1,consts:[[1,"py-2"],["role","alert",1,"alert","alert-info"],[1,"d-flex","align-items-center"]],template:function(e,g){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.qZA()()()),2&e&&(t.xp6(3),t.hij(" No ",g.dataLabel," record found with the given filter parameters "))}})}return m})()},295:(v,f,a)=>{a.d(f,{O:()=>I});var t=a(4650),c=a(4006),m=a(6895),x=a(7392);function d(i,M){if(1&i&&t._UZ(0,"input",11),2&i){const r=t.oxw(2);t.Q6J("type",r.inputype)("placeholder",r.searchlabel)}}function e(i,M){if(1&i&&(t.ynx(0),t.TgZ(1,"option",13),t._uU(2),t.qZA(),t.BQk()),2&i){const r=M.$implicit;t.xp6(1),t.Q6J("value",r.val),t.xp6(1),t.Oqu(r.name)}}function g(i,M){if(1&i&&(t.TgZ(0,"select",12),t.YNc(1,e,3,2,"ng-container",8),t.qZA()),2&i){const r=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",r.selectoptions)}}function A(i,M){if(1&i&&(t.ynx(0),t.TgZ(1,"option",13),t._uU(2),t.qZA(),t.BQk()),2&i){const r=M.$implicit;t.xp6(1),t.Q6J("value",r.formname),t.xp6(1),t.Oqu(r.name)}}function T(i,M){if(1&i){const r=t.EpF();t.TgZ(0,"mat-icon",14),t.NdJ("click",function(){t.CHM(r);const _=t.oxw(2);return t.KtG(_.submitForm())}),t._uU(1,"manage_search"),t.qZA()}}function E(i,M){if(1&i){const r=t.EpF();t.TgZ(0,"mat-icon",15),t.NdJ("click",function(){t.CHM(r);const _=t.oxw(2);return t.KtG(_.resetSearch())}),t._uU(1,"close"),t.qZA()}}function F(i,M){if(1&i){const r=t.EpF();t.TgZ(0,"form",2)(1,"div",3),t.YNc(2,d,1,2,"input",4),t.YNc(3,g,2,1,"select",5),t.TgZ(4,"select",6),t.NdJ("change",function(){t.CHM(r);const _=t.oxw();return t.KtG(_.paramChange())}),t.TgZ(5,"option",7),t._uU(6,"Select Parameter"),t.qZA(),t.YNc(7,A,3,2,"ng-container",8),t.qZA(),t.YNc(8,T,2,0,"mat-icon",9),t.YNc(9,E,2,0,"mat-icon",10),t.qZA()()}if(2&i){const r=t.oxw();t.Q6J("formGroup",r.searchForm),t.xp6(2),t.Q6J("ngIf",!r.dispselect),t.xp6(1),t.Q6J("ngIf",r.dispselect&&r.selectoptions.length),t.xp6(2),t.Q6J("value",""),t.xp6(2),t.Q6J("ngForOf",r.searchOptions),t.xp6(1),t.Q6J("ngIf",r.searchForm.valid),t.xp6(1),t.Q6J("ngIf",r.searched)}}let I=(()=>{class i{constructor(r){this.searchFb=r,this.searchlabel="",this.searchOptions=[],this.searchEmit=new t.vpe,this.selectoptions=[],this.dispselect=!1,this.inputype="text",this.searched=!1,this.searchForm=this.searchFb.group({searchValue:["",c.kI.required],searchParam:["",c.kI.required]})}ngOnInit(){if(this.searchOptions.length){this.searchForm.controls.searchParam.setValue(this.searchOptions[0].formname);const r=this.searchOptions[0].type;this.searchlabel="Search by "+this.searchOptions[0].name,("text"===r||"date"===r||"number"===r)&&(this.inputype=r)}}paramChange(){this.dispselect=!1;const r=this.searchForm.get("searchParam")?.value;this.searchForm.controls.searchValue.setValue("");const p=this.searchOptions.find(_=>_.formname===r);this.searchlabel="Search by "+p?.name,p?.selectoptions&&p?.selectoptions.length?(this.dispselect=!0,this.selectoptions=p.selectoptions,this.searchForm.controls.searchValue.setValue(this.selectoptions[0].val)):this.inputype=p?.type}submitForm(){if(this.searchForm.valid){const{searchParam:r,searchValue:p}=this.searchForm.value,_={};r&&(_[r]=p,this.searched=!0,this.searchEmit.emit(_))}}resetSearch(){this.searched=!1,this.dispselect=!1,this.searchForm.controls.searchValue.setValue(""),this.searchForm.controls.searchParam.setValue(""),this.searchEmit.emit({})}static#e=this.\u0275fac=function(p){return new(p||i)(t.Y36(c.qu))};static#t=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-search-tab"]],inputs:{searchOptions:"searchOptions"},outputs:{searchEmit:"searchEmit"},decls:2,vars:1,consts:[[1,"mb-2","me-2","d-none","d-lg-block"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"d-md-flex","align-items-center"],["class","form-control form-select-sm me-2  my-search","formControlName","searchValue",3,"type","placeholder",4,"ngIf"],["class","form-select  form-select-sm text-secondary my-search me-2","formControlName","searchValue",4,"ngIf"],["formControlName","searchParam",1,"form-select","form-select-sm","text-secondary","my-search","me-2",3,"change"],["disabled","",3,"value"],[4,"ngFor","ngForOf"],["class","m-0 text-primary",3,"click",4,"ngIf"],["class","m-0 text-danger",3,"click",4,"ngIf"],["formControlName","searchValue",1,"form-control","form-select-sm","me-2","my-search",3,"type","placeholder"],["formControlName","searchValue",1,"form-select","form-select-sm","text-secondary","my-search","me-2"],[3,"value"],[1,"m-0","text-primary",3,"click"],[1,"m-0","text-danger",3,"click"]],template:function(p,_){1&p&&(t.TgZ(0,"div",0),t.YNc(1,F,10,7,"form",1),t.qZA()),2&p&&(t.xp6(1),t.Q6J("ngIf",_.searchOptions&&_.searchOptions.length))},dependencies:[m.sg,m.O5,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,x.Hw,c.sg,c.u],styles:["select[_ngcontent-%COMP%]{border-color:#0d6efd}.my-search[_ngcontent-%COMP%]{width:180px}"]})}return i})()},7997:(v,f,a)=>{a.d(f,{S:()=>c});var t=a(4650);let c=(()=>{class m{static#e=this.\u0275fac=function(e){return new(e||m)};static#t=this.\u0275cmp=t.Xpm({type:m,selectors:[["app-sul-loader"]],decls:8,vars:0,consts:[[1,"py-2"],["role","alert",1,"alert","alert-warning"],[1,"d-flex","align-items-center"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"visually-hidden"],[1,"blinks"]],template:function(e,g){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),t._uU(5,"Loading..."),t.qZA()(),t.TgZ(6,"span",5),t._uU(7," \xa0 Loading ... "),t.qZA()()()())}})}return m})()}}]);