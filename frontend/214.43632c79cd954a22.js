"use strict";(self.webpackChunksuluhi_admin_frontend=self.webpackChunksuluhi_admin_frontend||[]).push([[214],{4214:(T,f,s)=>{s.r(f),s.d(f,{InvoicesModule:()=>Ie});var _=s(6895),p=s(8869),c=s(4006),g=s(8796),u=s(4333),Z=s(1213),e=s(4650),a=s(8364),m=s(7997),h=s(5511),A=s(8057),C=s(295);function y(n,o){1&n&&(e.ynx(0),e.TgZ(1,"div",8),e._UZ(2,"app-sul-loader"),e.qZA(),e.BQk())}function N(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",8),e._UZ(2,"app-error-occured",10),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("errorMessage",t.errorMessage)}}const E=function(n){return["view",n]},O=function(n){return["edit",n]};function D(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"tr",18)(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td",19),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td",19),e._uU(13),e.qZA(),e.TgZ(14,"td")(15,"button",20),e._uU(16,"Edit"),e.qZA()()(),e.BQk()),2&n){const t=o.$implicit,i=o.index;e.xp6(1),e.Q6J("routerLink",e.VKq(11,E,t._id)),e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.uniqueNumber),e.xp6(2),e.Oqu(e.lcZ(8,7,t.issueDate)),e.xp6(3),e.Oqu(e.lcZ(11,9,t.dueDate)),e.xp6(3),e.Oqu(t.status),e.xp6(2),e.Q6J("routerLink",e.VKq(13,O,t._id))}}const Q=function(n,o,t){return{itemsPerPage:n,currentPage:o,totalItems:t}};function k(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",12)(2,"table",13)(3,"thead",14)(4,"tr")(5,"th"),e._uU(6,"#"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Invoice No"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Issued Date"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Due Date"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Status"),e.qZA(),e._UZ(15,"th"),e.qZA()(),e.TgZ(16,"tbody"),e.YNc(17,D,17,15,"ng-container",15),e.ALo(18,"paginate"),e.qZA()()(),e.TgZ(19,"div",16)(20,"pagination-controls",17),e.NdJ("pageChange",function(r){e.CHM(t);const l=e.oxw(3);return e.KtG(l.onPageChange(r))}),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(3);e.xp6(17),e.Q6J("ngForOf",e.xi3(18,1,t.invoices.results,e.kEZ(4,Q,t.invoices.pageSize,t.currentPage,t.invoices.totalItems)))}}function J(n,o){1&n&&e._UZ(0,"app-no-data-found",21),2&n&&e.Q6J("dataLabel","Invoice")}function F(n,o){if(1&n&&(e.YNc(0,k,21,8,"ng-container",6),e.YNc(1,J,1,1,"ng-template",null,11,e.W1O)),2&n){const t=e.MAs(2),i=e.oxw(2);e.Q6J("ngIf",i.invoices&&i.invoices.results.length)("ngIfElse",t)}}function L(n,o){if(1&n&&(e.YNc(0,N,3,1,"ng-container",6),e.YNc(1,F,3,2,"ng-template",null,9,e.W1O)),2&n){const t=e.MAs(2),i=e.oxw();e.Q6J("ngIf",i.errorMessage)("ngIfElse",t)}}let M=(()=>{class n{constructor(t){this.invoiceService=t,this.loading=!0,this.currentPage=1,this.pageSize=10,this.options=[{name:"Invoice No",formname:"uniqueNumber",type:"text"},{name:"Issued Date",formname:"issueDate",type:"date"},{name:"Due Date",formname:"dueDate",type:"date"},{name:"Status",formname:"status",type:"select",selectoptions:[{val:"pending",name:"Pending"},{val:"paid",name:"Paid"}]}]}ngOnInit(){this.loadInvoices({type:"invoice"})}loadInvoices(t){this.loading=!0,this.invoiceService.getAllInvoicelsos(this.currentPage,this.pageSize,t).subscribe({next:i=>{this.invoices=i},error:i=>{this.errorMessage=i,this.loading=!1},complete:()=>{this.loading=!1}})}searchFunction(t){const i={...t,type:"invoice"};this.loadInvoices(i)}onPageChange(t){this.currentPage=t,this.loadInvoices({type:"invoice"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list-invoices"]],decls:13,vars:3,consts:[[1,"py-4"],[1,"d-flex"],[1,"flex-grow-1"],[1,"text-secondary","fw-normal","mb-1"],[3,"searchOptions","searchEmit"],["routerLink","/accounts/invoices/add",1,"btn","btn-outline-primary","btn-sm"],[4,"ngIf","ngIfElse"],["loadedContent",""],[1,"py-3"],["noError",""],[3,"errorMessage"],["nodata",""],[1,"table-responsive"],[1,"table","table-bordered","table-striped","text-nowrap"],[1,"thead"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","pt-3"],[1,"my-pagination",3,"pageChange"],[1,"cursor-pointer",3,"routerLink"],[1,"text-capitalize"],[1,"edit-btn",3,"routerLink"],[3,"dataLabel"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Invoices"),e.qZA()(),e.ynx(5),e.TgZ(6,"app-search-tab",4),e.NdJ("searchEmit",function(l){return i.searchFunction(l)}),e.qZA(),e.BQk(),e.TgZ(7,"div")(8,"button",5),e._uU(9," Add Invoice"),e.qZA()()(),e.YNc(10,y,3,0,"ng-container",6),e.YNc(11,L,3,2,"ng-template",null,7,e.W1O),e.qZA()),2&t){const r=e.MAs(12);e.xp6(6),e.Q6J("searchOptions",i.options),e.xp6(4),e.Q6J("ngIf",i.loading)("ngIfElse",r)}},dependencies:[_.sg,_.O5,m.S,h.i,A.A,C.O,u.LS,p.rH,_.uU,u._s]}),n})();var S=s(583);function Y(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",27),e._UZ(2,"app-error-occured",28),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("errorMessage",t.errorMessage)}}function B(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"button",29),e._uU(2," Print Invoice "),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.MGl("routerLink","/accounts/invoices/view/",t.invoiceId,"")}}function w(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"ng-option",33),e._uU(2),e.qZA(),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("value",t._id),e.xp6(1),e.AsE(" ",t.firstName," ",t.lastName," ")}}function P(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"ng-select",30)(2,"ng-option",31),e._uU(3,"Search Customer"),e.qZA(),e.YNc(4,w,3,3,"ng-container",32),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.clients.results)}}function R(n,o){1&n&&(e.TgZ(0,"div",34),e._uU(1," Customer is required. "),e.qZA())}function K(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",6)(2,"div"),e.YNc(3,P,5,1,"ng-container",0),e.qZA(),e.YNc(4,R,2,0,"div",16),e.qZA(),e.BQk()),2&n){const t=e.oxw();let i;e.xp6(3),e.Q6J("ngIf",t.clients&&t.clients.results.length),e.xp6(1),e.Q6J("ngIf",(null==(i=t.invoiceForm.get("customerid"))?null:i.invalid)&&(null==(i=t.invoiceForm.get("customerid"))?null:i.touched))}}function $(n,o){1&n&&(e.TgZ(0,"div",34),e._uU(1," Recipient is required. "),e.qZA())}function j(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",6),e._UZ(2,"input",35),e.YNc(3,$,2,0,"div",16),e.qZA(),e.BQk()),2&n){const t=e.oxw();let i;e.xp6(3),e.Q6J("ngIf",(null==(i=t.invoiceForm.get("recipient"))?null:i.invalid)&&(null==(i=t.invoiceForm.get("recipient"))?null:i.touched))}}function G(n,o){1&n&&(e.TgZ(0,"div",34),e._uU(1," Date is required. "),e.qZA())}function W(n,o){1&n&&(e.TgZ(0,"div",34),e._uU(1," Date is required. "),e.qZA())}function z(n,o){1&n&&(e.TgZ(0,"div",34),e._uU(1," Description is required. "),e.qZA())}function H(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",40)(1,"div",41)(2,"div",2)(3,"div",3)(4,"h4",42),e._uU(5),e.qZA()(),e.TgZ(6,"div")(7,"button",43),e.NdJ("click",function(){const l=e.CHM(t).index,d=e.oxw(2);return e.KtG(d.deleteService(l))}),e._uU(8,"Remove"),e.qZA()()(),e.TgZ(9,"div",44)(10,"div",12)(11,"div",13)(12,"div",6)(13,"label",45),e._uU(14,"Name"),e.qZA(),e._UZ(15,"input",46),e.qZA()(),e.TgZ(16,"div",13)(17,"div",6)(18,"label",47),e._uU(19,"Price"),e.qZA(),e._UZ(20,"input",48),e.qZA()()()()()()}if(2&n){const t=o.index,i=e.oxw(2);e.xp6(5),e.hij("Service ",t+1,""),e.xp6(2),e.Q6J("disabled",i.invoiceId),e.xp6(2),e.Q6J("formGroupName",t),e.xp6(6),e.Q6J("readOnly",i.invoiceId),e.xp6(5),e.Q6J("readOnly",i.invoiceId)}}function X(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",36),e.YNc(2,H,21,5,"div",37),e.TgZ(3,"div",38)(4,"button",39),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addService())}),e._uU(5,"Add Service"),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.serviceArr.controls),e.xp6(2),e.Q6J("disabled",t.invoiceId)}}function V(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",40)(1,"div",41)(2,"div",2)(3,"div",3)(4,"h4",42),e._uU(5),e.qZA()(),e.TgZ(6,"div")(7,"button",43),e.NdJ("click",function(){const l=e.CHM(t).index,d=e.oxw(2);return e.KtG(d.deleteProduct(l))}),e._uU(8,"Remove"),e.qZA()()(),e.TgZ(9,"div",44)(10,"div",12)(11,"div",50)(12,"div",6)(13,"label",45),e._uU(14,"Name"),e.qZA(),e._UZ(15,"input",51),e.qZA()(),e.TgZ(16,"div",50)(17,"div",6)(18,"label",47),e._uU(19,"Unit Price"),e.qZA(),e._UZ(20,"input",52),e.qZA()(),e.TgZ(21,"div",50)(22,"div",6)(23,"label",47),e._uU(24,"Number of ITems"),e.qZA(),e._UZ(25,"input",53),e.qZA()()()()()()}if(2&n){const t=o.index,i=e.oxw(2);e.xp6(5),e.hij("Product ",t+1,""),e.xp6(2),e.Q6J("disabled",i.invoiceId),e.xp6(2),e.Q6J("formGroupName",t),e.xp6(6),e.Q6J("readOnly",i.invoiceId),e.xp6(5),e.Q6J("readOnly",i.invoiceId),e.xp6(5),e.Q6J("readOnly",i.invoiceId)}}function ee(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",49),e.YNc(2,V,26,6,"div",37),e.TgZ(3,"div",38)(4,"button",39),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addProduct())}),e._uU(5,"Add Product"),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.productsArr.controls),e.xp6(2),e.Q6J("disabled",t.invoiceId)}}function te(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",54),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.deleteInvoice())}),e._uU(2,"Delete Invoice"),e.qZA(),e.TgZ(3,"button",55),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.updateInvoice())}),e._uU(4,"Edit Invoice"),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("disabled",t.invoiceForm.invalid)}}function ne(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addInvoice())}),e._uU(1,"Add Invoice"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.invoiceForm.invalid)}}let U=(()=>{class n{constructor(t,i,r,l,d){this.formBuilder=t,this.router=i,this.invoiceService=r,this.clientService=l,this.route=d,this.title="Add Invoice",this.today=(new Date).toISOString().substring(0,10),this.submiting=!1,this.loading=!1,this.loadingclients=!1}ngOnInit(){this.loadClients({}),this.invoiceForm=this.formBuilder.group({customerid:["",c.kI.required],recipient:["",c.kI.required],customerordirect:["customer"],issueDate:[this.today,c.kI.required],dueDate:[this.today,c.kI.required],status:["pending"],type:["invoice"],description:[""],serviceorproduct:["service"],products:this.formBuilder.array([]),service:this.formBuilder.array([])}),this.invoiceId=this.route.snapshot.paramMap.get("id"),this.invoiceId?(this.title="Edit Invoice",this.getInvoice(this.invoiceId),this.invoiceForm.get("serviceorproduct")?.disable(),this.invoiceForm.get("customerordirect")?.disable()):(this.addService(),this.invoiceForm.get("serviceorproduct")?.valueChanges.subscribe(t=>{"service"===t&&(this.addService(),this.productsArr.clear()),"product"===t&&(this.addProduct(),this.serviceArr.clear())}))}getInvoice(t){this.loading=!0,this.invoiceService.getInvoicelso(t).subscribe({next:i=>{const r=new Date(i.dueDate).toISOString().substring(0,10),l=new Date(i.issueDate).toISOString().substring(0,10);i.dueDate=r,i.issueDate=l,this.invoiceForm.patchValue(i),this.checkIfCustomer(),i.products.forEach(d=>{const v=this.formBuilder.group({name:[d.name,c.kI.required],noOfitems:[d.noOfitems,c.kI.required],unitprice:[d.unitprice,c.kI.required],_id:[d._id]});this.productsArr.push(v)}),i.service.forEach(d=>{const v=this.formBuilder.group({name:[d.name,c.kI.required],price:[d.price,c.kI.required],_id:[d._id]});this.serviceArr.push(v)})},error:i=>{this.errorMessage=i,this.loading=!1},complete:()=>{this.loading=!1}})}get productsArr(){return this.invoiceForm.get("products")}addProduct(){const t=this.formBuilder.group({name:["",c.kI.required],noOfitems:["",c.kI.required],unitprice:["",c.kI.required]});this.productsArr.push(t)}deleteProduct(t){this.productsArr.removeAt(t)}get serviceArr(){return this.invoiceForm.get("service")}addService(){const t=this.formBuilder.group({name:["",c.kI.required],price:["",c.kI.required]});this.serviceArr.push(t)}deleteService(t){this.serviceArr.removeAt(t)}addInvoice(){this.invoiceForm.valid&&(this.submiting=!0,this.invoiceService.createInvoicelso(this.invoiceForm.value).subscribe({next:i=>{this.invoiceForm.reset(),this.router.navigate(["/accounts/invoices"])},error:i=>{this.errorMessage=i,this.submiting=!1},complete:()=>{this.submiting=!1}}))}updateInvoice(){const t=this.invoiceForm.value;this.submiting=!0,this.invoiceService.updateInvoicelso(this.invoiceId,t).subscribe({next:i=>{this.router.navigate(["/accounts/invoices"])},error:i=>{this.errorMessage=i,this.submiting=!1},complete:()=>{this.submiting=!1}})}deleteInvoice(){this.submiting=!0,this.invoiceService.deleteInvoicelso(this.invoiceId).subscribe({next:t=>{this.router.navigate(["/accounts/invoices"])},error:t=>{this.errorMessage=t,this.submiting=!1},complete:()=>{this.submiting=!1}})}loadClients(t){this.loadingclients=!0,this.clientService.getAllClientSuppliers(1,100,t).subscribe({next:i=>{this.clients=i},error:i=>{this.errorMessage=i,this.loadingclients=!1},complete:()=>{this.loadingclients=!1}})}checkIfCustomer(){const t=this.invoiceForm.get("customerordirect")?.value;"customer"===t?(this.invoiceForm.removeControl("recipient"),this.invoiceForm.addControl("customerid",this.formBuilder.control("",c.kI.required))):"recipient"===t&&(this.invoiceForm.removeControl("customerid"),this.invoiceForm.addControl("recipient",this.formBuilder.control("",c.kI.required)))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.qu),e.Y36(p.F0),e.Y36(a.v),e.Y36(S.y),e.Y36(p.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-edit-invoice"]],decls:54,vars:13,consts:[[4,"ngIf"],[1,"my-4",3,"formGroup"],[1,"d-flex"],[1,"flex-grow-1"],[1,"fw-normal"],["routerLink","/accounts/invoices",1,"btn","btn-outline-secondary","btn-sm"],[1,"mb-3"],[1,"form-check","form-check-inline"],["type","radio","formControlName","customerordirect","id","inlineRadio3","value","customer",1,"form-check-input",3,"change"],["for","inlineRadio3",1,"form-check-label"],["type","radio","formControlName","customerordirect","id","inlineRadio5","value","recipient",1,"form-check-input",3,"change"],["for","inlineRadio5",1,"form-check-label"],[1,"row"],[1,"col-lg-6"],["for","issueDate",1,"form-label"],["type","date","id","issueDate","formControlName","issueDate",1,"form-control"],["class","sul-error",4,"ngIf"],["for","title",1,"form-label"],["type","date","id","title","formControlName","dueDate",1,"form-control"],["for","description",1,"form-label"],["id","description","formControlName","description","placeholder","Enter Description",1,"form-control"],["type","radio","formControlName","serviceorproduct","id","inlineRadio1","value","service",1,"form-check-input"],["for","inlineRadio1",1,"form-check-label"],["type","radio","formControlName","serviceorproduct","id","inlineRadio2","value","product",1,"form-check-input"],["for","inlineRadio2",1,"form-check-label"],[4,"ngIf","ngIfElse"],["adding",""],[1,"py-3"],[3,"errorMessage"],[1,"btn","btn-outline-success","btn-sm","ms-2",3,"routerLink"],["formControlName","customerid"],["value","","disabled",""],[4,"ngFor","ngForOf"],[3,"value"],[1,"sul-error"],["type","text","id","title","formControlName","recipient","placeholder","Enter Recipient",1,"form-control"],["formArrayName","service"],["class","card my-3",4,"ngFor","ngForOf"],[1,"text-end"],["type","button",1,"btn","btn-success","btn-sm","mt-3",3,"disabled","click"],[1,"card","my-3"],[1,"card-body"],[1,"card-title"],[1,"btn","btn-danger","btn-sm",3,"disabled","click"],[3,"formGroupName"],["for","titl",1,"form-label"],["type","text","id","titl","formControlName","name","placeholder","Enter Service Provided",1,"form-control",3,"readOnly"],["for","pric",1,"form-label"],["type","number","id","pric","formControlName","price","placeholder","Enter Price",1,"form-control",3,"readOnly"],["formArrayName","products"],[1,"col-lg-4"],["type","text","id","titl","formControlName","name","placeholder","Enter Product Name",1,"form-control",3,"readOnly"],["type","number","id","pric","formControlName","unitprice","placeholder","Enter Unit Price",1,"form-control",3,"readOnly"],["type","number","id","pric","formControlName","noOfitems","placeholder","Enter Number of Items",1,"form-control",3,"readOnly"],["type","submit",1,"btn","btn-danger","btn-sm","me-2",3,"click"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled","click"],["type","submit",1,"btn","btn-success","btn-sm",3,"disabled","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,Y,3,1,"ng-container",0),e.TgZ(2,"form",1)(3,"div",2)(4,"div",3)(5,"h2",4),e._uU(6),e.qZA()(),e.TgZ(7,"div")(8,"button",5),e._uU(9," List Invoices"),e.qZA(),e.YNc(10,B,3,1,"ng-container",0),e.qZA()(),e.TgZ(11,"div",6)(12,"div",7)(13,"input",8),e.NdJ("change",function(){return i.checkIfCustomer()}),e.qZA(),e.TgZ(14,"label",9),e._uU(15,"Customer"),e.qZA()(),e.TgZ(16,"div",7)(17,"input",10),e.NdJ("change",function(){return i.checkIfCustomer()}),e.qZA(),e.TgZ(18,"label",11),e._uU(19,"Recipient"),e.qZA()()(),e.YNc(20,K,5,2,"ng-container",0),e.YNc(21,j,4,1,"ng-container",0),e.TgZ(22,"div",12)(23,"div",13)(24,"div",6)(25,"label",14),e._uU(26,"Issue Date"),e.qZA(),e._UZ(27,"input",15),e.YNc(28,G,2,0,"div",16),e.qZA()(),e.TgZ(29,"div",13)(30,"div",6)(31,"label",17),e._uU(32,"Due Date"),e.qZA(),e._UZ(33,"input",18),e.YNc(34,W,2,0,"div",16),e.qZA()()(),e.TgZ(35,"div",6)(36,"label",19),e._uU(37,"Description"),e.qZA(),e._UZ(38,"textarea",20),e.YNc(39,z,2,0,"div",16),e.qZA(),e.TgZ(40,"div",6)(41,"div",7),e._UZ(42,"input",21),e.TgZ(43,"label",22),e._uU(44,"Service"),e.qZA()(),e.TgZ(45,"div",7),e._UZ(46,"input",23),e.TgZ(47,"label",24),e._uU(48,"Products"),e.qZA()()(),e.YNc(49,X,6,2,"ng-container",0),e.YNc(50,ee,6,2,"ng-container",0),e.YNc(51,te,5,1,"ng-container",25),e.YNc(52,ne,2,1,"ng-template",null,26,e.W1O),e.qZA()()),2&t){const r=e.MAs(53);let l,d,v,I,x,q,b;e.xp6(1),e.Q6J("ngIf",i.errorMessage),e.xp6(1),e.Q6J("formGroup",i.invoiceForm),e.xp6(4),e.Oqu(i.title),e.xp6(4),e.Q6J("ngIf",i.invoiceId),e.xp6(10),e.Q6J("ngIf","customer"===(null==(l=i.invoiceForm.get("customerordirect"))?null:l.value)),e.xp6(1),e.Q6J("ngIf","recipient"===(null==(d=i.invoiceForm.get("customerordirect"))?null:d.value)),e.xp6(7),e.Q6J("ngIf",(null==(v=i.invoiceForm.get("issueDate"))?null:v.invalid)&&(null==(v=i.invoiceForm.get("issueDate"))?null:v.touched)),e.xp6(6),e.Q6J("ngIf",(null==(I=i.invoiceForm.get("dueDate"))?null:I.invalid)&&(null==(I=i.invoiceForm.get("dueDate"))?null:I.touched)),e.xp6(5),e.Q6J("ngIf",(null==(x=i.invoiceForm.get("description"))?null:x.invalid)&&(null==(x=i.invoiceForm.get("description"))?null:x.touched)),e.xp6(10),e.Q6J("ngIf","service"===(null==(q=i.invoiceForm.get("serviceorproduct"))?null:q.value)),e.xp6(1),e.Q6J("ngIf","product"===(null==(b=i.invoiceForm.get("serviceorproduct"))?null:b.value)),e.xp6(1),e.Q6J("ngIf",i.invoiceId)("ngIfElse",r)}},dependencies:[_.sg,_.O5,c._Y,c.Fj,c.wV,c._,c.JJ,c.JL,c.sg,c.u,c.x0,c.CE,A.A,g.w9,g.jq,p.rH]}),n})();var ie=s(7556);function oe(n,o){1&n&&(e.ynx(0),e.TgZ(1,"div",8),e._UZ(2,"app-sul-loader"),e.qZA(),e.BQk())}function re(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",8),e._UZ(2,"app-error-occured",10),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("errorMessage",t.errorMessage)}}function ce(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",14)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.qZA(),e.TgZ(6,"div",17),e._uU(7),e.qZA(),e.TgZ(8,"div"),e._uU(9),e.qZA()(),e.BQk()),2&n){const t=e.oxw(4);e.xp6(3),e.lnq(" ",t.detailInvoice.customerid.firstName," ",t.detailInvoice.customerid.lastName," - ",t.detailInvoice.customerid.companyName," "),e.xp6(2),e.AsE(" ",t.detailInvoice.customerid.address.state,", ",t.detailInvoice.customerid.address.country," "),e.xp6(2),e.hij(" ",t.detailInvoice.customerid.phoneNumber," "),e.xp6(2),e.hij(" ",t.detailInvoice.customerid.email," ")}}function se(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",14)(2,"div"),e._uU(3),e.qZA()(),e.BQk()),2&n){const t=e.oxw(4);e.xp6(3),e.hij(" ",t.detailInvoice.recipient," ")}}function ae(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"tr")(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td",37),e._uU(5),e.qZA(),e.TgZ(6,"td",36),e._uU(7),e.ALo(8,"currency"),e.qZA()(),e.BQk()),2&n){const t=o.$implicit,i=o.index;e.xp6(3),e.Oqu(i+1),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(e.xi3(8,3,t.price,"Ksh "))}}function le(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",33)(2,"table",34)(3,"thead",35)(4,"tr")(5,"th"),e._uU(6,"#"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"DESCRIPTION"),e.qZA(),e.TgZ(9,"th",36),e._uU(10,"AMOUNT"),e.qZA()()(),e.TgZ(11,"tbody"),e.YNc(12,ae,9,6,"ng-container",26),e.qZA()()(),e.BQk()),2&n){const t=e.oxw(4);e.xp6(12),e.Q6J("ngForOf",t.detailInvoice.service)}}function de(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"tr")(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td",37),e._uU(5),e.qZA(),e.TgZ(6,"td",36),e._uU(7),e.qZA(),e.TgZ(8,"td",36),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"td",36),e._uU(12),e.ALo(13,"currency"),e.qZA()(),e.BQk()),2&n){const t=o.$implicit,i=o.index;e.xp6(3),e.Oqu(i+1),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.noOfitems),e.xp6(2),e.Oqu(e.xi3(10,5,t.unitprice,"Ksh ")),e.xp6(3),e.hij(" ",e.xi3(13,8,t.noOfitems*t.unitprice,"Ksh ")," ")}}function ue(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",33)(2,"table",34)(3,"thead",35)(4,"tr")(5,"th"),e._uU(6,"#"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"DESCRIPTION"),e.qZA(),e.TgZ(9,"th",36),e._uU(10,"QTY"),e.qZA(),e.TgZ(11,"th",36),e._uU(12,"UNIT PRICE"),e.qZA(),e.TgZ(13,"th",36),e._uU(14,"TOTAL"),e.qZA()()(),e.TgZ(15,"tbody"),e.YNc(16,de,14,11,"ng-container",26),e.qZA()()(),e.BQk()),2&n){const t=e.oxw(4);e.xp6(16),e.Q6J("ngForOf",t.detailInvoice.products)}}function _e(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",38)(2,"div",28),e._uU(3),e.qZA(),e.TgZ(4,"div",29),e._uU(5),e.ALo(6,"currency"),e.qZA()(),e.BQk()),2&n){const t=o.$implicit;e.xp6(3),e.hij("",t.name,": "),e.xp6(2),e.Oqu(e.xi3(6,2,t.ammount,"Ksh "))}}function pe(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(4);e.xp6(2),e.AsE(" ",t.detailInvoice.customerid.firstName," ",t.detailInvoice.customerid.lastName," ")}}function me(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(4);e.xp6(2),e.hij(" ",t.detailInvoice.recipient," ")}}function ve(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",12)(2,"div",13)(3,"div",14)(4,"h2",15),e._uU(5,"Invoice"),e.qZA()(),e.TgZ(6,"div",16)(7,"div"),e._uU(8),e.qZA(),e.TgZ(9,"div"),e._uU(10),e.qZA(),e.TgZ(11,"div",17),e._uU(12),e.qZA(),e.TgZ(13,"div"),e._uU(14),e.qZA()()()(),e.TgZ(15,"div",18)(16,"div",19),e._uU(17," Bill To: "),e.qZA(),e.TgZ(18,"div",20),e.YNc(19,ce,10,7,"ng-container",21),e.YNc(20,se,4,1,"ng-container",21),e.TgZ(21,"div",14)(22,"div",1)(23,"div",22)(24,"div"),e._uU(25,"Invoice #:"),e.qZA(),e.TgZ(26,"div"),e._uU(27,"Issued Date:"),e.qZA(),e.TgZ(28,"div"),e._uU(29,"Due Date:"),e.qZA()(),e.TgZ(30,"div",23)(31,"div"),e._uU(32),e.qZA(),e.TgZ(33,"div"),e._uU(34),e.ALo(35,"date"),e.qZA(),e.TgZ(36,"div"),e._uU(37),e.ALo(38,"date"),e.qZA()()()()()(),e.YNc(39,le,13,1,"ng-container",21),e.YNc(40,ue,17,1,"ng-container",21),e.TgZ(41,"div",24)(42,"div",25),e.YNc(43,_e,7,5,"ng-container",26),e.TgZ(44,"div",27)(45,"div",28),e._uU(46,"TOTAL: "),e.qZA(),e.TgZ(47,"div",29),e._uU(48),e.ALo(49,"currency"),e.qZA()()()(),e.TgZ(50,"div",0)(51,"div",20)(52,"div",14)(53,"div",30),e._uU(54,"Client"),e.qZA(),e.YNc(55,pe,3,2,"ng-container",21),e.YNc(56,me,3,1,"ng-container",21),e.TgZ(57,"div",31),e._uU(58," ........................................... "),e.qZA(),e.TgZ(59,"div"),e._uU(60),e.ALo(61,"date"),e.qZA()(),e.TgZ(62,"div",16)(63,"div",30),e._uU(64,"Issuer"),e.qZA(),e.TgZ(65,"div"),e._uU(66),e.qZA(),e.TgZ(67,"div",31),e._uU(68," ........................................... "),e.qZA(),e.TgZ(69,"div"),e._uU(70),e.ALo(71,"date"),e.qZA()()()(),e.TgZ(72,"div",0)(73,"div",32),e._uU(74,"Terms"),e.qZA(),e.TgZ(75,"div"),e._uU(76),e.ALo(77,"date"),e.qZA()(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(8),e.hij(" ",t.currentUser.company.name," "),e.xp6(2),e.AsE(" ",t.currentUser.company.address.state,", ",t.currentUser.company.address.country," "),e.xp6(2),e.hij(" ",t.currentUser.company.phoneNumber," "),e.xp6(2),e.hij(" ",t.currentUser.company.email," "),e.xp6(5),e.Q6J("ngIf",t.detailInvoice.customerid),e.xp6(1),e.Q6J("ngIf",t.detailInvoice.recipient),e.xp6(12),e.Oqu(t.detailInvoice.uniqueNumber),e.xp6(2),e.Oqu(e.lcZ(35,21,t.detailInvoice.issueDate)),e.xp6(3),e.Oqu(e.lcZ(38,23,t.detailInvoice.dueDate)),e.xp6(2),e.Q6J("ngIf",t.detailInvoice.service&&t.detailInvoice.service.length),e.xp6(1),e.Q6J("ngIf",t.detailInvoice.products&&t.detailInvoice.products.length),e.xp6(3),e.Q6J("ngForOf",t.operatingCost),e.xp6(5),e.Oqu(e.xi3(49,25,t.totalamount,"Ksh ")),e.xp6(7),e.Q6J("ngIf",t.detailInvoice.customerid),e.xp6(1),e.Q6J("ngIf",t.detailInvoice.recipient),e.xp6(4),e.hij(" ",e.lcZ(61,28,t.today)," "),e.xp6(6),e.AsE(" ",t.currentUser.firstName," ",t.currentUser.lastName," "),e.xp6(4),e.hij(" ",e.lcZ(71,30,t.today)," "),e.xp6(6),e.hij(" Please make payment by ",e.lcZ(77,32,t.detailInvoice.dueDate)," ")}}function ge(n,o){1&n&&e._UZ(0,"app-no-data-found",39),2&n&&e.Q6J("dataLabel","Invoice")}function fe(n,o){if(1&n&&(e.YNc(0,ve,78,34,"ng-container",6),e.YNc(1,ge,1,1,"ng-template",null,11,e.W1O)),2&n){const t=e.MAs(2),i=e.oxw(2);e.Q6J("ngIf",i.detailInvoice)("ngIfElse",t)}}function he(n,o){if(1&n&&(e.YNc(0,re,3,1,"ng-container",6),e.YNc(1,fe,3,2,"ng-template",null,9,e.W1O)),2&n){const t=e.MAs(2),i=e.oxw();e.Q6J("ngIf",i.errorMessage)("ngIfElse",t)}}const Ze=[{path:"",component:M},{path:"add",component:U},{path:"edit/:id",component:U},{path:"view/:id",component:(()=>{class n{constructor(t,i,r){this.invoiceService=t,this.authService=i,this.route=r,this.loading=!1,this.totalamount=0,this.today=new Date,this.operatingCost=[{name:"SUBTOTAL",ammount:0,incrme:!0},{name:"DISCOUNT",ammount:0,incrme:!1},{name:"TOTAL TAX",ammount:0,incrme:!0}]}ngOnInit(){this.invoiceId=this.route.snapshot.paramMap.get("id"),this.invoiceId&&this.getInvoice(this.invoiceId),this.getCurrentUser()}getCurrentUser(){this.currentUser=JSON.parse(this.authService.getUseriInfo())}getInvoice(t){this.loading=!0,this.invoiceService.getInvoicelsoprint(t).subscribe({next:i=>{this.detailInvoice=i,this.detailInvoice.products.length&&(this.totalamount=this.prdtotal(this.detailInvoice.products)),this.detailInvoice.service.length&&(this.totalamount=this.servtotal(this.detailInvoice.service))},error:i=>{this.errorMessage=i,this.loading=!1},complete:()=>{this.loading=!1}})}prdtotal(t){let i=0;for(let r=0;r<t.length;r++){const l=t[r];i+=l.noOfitems*l.unitprice}return i}servtotal(t){let i=0;for(let r=0;r<t.length;r++)i+=t[r].price;return i}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.v),e.Y36(ie.e),e.Y36(p.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-details-invoice"]],decls:13,vars:3,consts:[[1,"py-4"],[1,"d-flex"],[1,"flex-grow-1"],["routerLink","/accounts/invoices",1,"btn","btn-outline-primary","btn-sm"],[1,"btn","btn-outline-success","btn-sm","ms-2"],[1,"btn","btn-outline-warning","btn-sm","ms-2",3,"routerLink"],[4,"ngIf","ngIfElse"],["loadedContent",""],[1,"py-3"],["noError",""],[3,"errorMessage"],["nodata",""],[1,"py-4","mt-2"],[1,"d-flex","align-items-center"],[1,"col-6"],[1,"detailsheader"],[1,"col-6","text-end"],[1,"mt-1"],[1,"my-4"],[1,"pb-1","text-secondary"],[1,"row"],[4,"ngIf"],[1,"flex-grow-1","text-end","text-dark"],[1,"text-end","ps-2"],[1,"row","justify-content-end"],[1,"col-lg-4","col-sm-8"],[4,"ngFor","ngForOf"],[1,"d-flex","operatingCost","fw-bold","mb-1","mt-2"],[1,"flex-grow-1","text-end"],[1,"ps-4","pe-2","text-end"],[1,""],[1,"pt-2"],[1,"fw-bold"],[1,"table-responsive"],[1,"table","table-bordered"],[1,"bg-light"],[1,"text-end"],[1,"text-capitalize"],[1,"d-flex","operatingCost","mb-1"],[3,"dataLabel"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"div")(4,"button",3),e._uU(5," List Invoices"),e.qZA(),e.TgZ(6,"button",4),e._uU(7," Print Invoice"),e.qZA(),e.TgZ(8,"button",5),e._uU(9," Edit Invoice "),e.qZA()()(),e.YNc(10,oe,3,0,"ng-container",6),e.YNc(11,he,3,2,"ng-template",null,7,e.W1O),e.qZA()),2&t){const r=e.MAs(12);e.xp6(8),e.MGl("routerLink","/accounts/invoices/edit/",i.invoiceId,""),e.xp6(2),e.Q6J("ngIf",i.loading)("ngIfElse",r)}},dependencies:[_.sg,_.O5,m.S,h.i,A.A,p.rH,_.H9,_.uU],styles:[".operatingCost[_ngcontent-%COMP%]{font-size:.86rem!important}"]}),n})()},{path:"**",redirectTo:"",pathMatch:"full"}];let Ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[_.ez,c.u5,c.UX,Z.C,u.JX,g.A0,p.Bz.forChild(Ze)]}),n})()},583:(T,f,s)=>{s.d(f,{y:()=>g});var _=s(2340),p=s(4650),c=s(529);let g=(()=>{class u{constructor(e){this.http=e,this.apiUrl=`${_.N.apiUrl}clientsupplier`}createClientSupplier(e){return this.http.post(this.apiUrl,e)}getClientSupplier(e){return this.http.get(`${this.apiUrl}/${e}`)}updateClientSupplier(e,a){return this.http.put(`${this.apiUrl}/${e}`,a)}deleteClientSupplier(e){return this.http.delete(`${this.apiUrl}/${e}`)}getAllClientSuppliers(e,a,m){const h={currentPage:e,pageSize:a,...m};return this.http.get(this.apiUrl,{params:h})}}return u.\u0275fac=function(e){return new(e||u)(p.LFG(c.eN))},u.\u0275prov=p.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},8364:(T,f,s)=>{s.d(f,{v:()=>g});var _=s(2340),p=s(4650),c=s(529);let g=(()=>{class u{constructor(e){this.http=e,this.apiUrl=`${_.N.apiUrl}invoicelso`}createInvoicelso(e){return this.http.post(this.apiUrl,e)}getInvoicelso(e){return this.http.get(`${this.apiUrl}/${e}`)}getInvoicelsoprint(e){return this.http.get(`${this.apiUrl}/print/${e}`)}updateInvoicelso(e,a){return this.http.put(`${this.apiUrl}/${e}`,a)}deleteInvoicelso(e){return this.http.delete(`${this.apiUrl}/${e}`)}getAllInvoicelsos(e,a,m){const h={currentPage:e,pageSize:a,...m};return this.http.get(this.apiUrl,{params:h})}}return u.\u0275fac=function(e){return new(e||u)(p.LFG(c.eN))},u.\u0275prov=p.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);