"use strict";(self.webpackChunksuluhi_admin_frontend=self.webpackChunksuluhi_admin_frontend||[]).push([[722],{2722:(U,u,l)=>{l.r(u),l.d(u,{ProjectsModule:()=>q});var p=l(6895),a=l(6773),t=l(8256),f=l(2340),g=l(529);let m=(()=>{class o{constructor(e){this.http=e,this.apiUrl=`${f.N.apiUrl}projects`}createProject(e){return this.http.post(this.apiUrl,e)}getProject(e){return this.http.get(`${this.apiUrl}/${e}`)}updateProject(e,r){return this.http.put(`${this.apiUrl}/${e}`,r)}deleteProject(e){return this.http.delete(`${this.apiUrl}/${e}`)}getAllProjects(){return this.http.get(this.apiUrl)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(g.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const h=function(o){return["edit",o]};function _(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"tr",6)(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA()(),t.BQk()),2&o){const e=n.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(3,h,e._id)),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Oqu(e.description)}}let b=(()=>{class o{constructor(e){this.projectService=e}ngOnInit(){this.loadTasks()}loadTasks(){this.projectService.getAllProjects().subscribe({next:e=>{this.projects=e},error:e=>{console.error("Failed to Load Projects",e)}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-projects"]],decls:17,vars:1,consts:[[1,"py-4"],[1,"d-flex"],[1,"flex-grow-1"],["routerLink","/projects/add",1,"btn","btn-secondary","btn-sm"],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],[1,"cursor-pointer",3,"routerLink"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t._uU(4,"Projects"),t.qZA()(),t.TgZ(5,"div")(6,"button",3),t._uU(7," Add Project"),t.qZA()()(),t.TgZ(8,"table",4)(9,"thead")(10,"tr")(11,"th"),t._uU(12,"Title"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Description"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,_,6,5,"ng-container",5),t.qZA()()()),2&e&&(t.xp6(16),t.Q6J("ngForOf",r.projects))},dependencies:[p.sg,a.rH]}),o})();var i=l(433);function v(o,n){1&o&&(t.TgZ(0,"div",21),t._uU(1," Title is required. "),t.qZA())}function Z(o,n){1&o&&(t.TgZ(0,"div",21),t._uU(1," Description is required. "),t.qZA())}function A(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",22)(1,"div",23)(2,"div",1)(3,"div",2)(4,"h4",24),t._uU(5),t.qZA()(),t.TgZ(6,"div")(7,"button",25),t.NdJ("click",function(){const s=t.CHM(e).index,d=t.oxw();return t.KtG(d.deleteSection(s))}),t._uU(8,"Remove"),t.qZA()()(),t.TgZ(9,"div",26)(10,"div",4)(11,"label",27),t._uU(12,"Section Title"),t.qZA(),t._UZ(13,"input",28),t.qZA(),t.TgZ(14,"div",4)(15,"label",29),t._uU(16,"Section Description"),t.qZA(),t._UZ(17,"textarea",30),t.qZA()()()()}if(2&o){const e=n.index;t.xp6(5),t.hij("Section ",e+1,""),t.xp6(4),t.Q6J("formGroupName",e)}}function P(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",31),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.deleteProject())}),t._uU(2,"Delete Project"),t.qZA(),t.TgZ(3,"button",32),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.updateProject())}),t._uU(4,"Edit Project"),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.projectForm.invalid),t.xp6(2),t.Q6J("disabled",e.projectForm.invalid)}}function T(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.addProject())}),t._uU(1," Add Project "),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",e.projectForm.invalid)}}let j=(()=>{class o{constructor(e,r,c,s){this.formBuilder=e,this.router=r,this.projectService=c,this.route=s,this.title="Add Project"}ngOnInit(){this.projectForm=this.formBuilder.group({title:["",i.kI.required],description:["",i.kI.required],startDate:[""],endDate:[""],projectSections:this.formBuilder.array([])}),this.projectId=this.route.snapshot.paramMap.get("id"),this.projectId&&(this.title="Edit Project",this.getProject(this.projectId))}addProject(){this.projectForm.valid&&this.projectService.createProject(this.projectForm.value).subscribe({next:r=>{this.projectForm.reset(),this.router.navigate(["/projects"])},error:r=>{console.error("Failed to Add project",r)}})}get projectSections(){return this.projectForm.get("projectSections")}addSection(){const e=this.formBuilder.group({title:["",i.kI.required],description:["",i.kI.required]});this.projectSections.push(e)}deleteSection(e){this.projectSections.removeAt(e)}getProject(e){this.projectService.getProject(e).subscribe({next:r=>{const c=new Date(r.startDate).toISOString().substring(0,10),s=new Date(r.endDate).toISOString().substring(0,10);r.startDate=c,r.endDate=s,this.projectForm.patchValue(r),r.projectSections.forEach(d=>{const F=this.formBuilder.group({title:[d.title,i.kI.required],description:[d.description,i.kI.required]});this.projectSections.push(F)})},error:r=>{console.error("Failed to Get project",r)}})}updateProject(){this.projectService.updateProject(this.projectId,this.projectForm.value).subscribe({next:r=>{console.log(r),this.router.navigate(["/projects"])},error:r=>{console.error("Failed to Edit project",r)}})}deleteProject(){this.projectService.deleteProject(this.projectId).subscribe({next:e=>{console.log(e),this.router.navigate(["/projects"])},error:e=>{console.error("Failed to Delete project",e)}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.qu),t.Y36(a.F0),t.Y36(m),t.Y36(a.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-edit-projects"]],decls:35,vars:7,consts:[[1,"my-4",3,"formGroup"],[1,"d-flex"],[1,"flex-grow-1"],["routerLink","/projects",1,"btn","btn-secondary","btn-sm"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","description",1,"form-label"],["id","description","formControlName","description",1,"form-control"],["for","startDate",1,"form-label"],["type","date","id","startDate","formControlName","startDate",1,"form-control"],["for","endDate",1,"form-label"],["type","date","id","endDate","formControlName","endDate",1,"form-control"],["formArrayName","projectSections"],["class","card my-3",4,"ngFor","ngForOf"],[1,"text-end"],["type","button",1,"btn","btn-success","btn-sm","mt-3",3,"click"],[1,"mt-3"],[4,"ngIf","ngIfElse"],["addTasking",""],[1,"invalid-feedback"],[1,"card","my-3"],[1,"card-body"],[1,"card-title"],[1,"btn","btn-danger","btn-sm",3,"click"],[3,"formGroupName"],["for","titl",1,"form-label"],["type","text","id","titl","formControlName","title",1,"form-control"],["for","descr",1,"form-label"],["id","descr","formControlName","description",1,"form-control"],["type","submit",1,"btn","btn-danger","btn-sm","me-2",3,"disabled","click"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled","click"],["type","submit",1,"btn","btn-success","btn-sm",3,"disabled","click"]],template:function(e,r){if(1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4),t.qZA()(),t.TgZ(5,"div")(6,"button",3),t._uU(7," List Projects"),t.qZA()()(),t.TgZ(8,"div",4)(9,"label",5),t._uU(10,"Title"),t.qZA(),t._UZ(11,"input",6),t.YNc(12,v,2,0,"div",7),t.qZA(),t.TgZ(13,"div",4)(14,"label",8),t._uU(15,"Description"),t.qZA(),t._UZ(16,"textarea",9),t.YNc(17,Z,2,0,"div",7),t.qZA(),t.TgZ(18,"div",4)(19,"label",10),t._uU(20,"Start Date"),t.qZA(),t._UZ(21,"input",11),t.qZA(),t.TgZ(22,"div",4)(23,"label",12),t._uU(24,"End Date"),t.qZA(),t._UZ(25,"input",13),t.qZA(),t.TgZ(26,"div",14),t.YNc(27,A,18,2,"div",15),t.TgZ(28,"div",16)(29,"button",17),t.NdJ("click",function(){return r.addSection()}),t._uU(30,"Add Section"),t.qZA()()(),t.TgZ(31,"div",18),t.YNc(32,P,5,2,"ng-container",19),t.YNc(33,T,2,1,"ng-template",null,20,t.W1O),t.qZA()()),2&e){const c=t.MAs(34);let s,d;t.Q6J("formGroup",r.projectForm),t.xp6(4),t.Oqu(r.title),t.xp6(8),t.Q6J("ngIf",(null==(s=r.projectForm.get("title"))?null:s.invalid)&&(null==(s=r.projectForm.get("title"))?null:s.touched)),t.xp6(5),t.Q6J("ngIf",(null==(d=r.projectForm.get("description"))?null:d.invalid)&&(null==(d=r.projectForm.get("description"))?null:d.touched)),t.xp6(10),t.Q6J("ngForOf",r.projectSections.controls),t.xp6(5),t.Q6J("ngIf",r.projectId)("ngIfElse",c)}},dependencies:[p.sg,p.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,a.rH]}),o})();const x=[{path:"",component:b},{path:"add",component:j},{path:"edit/:id",component:j},{path:"**",redirectTo:"",pathMatch:"full"}];let q=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.ez,i.u5,i.UX,a.Bz.forChild(x)]}),o})()}}]);