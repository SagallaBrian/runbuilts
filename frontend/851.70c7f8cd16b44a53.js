"use strict";(self.webpackChunksuluhi_admin_frontend=self.webpackChunksuluhi_admin_frontend||[]).push([[851],{5851:(fe,x,a)=>{a.r(x),a.d(x,{ReceiptsModule:()=>ve});var p=a(6895),u=a(8869),c=a(4006),v=a(8796),f=a(4333),q=a(1213),e=a(4650),R=a(2340),I=a(529);let h=(()=>{class i{constructor(t){this.http=t,this.apiUrl=`${R.N.apiUrl}payments`}createPayment(t){return this.http.post(this.apiUrl,t)}getPayment(t){return this.http.get(`${this.apiUrl}/${t}`)}getPaymentPrint(t){return this.http.get(`${this.apiUrl}/print/${t}`)}updatePayment(t,n){return this.http.put(`${this.apiUrl}/${t}`,n)}deletePayment(t){return this.http.delete(`${this.apiUrl}/${t}`)}getAllPayments(t,n,r){const s={currentPage:t,pageSize:n,...r};return this.http.get(this.apiUrl,{params:s})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(I.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var A=a(7997),T=a(5511),Z=a(8057),F=a(295);function N(i,o){1&i&&(e.ynx(0),e.TgZ(1,"div",8),e._UZ(2,"app-sul-loader"),e.qZA(),e.BQk())}function U(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",8),e._UZ(2,"app-error-occured",10),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("errorMessage",t.errorMessage)}}const E=function(i){return["view",i]},k=function(i){return["edit",i]};function J(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"tr",16)(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",17),e._uU(12),e.qZA(),e.TgZ(13,"td")(14,"button",18),e._uU(15,"Edit"),e.qZA()()(),e.BQk()),2&i){const t=o.$implicit,n=o.index;e.xp6(1),e.Q6J("routerLink",e.VKq(9,E,t._id)),e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.uniqueNumber),e.xp6(2),e.Oqu(e.lcZ(8,7,t.paymentdate)),e.xp6(3),e.Oqu(t.transactioncode),e.xp6(2),e.Oqu(t.modeofpay),e.xp6(2),e.Q6J("routerLink",e.VKq(11,k,t._id))}}const Q=function(i,o,t){return{itemsPerPage:i,currentPage:o,totalItems:t}};function O(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"table",12)(2,"thead")(3,"tr")(4,"th"),e._uU(5,"#"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Receipt No"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Payment Date"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Transaction Code"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Mode of Pay"),e.qZA(),e._UZ(14,"th"),e.qZA()(),e.TgZ(15,"tbody"),e.YNc(16,J,16,13,"ng-container",13),e.ALo(17,"paginate"),e.qZA()(),e.TgZ(18,"div",14)(19,"pagination-controls",15),e.NdJ("pageChange",function(r){e.CHM(t);const s=e.oxw(3);return e.KtG(s.onPageChange(r))}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw(3);e.xp6(16),e.Q6J("ngForOf",e.xi3(17,1,t.receipts.results,e.kEZ(4,Q,t.receipts.pageSize,t.currentPage,t.receipts.totalItems)))}}function P(i,o){1&i&&e._UZ(0,"app-no-data-found",19),2&i&&e.Q6J("dataLabel","Receipt")}function S(i,o){if(1&i&&(e.YNc(0,O,20,8,"ng-container",6),e.YNc(1,P,1,1,"ng-template",null,11,e.W1O)),2&i){const t=e.MAs(2),n=e.oxw(2);e.Q6J("ngIf",n.receipts&&n.receipts.results.length)("ngIfElse",t)}}function M(i,o){if(1&i&&(e.YNc(0,U,3,1,"ng-container",6),e.YNc(1,S,3,2,"ng-template",null,9,e.W1O)),2&i){const t=e.MAs(2),n=e.oxw();e.Q6J("ngIf",n.errorMessage)("ngIfElse",t)}}let Y=(()=>{class i{constructor(t){this.receiptService=t,this.loading=!0,this.currentPage=1,this.pageSize=10,this.options=[{name:"Customer Title",formname:"title",type:"text"},{name:"Status",formname:"loanstatus",type:"select",selectoptions:[{val:"pending",name:"Pending"},{val:"approved",name:"Approved"},{val:"rejected",name:"Rejected"}]}]}ngOnInit(){this.loadInvoices({})}loadInvoices(t){this.loading=!0,this.receiptService.getAllPayments(this.currentPage,this.pageSize,t).subscribe({next:n=>{this.receipts=n},error:n=>{this.errorMessage=n,this.loading=!1},complete:()=>{this.loading=!1}})}searchFunction(t){this.loadInvoices(t)}onPageChange(t){this.currentPage=t,this.loadInvoices({})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(h))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-list-receipts"]],decls:13,vars:4,consts:[[1,"py-4"],[1,"d-flex"],[1,"flex-grow-1"],[1,"text-secondary","fw-normal","mb-1"],[3,"searchlabel","searchOptions","searchEmit"],["routerLink","/accounts/receitps/add",1,"btn","btn-outline-primary","btn-sm"],[4,"ngIf","ngIfElse"],["loadedContent",""],[1,"py-3"],["noError",""],[3,"errorMessage"],["nodata",""],[1,"table","table-bordered","table-striped"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end"],[1,"my-pagination",3,"pageChange"],[1,"cursor-pointer",3,"routerLink"],[1,"text-capitalize"],[1,"edit-btn",3,"routerLink"],[3,"dataLabel"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Receipts (Income)"),e.qZA()(),e.ynx(5),e.TgZ(6,"app-search-tab",4),e.NdJ("searchEmit",function(s){return n.searchFunction(s)}),e.qZA(),e.BQk(),e.TgZ(7,"div")(8,"button",5),e._uU(9," Add Receipt"),e.qZA()()(),e.YNc(10,N,3,0,"ng-container",6),e.YNc(11,M,3,2,"ng-template",null,7,e.W1O),e.qZA()),2&t){const r=e.MAs(12);e.xp6(6),e.Q6J("searchlabel","Search Invoice")("searchOptions",n.options),e.xp6(4),e.Q6J("ngIf",n.loading)("ngIfElse",r)}},dependencies:[p.sg,p.O5,A.S,T.i,Z.A,F.O,f.LS,u.rH,p.uU,f._s]}),i})();var B=a(583),w=a(8364);function L(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",35),e._UZ(2,"app-error-occured",36),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("errorMessage",t.errorMessage)}}function D(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"ng-option",40),e._uU(2),e.qZA(),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("value",t._id),e.xp6(1),e.AsE(" ",t.firstName," ",t.lastName," ")}}function G(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"ng-select",37)(2,"ng-option",38),e._uU(3,"Search Customer"),e.qZA(),e.YNc(4,D,3,3,"ng-container",39),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.clients.results)}}function j(i,o){1&i&&(e.TgZ(0,"div",41),e._uU(1," Customer is required. "),e.qZA())}function K(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",6)(2,"div"),e.YNc(3,G,5,1,"ng-container",0),e.qZA(),e.YNc(4,j,2,0,"div",18),e.qZA(),e.BQk()),2&i){const t=e.oxw();let n;e.xp6(3),e.Q6J("ngIf",t.clients&&t.clients.results.length),e.xp6(1),e.Q6J("ngIf",(null==(n=t.receiptForm.get("customerid"))?null:n.invalid)&&(null==(n=t.receiptForm.get("customerid"))?null:n.touched))}}function $(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"ng-option",40),e._uU(2),e.qZA(),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.uniqueNumber," ")}}function H(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"ng-select",42),e.NdJ("change",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onSelectInvoice())}),e.TgZ(2,"ng-option",38),e._uU(3,"Search Invoice"),e.qZA(),e.YNc(4,$,3,2,"ng-container",39),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("readonly",t.receiptId),e.xp6(3),e.Q6J("ngForOf",t.invoices.results)}}function z(i,o){1&i&&(e.TgZ(0,"div",41),e._uU(1," Invoice required. "),e.qZA())}function W(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",6)(2,"div"),e.YNc(3,H,5,2,"ng-container",0),e.qZA(),e.YNc(4,z,2,0,"div",18),e.qZA(),e.BQk()),2&i){const t=e.oxw();let n;e.xp6(3),e.Q6J("ngIf",t.invoices&&t.invoices.results.length),e.xp6(1),e.Q6J("ngIf",(null==(n=t.receiptForm.get("invoicelsoid"))?null:n.invalid)&&(null==(n=t.receiptForm.get("invoicelsoid"))?null:n.touched))}}function V(i,o){1&i&&(e.TgZ(0,"div",41),e._uU(1," Recipient is required. "),e.qZA())}function X(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",6),e._UZ(2,"input",43),e.YNc(3,V,2,0,"div",18),e.qZA(),e.BQk()),2&i){const t=e.oxw();let n;e.xp6(3),e.Q6J("ngIf",(null==(n=t.receiptForm.get("recipient"))?null:n.invalid)&&(null==(n=t.receiptForm.get("recipient"))?null:n.touched))}}function ee(i,o){1&i&&(e.TgZ(0,"div",41),e._uU(1," Payment Date is required. "),e.qZA())}function te(i,o){1&i&&(e.TgZ(0,"div",41),e._uU(1," Transaction code is required. "),e.qZA())}function ie(i,o){1&i&&(e.TgZ(0,"div",41),e._uU(1," Description is required. "),e.qZA())}function ne(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",48)(1,"div",49)(2,"div",2)(3,"div",3)(4,"h4",50),e._uU(5),e.qZA()(),e.TgZ(6,"div")(7,"button",51),e.NdJ("click",function(){const s=e.CHM(t).index,l=e.oxw(2);return e.KtG(l.deleteService(s))}),e._uU(8,"Remove"),e.qZA()()(),e.TgZ(9,"div",52)(10,"div",14)(11,"div",15)(12,"div",6)(13,"label",53),e._uU(14,"Name"),e.qZA(),e._UZ(15,"input",54),e.qZA()(),e.TgZ(16,"div",15)(17,"div",6)(18,"label",55),e._uU(19,"Price"),e.qZA(),e._UZ(20,"input",56),e.qZA()()()()()()}if(2&i){const t=o.index,n=e.oxw(2);let r,s,l;e.xp6(5),e.hij("Service ",t+1,""),e.xp6(2),e.Q6J("disabled","invoice"===(null==(r=n.receiptForm.get("customeorinvoice"))?null:r.value)),e.xp6(2),e.Q6J("formGroupName",t),e.xp6(6),e.Q6J("readOnly","invoice"===(null==(s=n.receiptForm.get("customeorinvoice"))?null:s.value)),e.xp6(5),e.Q6J("readOnly","invoice"===(null==(l=n.receiptForm.get("customeorinvoice"))?null:l.value))}}function oe(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",44),e.YNc(2,ne,21,5,"div",45),e.TgZ(3,"div",46)(4,"button",47),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addService())}),e._uU(5,"Add Service"),e.qZA()()(),e.BQk()}if(2&i){const t=e.oxw();let n;e.xp6(2),e.Q6J("ngForOf",t.serviceArr.controls),e.xp6(2),e.Q6J("disabled","invoice"===(null==(n=t.receiptForm.get("customeorinvoice"))?null:n.value))}}function re(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",48)(1,"div",49)(2,"div",2)(3,"div",3)(4,"h4",50),e._uU(5),e.qZA()(),e.TgZ(6,"div")(7,"button",51),e.NdJ("click",function(){const s=e.CHM(t).index,l=e.oxw(2);return e.KtG(l.deleteProduct(s))}),e._uU(8,"Remove"),e.qZA()()(),e.TgZ(9,"div",52)(10,"div",14)(11,"div",58)(12,"div",6)(13,"label",53),e._uU(14,"Name"),e.qZA(),e._UZ(15,"input",59),e.qZA()(),e.TgZ(16,"div",58)(17,"div",6)(18,"label",55),e._uU(19,"Unit Price"),e.qZA(),e._UZ(20,"input",60),e.qZA()(),e.TgZ(21,"div",58)(22,"div",6)(23,"label",55),e._uU(24,"Number of ITems"),e.qZA(),e._UZ(25,"input",61),e.qZA()()()()()()}if(2&i){const t=o.index,n=e.oxw(2);let r,s,l,d;e.xp6(5),e.hij("Product ",t+1,""),e.xp6(2),e.Q6J("disabled","invoice"===(null==(r=n.receiptForm.get("customeorinvoice"))?null:r.value)),e.xp6(2),e.Q6J("formGroupName",t),e.xp6(6),e.Q6J("readOnly","invoice"===(null==(s=n.receiptForm.get("customeorinvoice"))?null:s.value)),e.xp6(5),e.Q6J("readOnly","invoice"===(null==(l=n.receiptForm.get("customeorinvoice"))?null:l.value)),e.xp6(5),e.Q6J("readOnly","invoice"===(null==(d=n.receiptForm.get("customeorinvoice"))?null:d.value))}}function ce(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",57),e.YNc(2,re,26,6,"div",45),e.TgZ(3,"div",46)(4,"button",47),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addProduct())}),e._uU(5,"Add Product"),e.qZA()()(),e.BQk()}if(2&i){const t=e.oxw();let n;e.xp6(2),e.Q6J("ngForOf",t.productsArr.controls),e.xp6(2),e.Q6J("disabled","invoice"===(null==(n=t.receiptForm.get("customeorinvoice"))?null:n.value))}}function se(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",62),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.deleteReceipt())}),e._uU(2,"Delete Receipt"),e.qZA(),e.TgZ(3,"button",63),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.updateReceipt())}),e._uU(4,"Edit Receipt"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.receiptForm.invalid),e.xp6(2),e.Q6J("disabled",t.receiptForm.invalid)}}function le(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",64),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addReceipt())}),e._uU(1,"Add Receipt"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.receiptForm.invalid)}}let b=(()=>{class i{constructor(t,n,r,s,l,d){this.formBuilder=t,this.router=n,this.receiptService=r,this.clientService=s,this.invoiceService=l,this.route=d,this.title="Add Receipt",this.today=(new Date).toISOString().substring(0,10),this.submiting=!1,this.loading=!1,this.loadingclients=!1,this.loadinginvoice=!1}ngOnInit(){this.loadClients({}),this.loadInvoices({}),this.receiptForm=this.formBuilder.group({customerid:[""],invoicelsoid:[""],recipient:[""],modeofpay:["mpesa",c.kI.required],typeofpay:["receipt"],transactioncode:[""],paymentdate:[this.today],description:[""],customeorinvoice:["customer"],serviceorproduct:["service"],products:this.formBuilder.array([]),service:this.formBuilder.array([])}),this.receiptId=this.route.snapshot.paramMap.get("id"),this.receiptId?(this.title="Edit Receipt",this.getInvoice(this.receiptId),this.receiptForm.get("serviceorproduct")?.disable(),this.receiptForm.get("customeorinvoice")?.disable()):this.addService()}checkIfprdServ(){const t=this.receiptForm.get("serviceorproduct")?.value;this.serviceArr.clear(),this.productsArr.clear(),"service"===t&&this.addService(),"product"===t&&this.addProduct()}checkIfnvc(){const t=this.receiptForm.get("customeorinvoice")?.value;this.serviceArr.clear(),this.productsArr.clear(),"customer"===t?(this.receiptForm.removeControl("invoicelsoid"),this.receiptForm.removeControl("recipient"),this.receiptForm.addControl("customerid",this.formBuilder.control("",c.kI.required)),this.receiptForm.get("serviceorproduct")?.enable()):"invoice"===t?(this.receiptForm.removeControl("customerid"),this.receiptForm.removeControl("recipient"),this.receiptForm.addControl("invoicelsoid",this.formBuilder.control("",c.kI.required)),this.receiptForm.get("serviceorproduct")?.disable()):"recipient"===t&&(this.receiptForm.removeControl("customerid"),this.receiptForm.removeControl("invoicelsoid"),this.receiptForm.addControl("recipient",this.formBuilder.control("",c.kI.required)),this.receiptForm.get("serviceorproduct")?.enable())}getInvoice(t){this.loading=!0,this.receiptService.getPayment(t).subscribe({next:n=>{const r=new Date(n.paymentdate).toISOString().substring(0,10);n.paymentdate=r,this.receiptForm.patchValue(n),n.products.forEach(s=>{const l=this.formBuilder.group({name:[s.name,c.kI.required],noOfitems:[s.noOfitems,c.kI.required],unitprice:[s.unitprice,c.kI.required],_id:[s._id]});this.productsArr.push(l)}),n.service.forEach(s=>{const l=this.formBuilder.group({name:[s.name,c.kI.required],price:[s.price,c.kI.required],_id:[s._id]});this.serviceArr.push(l)})},error:n=>{this.errorMessage=n,this.loading=!1},complete:()=>{this.loading=!1}})}get productsArr(){return this.receiptForm.get("products")}addProduct(){const t=this.formBuilder.group({name:["",c.kI.required],noOfitems:["",c.kI.required],unitprice:["",c.kI.required]});this.productsArr.push(t)}deleteProduct(t){this.productsArr.removeAt(t)}get serviceArr(){return this.receiptForm.get("service")}addService(){const t=this.formBuilder.group({name:["",c.kI.required],price:["",c.kI.required]});this.serviceArr.push(t)}deleteService(t){this.serviceArr.removeAt(t)}addReceipt(){if(this.receiptForm.valid){this.submiting=!0;const t=this.receiptForm.value;t.serviceorproduct=this.receiptForm.get("serviceorproduct")?.value,""===t.customerid&&delete t.customerid,""===t.invoicelsoid&&delete t.invoicelsoid,this.receiptService.createPayment(t).subscribe({next:n=>{this.receiptForm.reset(),this.router.navigate(["/accounts/receitps"])},error:n=>{this.errorMessage=n,this.submiting=!1},complete:()=>{this.submiting=!1}})}}updateReceipt(){const t=this.receiptForm.value;t.serviceorproduct=this.receiptForm.get("serviceorproduct")?.value,""===t.customerid&&delete t.customerid,""===t.invoicelsoid&&delete t.invoicelsoid,this.submiting=!0,this.receiptService.updatePayment(this.receiptId,t).subscribe({next:n=>{this.router.navigate(["/accounts/receitps"])},error:n=>{this.errorMessage=n,this.submiting=!1},complete:()=>{this.submiting=!1}})}deleteReceipt(){this.submiting=!0,this.receiptService.deletePayment(this.receiptId).subscribe({next:t=>{this.router.navigate(["/accounts/receitps"])},error:t=>{this.errorMessage=t,this.submiting=!1},complete:()=>{this.submiting=!1}})}loadClients(t){this.loadingclients=!0,this.clientService.getAllClientSuppliers(1,100,t).subscribe({next:n=>{this.clients=n},error:n=>{this.errorMessage=n,this.loadingclients=!1},complete:()=>{this.loadingclients=!1}})}loadInvoices(t){this.loadinginvoice=!0,this.invoiceService.getAllInvoicelsos(1,100,t).subscribe({next:n=>{this.invoices=n},error:n=>{this.errorMessage=n,this.loadinginvoice=!1},complete:()=>{this.loadinginvoice=!1}})}onSelectInvoice(){this.serviceArr.clear(),this.productsArr.clear();const t=this.receiptForm.get("invoicelsoid")?.value,n=this.invoices.results.find(r=>r._id===t);n&&n.serviceorproduct&&(this.receiptForm.get("serviceorproduct")?.setValue(n.serviceorproduct),n.products.forEach(r=>{const s=this.formBuilder.group({name:[r.name,c.kI.required],noOfitems:[r.noOfitems,c.kI.required],unitprice:[r.unitprice,c.kI.required],_id:[r._id]});this.productsArr.push(s)}),n.service.forEach(r=>{const s=this.formBuilder.group({name:[r.name,c.kI.required],price:[r.price,c.kI.required],_id:[r._id]});this.serviceArr.push(s)}))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.qu),e.Y36(u.F0),e.Y36(h),e.Y36(B.y),e.Y36(w.v),e.Y36(u.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-edit-receipt"]],decls:72,vars:13,consts:[[4,"ngIf"],[1,"my-4",3,"formGroup"],[1,"d-flex"],[1,"flex-grow-1"],[1,"fw-normal"],["routerLink","/accounts/receipts",1,"btn","btn-outline-secondary","btn-sm"],[1,"mb-3"],[1,"form-check","form-check-inline"],["type","radio","formControlName","customeorinvoice","id","inlineRadio3","value","customer",1,"form-check-input",3,"change"],["for","inlineRadio3",1,"form-check-label"],["type","radio","formControlName","customeorinvoice","id","inlineRadio4","value","invoice",1,"form-check-input",3,"change"],["for","inlineRadio4",1,"form-check-label"],["type","radio","formControlName","customeorinvoice","id","inlineRadio5","value","recipient",1,"form-check-input",3,"change"],["for","inlineRadio5",1,"form-check-label"],[1,"row"],[1,"col-lg-6"],["for","title",1,"form-label"],["type","date","id","title","formControlName","paymentdate",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["type","text","id","title","formControlName","transactioncode","placeholder","Enter Transaction code",1,"form-control"],["for","projectlink",1,"form-label"],["aria-label","Default select example","formControlName","modeofpay",1,"form-select"],["value","mpesa"],["value","cash"],["value","bank_deposit"],["value","cheque"],["value","paypal"],["for","description",1,"form-label"],["id","description","formControlName","description","placeholder","Enter Description",1,"form-control"],["type","radio","formControlName","serviceorproduct","id","inlineRadio1","value","service",1,"form-check-input",3,"change"],["for","inlineRadio1",1,"form-check-label"],["type","radio","formControlName","serviceorproduct","id","inlineRadio2","value","product",1,"form-check-input",3,"change"],["for","inlineRadio2",1,"form-check-label"],[4,"ngIf","ngIfElse"],["adding",""],[1,"py-3"],[3,"errorMessage"],["formControlName","customerid"],["value","","disabled",""],[4,"ngFor","ngForOf"],[3,"value"],[1,"invalid-feedback"],["formControlName","invoicelsoid",3,"readonly","change"],["type","text","id","title","formControlName","recipient","placeholder","Enter Recipient",1,"form-control"],["formArrayName","service"],["class","card my-3",4,"ngFor","ngForOf"],[1,"text-end"],["type","button",1,"btn","btn-success","btn-sm","mt-3",3,"disabled","click"],[1,"card","my-3"],[1,"card-body"],[1,"card-title"],[1,"btn","btn-danger","btn-sm",3,"disabled","click"],[3,"formGroupName"],["for","titl",1,"form-label"],["type","text","id","titl","formControlName","name","placeholder","Enter Service Provided",1,"form-control",3,"readOnly"],["for","pric",1,"form-label"],["type","number","id","pric","formControlName","price","placeholder","Enter Price",1,"form-control",3,"readOnly"],["formArrayName","products"],[1,"col-lg-4"],["type","text","id","titl","formControlName","name","placeholder","Enter Product Name",1,"form-control",3,"readOnly"],["type","number","id","pric","formControlName","unitprice","placeholder","Enter Unit Price",1,"form-control",3,"readOnly"],["type","number","id","pric","formControlName","noOfitems","placeholder","Enter Number of Items",1,"form-control",3,"readOnly"],["type","submit",1,"btn","btn-danger","btn-sm","me-2",3,"disabled","click"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled","click"],["type","submit",1,"btn","btn-success","btn-sm",3,"disabled","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,L,3,1,"ng-container",0),e.TgZ(2,"form",1)(3,"div",2)(4,"div",3)(5,"h2",4),e._uU(6),e.qZA()(),e.TgZ(7,"div")(8,"button",5),e._uU(9," List Receipts"),e.qZA()()(),e.TgZ(10,"div",6)(11,"div",7)(12,"input",8),e.NdJ("change",function(){return n.checkIfnvc()}),e.qZA(),e.TgZ(13,"label",9),e._uU(14,"Customer"),e.qZA()(),e.TgZ(15,"div",7)(16,"input",10),e.NdJ("change",function(){return n.checkIfnvc()}),e.qZA(),e.TgZ(17,"label",11),e._uU(18,"Invoice"),e.qZA()(),e.TgZ(19,"div",7)(20,"input",12),e.NdJ("change",function(){return n.checkIfnvc()}),e.qZA(),e.TgZ(21,"label",13),e._uU(22,"Direct Recipient"),e.qZA()()(),e.YNc(23,K,5,2,"ng-container",0),e.YNc(24,W,5,2,"ng-container",0),e.YNc(25,X,4,1,"ng-container",0),e.TgZ(26,"div",14)(27,"div",15)(28,"div",6)(29,"label",16),e._uU(30,"Payment Date "),e.qZA(),e._UZ(31,"input",17),e.YNc(32,ee,2,0,"div",18),e.qZA()(),e.TgZ(33,"div",15)(34,"div",6)(35,"label",16),e._uU(36,"Transaction Code "),e.qZA(),e._UZ(37,"input",19),e.YNc(38,te,2,0,"div",18),e.qZA()()(),e.TgZ(39,"div",6)(40,"label",20),e._uU(41,"Mode Of Payment"),e.qZA(),e.TgZ(42,"select",21)(43,"option",22),e._uU(44,"Mpesa"),e.qZA(),e.TgZ(45,"option",23),e._uU(46,"Cash"),e.qZA(),e.TgZ(47,"option",24),e._uU(48,"Bank Deposit"),e.qZA(),e.TgZ(49,"option",25),e._uU(50,"Cheque"),e.qZA(),e.TgZ(51,"option",26),e._uU(52,"Paypal and Others"),e.qZA()()(),e.TgZ(53,"div",6)(54,"label",27),e._uU(55,"Description"),e.qZA(),e._UZ(56,"textarea",28),e.YNc(57,ie,2,0,"div",18),e.qZA(),e.TgZ(58,"div",6)(59,"div",7)(60,"input",29),e.NdJ("change",function(){return n.checkIfprdServ()}),e.qZA(),e.TgZ(61,"label",30),e._uU(62,"Service"),e.qZA()(),e.TgZ(63,"div",7)(64,"input",31),e.NdJ("change",function(){return n.checkIfprdServ()}),e.qZA(),e.TgZ(65,"label",32),e._uU(66,"Products"),e.qZA()()(),e.YNc(67,oe,6,2,"ng-container",0),e.YNc(68,ce,6,2,"ng-container",0),e.YNc(69,se,5,2,"ng-container",33),e.YNc(70,le,2,1,"ng-template",null,34,e.W1O),e.qZA()()),2&t){const r=e.MAs(71);let s,l,d,m,_,g,C,y;e.xp6(1),e.Q6J("ngIf",n.errorMessage),e.xp6(1),e.Q6J("formGroup",n.receiptForm),e.xp6(4),e.Oqu(n.title),e.xp6(17),e.Q6J("ngIf","customer"===(null==(s=n.receiptForm.get("customeorinvoice"))?null:s.value)),e.xp6(1),e.Q6J("ngIf","invoice"===(null==(l=n.receiptForm.get("customeorinvoice"))?null:l.value)),e.xp6(1),e.Q6J("ngIf","recipient"===(null==(d=n.receiptForm.get("customeorinvoice"))?null:d.value)),e.xp6(7),e.Q6J("ngIf",(null==(m=n.receiptForm.get("paymentdate"))?null:m.invalid)&&(null==(m=n.receiptForm.get("paymentdate"))?null:m.touched)),e.xp6(6),e.Q6J("ngIf",(null==(_=n.receiptForm.get("transactioncode"))?null:_.invalid)&&(null==(_=n.receiptForm.get("transactioncode"))?null:_.touched)),e.xp6(19),e.Q6J("ngIf",(null==(g=n.receiptForm.get("description"))?null:g.invalid)&&(null==(g=n.receiptForm.get("description"))?null:g.touched)),e.xp6(10),e.Q6J("ngIf","service"===(null==(C=n.receiptForm.get("serviceorproduct"))?null:C.value)),e.xp6(1),e.Q6J("ngIf","product"===(null==(y=n.receiptForm.get("serviceorproduct"))?null:y.value)),e.xp6(1),e.Q6J("ngIf",n.receiptId)("ngIfElse",r)}},dependencies:[p.sg,p.O5,c._Y,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c._,c.JJ,c.JL,c.sg,c.u,c.x0,c.CE,Z.A,v.w9,v.jq,u.rH]}),i})();function ae(i,o){1&i&&(e.ynx(0),e.TgZ(1,"div",3),e._UZ(2,"app-sul-loader"),e.qZA(),e.BQk())}function pe(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",3),e._UZ(2,"app-error-occured",5),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("errorMessage",t.errorMessage)}}function de(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"json"),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.lcZ(2,1,t.detailReceipt)," ")}}function ue(i,o){1&i&&e._UZ(0,"app-no-data-found",7),2&i&&e.Q6J("dataLabel","Invoice")}function me(i,o){if(1&i&&(e.YNc(0,de,3,3,"ng-container",1),e.YNc(1,ue,1,1,"ng-template",null,6,e.W1O)),2&i){const t=e.MAs(2),n=e.oxw(2);e.Q6J("ngIf",n.detailReceipt)("ngIfElse",t)}}function _e(i,o){if(1&i&&(e.YNc(0,pe,3,1,"ng-container",1),e.YNc(1,me,3,2,"ng-template",null,4,e.W1O)),2&i){const t=e.MAs(2),n=e.oxw();e.Q6J("ngIf",n.errorMessage)("ngIfElse",t)}}const ge=[{path:"",component:Y},{path:"add",component:b},{path:"edit/:id",component:b},{path:"view/:id",component:(()=>{class i{constructor(t,n){this.receiptService=t,this.route=n,this.loading=!1}ngOnInit(){this.receiptId=this.route.snapshot.paramMap.get("id"),this.receiptId&&this.getReceipt(this.receiptId)}getReceipt(t){this.loading=!0,this.receiptService.getPaymentPrint(t).subscribe({next:n=>{this.detailReceipt=n},error:n=>{this.errorMessage=n,this.loading=!1},complete:()=>{this.loading=!1}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(h),e.Y36(u.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-details-receipt"]],decls:4,vars:2,consts:[[1,"py-4"],[4,"ngIf","ngIfElse"],["loadedContent",""],[1,"py-3"],["noError",""],[3,"errorMessage"],["nodata",""],[3,"dataLabel"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,ae,3,0,"ng-container",1),e.YNc(2,_e,3,2,"ng-template",null,2,e.W1O),e.qZA()),2&t){const r=e.MAs(3);e.xp6(1),e.Q6J("ngIf",n.loading)("ngIfElse",r)}},dependencies:[p.O5,A.S,T.i,Z.A,p.Ts]}),i})()},{path:"**",redirectTo:"",pathMatch:"full"}];let ve=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,c.u5,c.UX,q.C,f.JX,v.A0,u.Bz.forChild(ge)]}),i})()}}]);