"use strict";(self.webpackChunksuluhi_admin_frontend=self.webpackChunksuluhi_admin_frontend||[]).push([[815],{3815:(B,g,r)=>{r.r(g),r.d(g,{TasksModule:()=>P});var c=r(6895),d=r(8869),i=r(4006),f=r(1213),m=r(4333),t=r(4650);let h=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-task-details"]],decls:2,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"task-details works!"),t.qZA())}}),s})();var Z=r(2340),v=r(529);let k=(()=>{class s{constructor(e){this.http=e,this.taskurl=`${Z.N.apiUrl}tasks`}createTask(e){return this.http.post(this.taskurl,e)}getTask(e){return this.http.get(`${this.taskurl}/${e}`)}updateTask(e,n){return this.http.put(`${this.taskurl}/${e}`,n)}deleteTask(e){return this.http.delete(`${this.taskurl}/${e}`)}getAllTasks(e,n,o){const l={currentPage:e,pageSize:n,...o};return this.http.get(this.taskurl,{params:l})}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(v.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var x=r(7997),A=r(5511),_=r(8057),b=r(295);function C(s,a){1&s&&(t.ynx(0),t.TgZ(1,"div",8),t._UZ(2,"app-sul-loader"),t.qZA(),t.BQk())}function y(s,a){if(1&s&&(t.ynx(0),t.TgZ(1,"div",8),t._UZ(2,"app-error-occured",10),t.qZA(),t.BQk()),2&s){const e=t.oxw(2);t.xp6(2),t.Q6J("errorMessage",e.errorMessage)}}const q=function(s){return["edit",s]};function U(s,a){if(1&s&&(t.ynx(0),t.TgZ(1,"tr",18)(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"td",19),t._uU(10),t.qZA()(),t.BQk()),2&s){const e=a.$implicit,n=a.index;t.xp6(1),t.Q6J("routerLink",t.VKq(7,q,e._id)),t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Oqu(t.lcZ(8,5,e.taskDate)),t.xp6(3),t.Oqu(e.taskstatus)}}const E=function(s,a,e){return{itemsPerPage:s,currentPage:a,totalItems:e}};function F(s,a){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",12)(2,"table",13)(3,"thead",14)(4,"tr")(5,"th"),t._uU(6,"#"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Title"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Date"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Status"),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,U,11,9,"ng-container",15),t.ALo(15,"paginate"),t.qZA()()(),t.TgZ(16,"div",16)(17,"pagination-controls",17),t.NdJ("pageChange",function(o){t.CHM(e);const l=t.oxw(3);return t.KtG(l.onPageChange(o))}),t.qZA()(),t.BQk()}if(2&s){const e=t.oxw(3);t.xp6(14),t.Q6J("ngForOf",t.xi3(15,1,e.tasks.results,t.kEZ(4,E,e.tasks.pageSize,e.currentPage,e.tasks.totalItems)))}}function I(s,a){1&s&&t._UZ(0,"app-no-data-found",20),2&s&&t.Q6J("dataLabel","Task")}function J(s,a){if(1&s&&(t.YNc(0,F,18,8,"ng-container",6),t.YNc(1,I,1,1,"ng-template",null,11,t.W1O)),2&s){const e=t.MAs(2),n=t.oxw(2);t.Q6J("ngIf",n.tasks&&n.tasks.results.length)("ngIfElse",e)}}function D(s,a){if(1&s&&(t.YNc(0,y,3,1,"ng-container",6),t.YNc(1,J,3,2,"ng-template",null,9,t.W1O)),2&s){const e=t.MAs(2),n=t.oxw();t.Q6J("ngIf",n.errorMessage)("ngIfElse",e)}}let L=(()=>{class s{constructor(e){this.taskService=e,this.loading=!0,this.currentPage=1,this.pageSize=10,this.options=[{name:"Task Title",formname:"title",type:"text"},{name:"Task Date",formname:"taskDate",type:"date"},{name:"Status",formname:"taskstatus",type:"select",selectoptions:[{val:"pending",name:"Pending"},{val:"progress",name:"Progress"},{val:"complete",name:"Complete"}]}]}ngOnInit(){this.loadTasks({})}loadTasks(e){this.loading=!0,this.taskService.getAllTasks(this.currentPage,this.pageSize,e).subscribe({next:n=>{this.tasks=n},error:n=>{this.errorMessage=n,this.loading=!1},complete:()=>{this.loading=!1}})}searchFunction(e){this.loadTasks(e)}onPageChange(e){this.currentPage=e,this.loadTasks({})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(k))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-list-tasks"]],decls:13,vars:3,consts:[[1,"py-4"],[1,"d-flex"],[1,"flex-grow-1"],[1,"text-secondary","fw-normal","mb-1"],[3,"searchOptions","searchEmit"],["routerLink","/targets/tasks/add",1,"btn","btn-outline-primary","btn-sm"],[4,"ngIf","ngIfElse"],["loadedContent",""],[1,"py-3"],["noError",""],[3,"errorMessage"],["nodata",""],[1,"table-responsive"],[1,"table","table-bordered","table-striped","text-nowrap"],[1,"thead"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","pt-3"],[1,"my-pagination",3,"pageChange"],[1,"cursor-pointer",3,"routerLink"],[1,"text-capitalize"],[3,"dataLabel"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._uU(4,"Tasks"),t.qZA()(),t.ynx(5),t.TgZ(6,"app-search-tab",4),t.NdJ("searchEmit",function(l){return n.searchFunction(l)}),t.qZA(),t.BQk(),t.TgZ(7,"div")(8,"button",5),t._uU(9," Add Task"),t.qZA()()(),t.YNc(10,C,3,0,"ng-container",6),t.YNc(11,D,3,2,"ng-template",null,7,t.W1O),t.qZA()),2&e){const o=t.MAs(12);t.xp6(6),t.Q6J("searchOptions",n.options),t.xp6(4),t.Q6J("ngIf",n.loading)("ngIfElse",o)}},dependencies:[c.sg,c.O5,x.S,A.i,_.A,b.O,m.LS,d.rH,c.uU,m._s]}),s})();function M(s,a){if(1&s&&(t.ynx(0),t.TgZ(1,"div",21),t._UZ(2,"app-error-occured",22),t.qZA(),t.BQk()),2&s){const e=t.oxw();t.xp6(2),t.Q6J("errorMessage",e.errorMessage)}}function N(s,a){1&s&&(t.TgZ(0,"div",23),t._uU(1," Title is required. "),t.qZA())}function Q(s,a){1&s&&(t.TgZ(0,"div",23),t._uU(1," Task Date is required. "),t.qZA())}function S(s,a){1&s&&(t.TgZ(0,"div",23),t._uU(1," Description is required. "),t.qZA())}function Y(s,a){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteTask())}),t._uU(2,"Delete Task"),t.qZA(),t.TgZ(3,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.updateTask())}),t._uU(4,"Edit Task"),t.qZA(),t.BQk()}if(2&s){const e=t.oxw();t.xp6(3),t.Q6J("disabled",e.taskForm.invalid)}}function O(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addTask())}),t._uU(1,"Add Task"),t.qZA()}if(2&s){const e=t.oxw();t.Q6J("disabled",e.taskForm.invalid)}}let T=(()=>{class s{constructor(e,n,o,l){this.formBuilder=e,this.router=n,this.taskService=o,this.route=l,this.title="Add Task",this.today=(new Date).toISOString().substring(0,10)}ngOnInit(){this.taskForm=this.formBuilder.group({title:["",i.kI.required],description:["",i.kI.required],taskDate:[this.today],taskstatus:["pending"]}),this.taskId=this.route.snapshot.paramMap.get("id"),this.taskId&&(this.title="Edit Task",this.getTask(this.taskId))}addTask(){this.taskForm.valid&&this.taskService.createTask(this.taskForm.value).subscribe({next:n=>{this.taskForm.reset(),this.router.navigate(["/targets/tasks"])},error:n=>{console.error("Failed to Add task",n)}})}getTask(e){this.taskService.getTask(e).subscribe({next:n=>{const o=new Date(n.taskDate).toISOString().substring(0,10);n.taskDate=o,this.taskForm.patchValue(n)},error:n=>{console.error("Failed to Add task",n)}})}updateTask(){this.taskService.updateTask(this.taskId,this.taskForm.value).subscribe({next:n=>{console.log(n),this.router.navigate(["/targets/tasks"])},error:n=>{this.errorMessage=n}})}deleteTask(){this.taskService.deleteTask(this.taskId).subscribe({next:e=>{this.router.navigate(["/targets/tasks"])},error:e=>{this.errorMessage=e}})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(i.qu),t.Y36(d.F0),t.Y36(k),t.Y36(d.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-add-edit-tasks"]],decls:38,vars:8,consts:[[4,"ngIf"],[1,"my-4",3,"formGroup"],[1,"d-flex"],[1,"flex-grow-1"],[1,"fw-normal"],["routerLink","/targets/tasks",1,"btn","btn-outline-primary","btn-sm"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title","placeholder","Enter Title",1,"form-control"],["class","sul-error",4,"ngIf"],["for","date",1,"form-label"],["type","date","id","date","formControlName","taskDate","placeholder","Enter Task Date",1,"form-control"],["for","description",1,"form-label"],["id","description","formControlName","description","placeholder","Enter Description",1,"form-control"],["for","projectlink",1,"form-label"],["aria-label","Default select example","formControlName","taskstatus",1,"form-select"],["value","pending"],["value","progress"],["value","complete"],[4,"ngIf","ngIfElse"],["adding",""],[1,"py-3"],[3,"errorMessage"],[1,"sul-error"],["type","submit",1,"btn","btn-danger","btn-sm","me-2",3,"click"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled","click"],["type","submit",1,"btn","btn-success","btn-sm",3,"disabled","click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,M,3,1,"ng-container",0),t.TgZ(2,"form",1)(3,"div",2)(4,"div",3)(5,"h2",4),t._uU(6),t.qZA()(),t.TgZ(7,"div")(8,"button",5),t._uU(9," List Tasks"),t.qZA()()(),t.TgZ(10,"div",6)(11,"label",7),t._uU(12,"Title"),t.qZA(),t._UZ(13,"input",8),t.YNc(14,N,2,0,"div",9),t.qZA(),t.TgZ(15,"div",6)(16,"label",10),t._uU(17,"Task Date "),t.qZA(),t._UZ(18,"input",11),t.YNc(19,Q,2,0,"div",9),t.qZA(),t.TgZ(20,"div",6)(21,"label",12),t._uU(22,"Description"),t.qZA(),t._UZ(23,"textarea",13),t.YNc(24,S,2,0,"div",9),t.qZA(),t.TgZ(25,"div",6)(26,"label",14),t._uU(27,"Project Status"),t.qZA(),t.TgZ(28,"select",15)(29,"option",16),t._uU(30,"Pending"),t.qZA(),t.TgZ(31,"option",17),t._uU(32,"Progress"),t.qZA(),t.TgZ(33,"option",18),t._uU(34,"Completed"),t.qZA()()(),t.YNc(35,Y,5,1,"ng-container",19),t.YNc(36,O,2,1,"ng-template",null,20,t.W1O),t.qZA()()),2&e){const o=t.MAs(37);let l,p,u;t.xp6(1),t.Q6J("ngIf",n.errorMessage),t.xp6(1),t.Q6J("formGroup",n.taskForm),t.xp6(4),t.Oqu(n.title),t.xp6(8),t.Q6J("ngIf",(null==(l=n.taskForm.get("title"))?null:l.invalid)&&(null==(l=n.taskForm.get("title"))?null:l.touched)),t.xp6(5),t.Q6J("ngIf",(null==(p=n.taskForm.get("taskDate"))?null:p.invalid)&&(null==(p=n.taskForm.get("taskDate"))?null:p.touched)),t.xp6(5),t.Q6J("ngIf",(null==(u=n.taskForm.get("description"))?null:u.invalid)&&(null==(u=n.taskForm.get("description"))?null:u.touched)),t.xp6(11),t.Q6J("ngIf",n.taskId)("ngIfElse",o)}},dependencies:[c.O5,i._Y,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.JL,i.sg,i.u,_.A,d.rH]}),s})();const w=[{path:"",component:L},{path:"add",component:T},{path:"edit/:id",component:T},{path:"view/:id",component:h},{path:"**",redirectTo:"",pathMatch:"full"}];let P=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[c.ez,i.u5,i.UX,f.C,m.JX,d.Bz.forChild(w)]}),s})()}}]);